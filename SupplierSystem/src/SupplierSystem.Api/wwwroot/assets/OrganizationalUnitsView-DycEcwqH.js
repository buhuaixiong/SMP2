import{bT as e,d as t,ax as a,bh as l,j as n,bU as o,bV as s,au as d,c as i,b as r,o as u,y as c,z as p,f as h,w as v,k as f,e as m,P as y,S as g,O as k,F as b,U as C,bW as N,ay as x,bJ as w,h as _,r as E,x as S,t as V,aa as D,bb as K,bX as $,bY as T,bZ as I,b_ as L,b$ as z,ao as A,b6 as B,bn as O,be as U,c0 as M,c1 as j,av as F,bl as q,i as P,B as H,c2 as R,C as W,c3 as Y,c4 as Z,I as J,b7 as X,c5 as G,b9 as Q,ba as ee,c6 as te,c7 as ae,aH as le,c8 as ne,bp as oe,bq as se,c9 as de,V as ie,bF as re,br as ue,ca as ce,bj as pe,bk as he,bt as ve,cb as fe,bs as me,bv as ye,bm as ge,cc as ke,m as be,cd as Ce,aF as Ne,ak as xe,E as we,ac as _e,a5 as Ee,by as Se,bA as Ve,n as De,v as Ke,bz as $e,ce as Te,cf as Ie,cg as Le,bg as ze,bd as Ae,bc as Be,ch as Oe,M as Ue,ci as Me,cj as je,p as Fe,ck as qe,cl as Pe,cm as He,as as Re,cn as We,bx as Ye,co as Ze,b0 as Je,b1 as Xe,b2 as Ge,b3 as Qe,aP as et,g as tt,ab as at,H as lt,A as nt,a$ as ot,b4 as st,_ as dt}from"./index-DXSUgVsS.js";import{v as it}from"./el-loading-BQYF8ZZ4.js";import{t as rt,E as ut}from"./el-tag-CakY8Mry.js";import{E as ct,a as pt,e as ht,s as vt}from"./el-select-BJKaasqg.js";import{E as ft}from"./el-scrollbar-DtyD_3Ra.js";import{b as mt,a as yt,E as gt}from"./el-table-column-CT42DUDO.js";import{E as kt}from"./el-text-CQkYbe_b.js";import{E as bt,a as Ct}from"./el-tab-pane-BtcFN53p.js";import{E as Nt,a as xt}from"./el-form-item-DrY6wbkf.js";/* empty css                 */import{a as wt,E as _t,b as Et}from"./el-radio-group-K3-abLWG.js";import{E as St}from"./el-card-C_OFNPgL.js";import{E as Vt}from"./el-space-BJ6X_aNc.js";import{P as Dt}from"./PageHeader-4WSdsSzt.js";import{l as Kt}from"./users-Dhb9zrfm.js";import{u as $t}from"./useNotification-1-PDpEI8.js";import{c as Tt}from"./cloneDeep-bWkmUDK2.js";import"./castArray-DovORwah.js";import"./_baseClone-Byf1hNEB.js";import"./debounce-B9tWmbwi.js";import"./index-DIU4vmjK.js";var It=1/0;const Lt=Symbol();var zt=t({name:"NodeContent",props:{node:{type:Object,required:!0}},setup(e){const t=a("cascader-node"),{renderLabelFn:d}=l(Lt),{node:i}=e,{data:r,label:u}=i,c=()=>{const e=null==d?void 0:d({node:i,data:r});return(o(t=e)?t.every(({type:e})=>e===s):(null==t?void 0:t.type)===s)?u:null!=e?e:u;var t};return()=>n("span",{class:t.e("label")},[c()])}});const At=t({name:"ElCascaderNode"});var Bt=d(t({...At,props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const o=e,s=l(Lt),d=a("cascader-node"),x=i(()=>s.isHoverMenu),w=i(()=>s.config.multiple),_=i(()=>s.config.checkStrictly),E=i(()=>s.config.showPrefix),S=i(()=>{var e;return null==(e=s.checkedNodes[0])?void 0:e.uid}),V=i(()=>o.node.isDisabled),D=i(()=>o.node.isLeaf),K=i(()=>_.value&&!D.value||!V.value),$=i(()=>I(s.expandingNode)),T=i(()=>_.value&&s.checkedNodes.some(I)),I=e=>{var t;const{level:a,uid:l}=o.node;return(null==(t=null==e?void 0:e.pathNodes[a-1])?void 0:t.uid)===l},L=()=>{$.value||s.expandNode(o.node)},z=e=>{const{node:t}=o;e!==t.checked&&s.handleCheckChange(t,e)},A=()=>{s.lazyLoad(o.node,()=>{D.value||L()})},B=e=>{x.value&&(O(),!D.value&&t("expand",e))},O=()=>{const{node:e}=o;K.value&&!e.loading&&(e.loaded?L():A())},U=()=>{!D.value||V.value||_.value||w.value?(s.config.checkOnClickNode&&(w.value||_.value)||D.value&&s.config.checkOnClickLeaf)&&!V.value?M(!o.node.checked):x.value||O():j(!0)},M=e=>{_.value?(z(e),o.node.loaded&&L()):j(e)},j=e=>{o.node.loaded?(z(e),!_.value&&L()):A()};return(t,a)=>(u(),r("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!h(D),"aria-owns":h(D)?void 0:e.menuId,"aria-expanded":h($),tabindex:h(K)?-1:void 0,class:g([h(d).b(),h(d).is("selectable",h(_)),h(d).is("active",e.node.checked),h(d).is("disabled",!h(K)),h($)&&"in-active-path",h(T)&&"in-checked-path"]),onMouseenter:B,onFocus:B,onClick:U},[c(" prefix "),h(w)&&h(E)?(u(),p(h(mt),{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:h(V),onClick:v(()=>{},["stop"]),"onUpdate:modelValue":M},null,8,["model-value","indeterminate","disabled","onClick"])):h(_)&&h(E)?(u(),p(h(wt),{key:1,"model-value":h(S),label:e.node.uid,disabled:h(V),"onUpdate:modelValue":M,onClick:v(()=>{},["stop"])},{default:f(()=>[c("\n        Add an empty element to avoid render label,\n        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485\n      "),m("span")]),_:1},8,["model-value","label","disabled","onClick"])):h(D)&&e.node.checked?(u(),p(h(k),{key:2,class:g(h(d).e("prefix"))},{default:f(()=>[n(h(y))]),_:1},8,["class"])):c("v-if",!0),c(" content "),n(h(zt),{node:e.node},null,8,["node"]),c(" postfix "),h(D)?c("v-if",!0):(u(),r(b,{key:3},[e.node.loading?(u(),p(h(k),{key:0,class:g([h(d).is("loading"),h(d).e("postfix")])},{default:f(()=>[n(h(C))]),_:1},8,["class"])):(u(),p(h(k),{key:1,class:g(["arrow-right",h(d).e("postfix")])},{default:f(()=>[n(h(N))]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex"]))}}),[["__file","node.vue"]]);const Ot=t({name:"ElCascaderMenu"});var Ut=d(t({...Ot,props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=e,o=K(),s=a("cascader-menu"),{t:d}=x(),v=w();let m,y;const N=l(Lt),$=_(),T=i(()=>!t.nodes.length),I=i(()=>!N.initialLoaded),L=i(()=>`${v.value}-${t.index}`),z=e=>{m=e.target},A=e=>{if(N.isHoverMenu&&m&&$.value)if(m.contains(e.target)){B();const t=o.vnode.el,{left:a}=t.getBoundingClientRect(),{offsetWidth:l,offsetHeight:n}=t,s=e.clientX-a,d=m.offsetTop,i=d+m.offsetHeight;$.value.innerHTML=`\n          <path style="pointer-events: auto;" fill="transparent" d="M${s} ${d} L${l} 0 V${d} Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M${s} ${i} L${l} ${n} V${i} Z" />\n        `}else y||(y=window.setTimeout(O,N.config.hoverThreshold))},B=()=>{y&&(clearTimeout(y),y=void 0)},O=()=>{$.value&&($.value.innerHTML="",B())};return(t,a)=>(u(),p(h(ft),{key:h(L),tag:"ul",role:"menu",class:g(h(s).b()),"wrap-class":h(s).e("wrap"),"view-class":[h(s).e("list"),h(s).is("empty",h(T))],onMousemove:A,onMouseleave:O},{default:f(()=>{var a;return[(u(!0),r(b,null,E(e.nodes,e=>(u(),p(Bt,{key:e.uid,node:e,"menu-id":h(L),onExpand:z},null,8,["node","menu-id"]))),128)),h(I)?(u(),r("div",{key:0,class:g(h(s).e("empty-text"))},[n(h(k),{size:"14",class:g(h(s).is("loading"))},{default:f(()=>[n(h(C))]),_:1},8,["class"]),S(" "+V(h(d)("el.cascader.loading")),1)],2)):h(T)?(u(),r("div",{key:1,class:g(h(s).e("empty-text"))},[D(t.$slots,"empty",{},()=>[S(V(h(d)("el.cascader.noData")),1)])],2)):(null==(a=h(N))?void 0:a.isHoverMenu)?(u(),r(b,{key:2},[c(" eslint-disable-next-line vue/html-self-closing "),(u(),r("svg",{ref_key:"hoverZone",ref:$,class:g(h(s).e("hover-zone"))},null,2))],2112)):c("v-if",!0)]}),_:3},8,["class","wrap-class","view-class"]))}}),[["__file","menu.vue"]]);let Mt=0;let jt=class e{constructor(t,a,l,n=!1){this.data=t,this.config=a,this.parent=l,this.root=n,this.uid=Mt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:o,label:s,children:d}=a,i=t[d],r=(e=>{const t=[e];let{parent:a}=e;for(;a;)t.unshift(a),a=a.parent;return t})(this);this.level=n?0:l?l.level+1:1,this.value=t[o],this.label=t[s],this.pathNodes=r,this.pathValues=r.map(e=>e.value),this.pathLabels=r.map(e=>e.label),this.childrenData=i,this.children=(i||[]).map(t=>new e(t,a,this)),this.loaded=!a.lazy||this.isLeaf||!$(i),this.text=""}get isDisabled(){const{data:e,parent:t,config:a}=this,{disabled:l,checkStrictly:n}=a;return(T(l)?l(e,this):!!e[l])||!n&&!!(null==t?void 0:t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:a,loaded:l}=this,{lazy:n,leaf:s}=t,d=T(s)?s(e,this):e[s];return I(d)?!(n&&!l)&&!(o(a)&&a.length):!!d}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:a,children:l}=this,n=new e(t,this.config,this);return o(a)?a.push(t):this.childrenData=[t],l.push(n),n}calcText(e,t){const a=e?this.pathLabels.join(t):this.label;return this.text=a,a}broadcast(e){this.children.forEach(t=>{var a;t&&(t.broadcast(e),null==(a=t.onParentCheck)||a.call(t,e))})}emit(){var e;const{parent:t}=this;t&&(null==(e=t.onChildCheck)||e.call(t),t.emit())}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter(e=>!e.isDisabled),a=!!t.length&&t.every(e=>e.checked);this.setCheckState(a)}setCheckState(e){const t=this.children.length,a=this.children.reduce((e,t)=>e+(t.checked?1:t.indeterminate?.5:0),0);this.checked=this.loaded&&this.children.filter(e=>!e.isDisabled).every(e=>e.loaded&&e.checked)&&e,this.indeterminate=this.loaded&&a!==t&&a>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:a}=this.config;t||!a?this.checked=e:(this.broadcast(e),this.setCheckState(e),this.emit())}};const Ft=(e,t)=>e.reduce((e,a)=>(a.isLeaf?e.push(a):(!t&&e.push(a),e=e.concat(Ft(a.children,t))),e),[]);class qt{constructor(e,t){this.config=t;const a=(e||[]).map(e=>new jt(e,this.config));this.nodes=a,this.allNodes=Ft(a,!1),this.leafNodes=Ft(a,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,t){const a=t?t.appendChild(e):new jt(e,this.config);t||this.nodes.push(a),this.appendAllNodesAndLeafNodes(a)}appendNodes(e,t){e.length>0?e.forEach(e=>this.appendNode(e,t)):t&&t.isLeaf&&this.leafNodes.push(t)}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(e=>{this.appendAllNodesAndLeafNodes(e)})}getNodeByValue(e,t=!1){if(L(e))return null;return this.getFlattedNodes(t).find(t=>z(t.value,e)||z(t.pathValues,e))||null}getSameNode(e){if(!e)return null;return this.getFlattedNodes(!1).find(({value:t,level:a})=>z(e.value,t)&&e.level===a)||null}}const Pt=A({modelValue:{type:B([Number,String,Array,Object])},options:{type:B(Array),default:()=>[]},props:{type:B(Object),default:()=>({})}}),Ht={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:M,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500,checkOnClickNode:!1,checkOnClickLeaf:!0,showPrefix:!0},Rt=A({...Pt,border:{type:Boolean,default:!0},renderLabel:{type:Function}}),Wt=e=>!0,Yt={[U]:Wt,[O]:Wt,close:()=>!0,"expand-change":e=>e},Zt=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},Jt=t({name:"ElCascaderPanel",inheritAttrs:!1});const Xt=le(d(t({...Jt,props:Rt,emits:Yt,setup(t,{expose:l,emit:n}){const o=t;let s=!1;const d=a("cascader"),c=(e=>i(()=>({...Ht,...e.props})))(o),v=F();let m;const y=_(!0),k=_(!1),C=_([]),N=_(),x=_([]),w=_(),S=_([]),V=i(()=>"hover"===c.value.expandTrigger),K=i(()=>o.renderLabel||v.default),T=()=>{const{options:e}=o,t=c.value;s=!1,m=new qt(e,t),x.value=[m.getNodes()],t.lazy&&$(o.options)?(y.value=!1,I(void 0,e=>{e&&(m=new qt(e,t),x.value=[m.getNodes()]),y.value=!0,oe(!1,!0)})):oe(!1,!0)},I=(e,t)=>{const a=c.value;(e=e||new jt({},a,void 0,!0)).loading=!0;a.lazyLoad(e,a=>{const l=e,n=l.root?null:l;l.loading=!1,l.loaded=!0,l.childrenData=l.childrenData||[],a&&(null==m||m.appendNodes(a,n)),a&&(null==t||t(a)),0===e.level&&(k.value=!0)},()=>{e.loading=!1,e.loaded=!1,0===e.level&&(y.value=!0)})},L=(e,t)=>{var a;const{level:l}=e,o=x.value.slice(0,l);let s;e.isLeaf?s=e.pathNodes[l-2]:(s=e,o.push(e.children)),(null==(a=w.value)?void 0:a.uid)!==(null==s?void 0:s.uid)&&(w.value=e,x.value=o,!t&&n("expand-change",(null==e?void 0:e.pathValues)||[]))},A=(e,t,a=!0)=>{const{checkStrictly:l,multiple:o}=c.value,d=S.value[0];s=!0,!o&&(null==d||d.doCheck(!1)),e.doCheck(t),ne(),a&&!o&&!l&&n("close"),!a&&!o&&B(e)},B=e=>{e&&(e=e.parent,B(e),e&&L(e))},M=e=>null==m?void 0:m.getFlattedNodes(e),le=e=>{var t;return null==(t=M(e))?void 0:t.filter(({checked:e})=>!1!==e)},ne=()=>{var e;const{checkStrictly:t,multiple:a}=c.value,l=((e,t)=>{const a=t.slice(0),l=a.map(e=>e.uid),n=e.reduce((e,t)=>{const n=l.indexOf(t.uid);return n>-1&&(e.push(t),a.splice(n,1),l.splice(n,1)),e},[]);return n.push(...a),n})(S.value,le(!t)),n=l.map(e=>e.valueByOption);S.value=l,N.value=a?n:null!=(e=n[0])?e:null},oe=(t=!1,a=!1)=>{const{modelValue:l}=o,{lazy:n,multiple:d,checkStrictly:i}=c.value,r=!i;var u;if(y.value&&!s&&(a||!z(l,N.value)))if(n&&!t){const t=Y(null!=(u=Z(l))&&u.length?e(u,It):[]).map(e=>null==m?void 0:m.getNodeByValue(e)).filter(e=>!!e&&!e.loaded&&!e.loading);t.length?t.forEach(e=>{I(e,()=>oe(!1,a))}):oe(!0,a)}else{const e=d?Z(l):[l],t=Y(e.map(e=>null==m?void 0:m.getNodeByValue(e,r)));se(t,a),N.value=Tt(null!=l?l:void 0)}},se=(e,t=!0)=>{const{checkStrictly:a}=c.value,l=S.value,n=e.filter(e=>!!e&&(a||e.isLeaf)),o=null==m?void 0:m.getSameNode(w.value),s=t&&o||n[0];s?s.pathNodes.forEach(e=>L(e,!0)):w.value=void 0,l.forEach(e=>e.doCheck(!1)),P(n).forEach(e=>e.doCheck(!0)),S.value=n,J(de)},de=()=>{X&&C.value.forEach(e=>{const t=null==e?void 0:e.$el;if(t){const e=t.querySelector(`.${d.namespace.value}-scrollbar__wrap`),a=t.querySelector(`.${d.b("node")}.${d.is("active")}:last-child`)||t.querySelector(`.${d.b("node")}.in-active-path`);G(e,a)}})},ie=e=>{const t=e.target,a=Q(e);switch(a){case ee.up:case ee.down:{e.preventDefault();const l=a===ee.up?-1:1;te(ae(t,l,`.${d.b("node")}[tabindex="-1"]`));break}case ee.left:{e.preventDefault();const a=C.value[Zt(t)-1],l=null==a?void 0:a.$el.querySelector(`.${d.b("node")}[aria-expanded="true"]`);te(l);break}case ee.right:{e.preventDefault();const a=C.value[Zt(t)+1],l=null==a?void 0:a.$el.querySelector(`.${d.b("node")}[tabindex="-1"]`);te(l);break}case ee.enter:case ee.numpadEnter:(e=>{if(!e)return;const t=e.querySelector("input");t?t.click():j(e)&&e.click()})(t)}};q(Lt,P({config:c,expandingNode:w,checkedNodes:S,isHoverMenu:V,initialLoaded:y,renderLabelFn:K,lazyLoad:I,expandNode:L,handleCheckChange:A})),H(c,(e,t)=>{z(e,t)||T()},{immediate:!0}),H(()=>o.options,T,{deep:!0}),H(()=>o.modelValue,()=>{s=!1,oe()},{deep:!0}),H(()=>N.value,e=>{z(e,o.modelValue)||(n(U,e),n(O,e))});return R(()=>C.value=[]),W(()=>!$(o.modelValue)&&oe()),l({menuList:C,menus:x,checkedNodes:S,handleKeyDown:ie,handleCheckChange:A,getFlattedNodes:M,getCheckedNodes:le,clearCheckedNodes:()=>{S.value.forEach(e=>e.doCheck(!1)),ne(),x.value=x.value.slice(0,1),w.value=void 0,n("expand-change",[])},calculateCheckedValue:ne,scrollToExpandingNode:de,loadLazyRootNodes:()=>{k.value||T()}}),(e,t)=>(u(),r("div",{class:g([h(d).b("panel"),h(d).is("bordered",e.border)]),onKeydown:ie},[(u(!0),r(b,null,E(x.value,(t,a)=>(u(),p(Ut,{key:a,ref_for:!0,ref:e=>C.value[a]=e,index:a,nodes:[...t]},{empty:f(()=>[D(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],34))}}),[["__file","index.vue"]])),Gt=A({...Pt,size:ue,placeholder:String,disabled:Boolean,clearable:Boolean,clearIcon:{type:re,default:ie},filterable:Boolean,filterMethod:{type:B(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:Boolean,maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:B(Function),default:()=>!0},placement:{type:B(String),values:de,default:"bottom-start"},fallbackPlacements:{type:B(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:se.popperClass,popperStyle:se.popperStyle,teleported:se.teleported,effect:{type:B(String),default:"light"},tagType:{...rt.type,default:"info"},tagEffect:{...rt.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},showCheckedStrategy:{type:String,values:["parent","child"],default:"child"},checkOnClickNode:Boolean,showPrefix:{type:Boolean,default:!0},...oe}),Qt=e=>!0,ea={[U]:Qt,[O]:Qt,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>ne(e),expandChange:e=>!!e,removeTag:e=>!!e},ta=t({name:"ElCascader"});const aa=le(d(t({...ta,props:Gt,emits:ea,setup(e,{expose:t,emit:l}){const o=e,s={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:t,placement:a}=e;["right","left","bottom","top"].includes(a)||t.arrow&&(t.arrow.x=35)},requires:["arrow"]}]},d=ce();let C=0,N=0;const w=a("cascader"),S=a("input"),{t:K}=x(),{formItem:$}=pe(),T=he(),{valueOnClear:I}=ve(o),{isComposing:L,handleComposition:z}=fe({afterComposition(e){var t;const a=null==(t=e.target)?void 0:t.value;mt(a)}}),A=_(),B=_(),M=_(),j=_(),F=_(),q=_(),P=_(!1),R=_(!1),Y=_(!1),Z=_(""),G=_(""),le=_([]),ne=_([]),oe=i(()=>o.props.multiple?o.collapseTags?le.value.slice(0,o.maxCollapseTags):le.value:[]),se=i(()=>o.props.multiple&&o.collapseTags?le.value.slice(o.maxCollapseTags):[]),de=i(()=>d.style),ie=i(()=>{var e;return null!=(e=o.placeholder)?e:K("el.cascader.placeholder")}),re=i(()=>G.value||le.value.length>0||L.value?"":ie.value),ue=me(),ze=i(()=>"small"===ue.value?"small":"default"),Ae=i(()=>!!o.props.multiple),Be=i(()=>!o.filterable||Ae.value),Oe=i(()=>Ae.value?G.value:Z.value),Ue=i(()=>{var e;return(null==(e=F.value)?void 0:e.checkedNodes)||[]}),{wrapperRef:Me,isFocused:je,handleBlur:Fe}=ye(M,{disabled:T,beforeBlur(e){var t,a;return(null==(t=A.value)?void 0:t.isFocusInsideContent(e))||(null==(a=B.value)?void 0:a.isFocusInsideContent(e))},afterBlur(){var e;o.validateEvent&&(null==(e=null==$?void 0:$.validate)||e.call($,"blur").catch(e=>ge(e)))}}),qe=i(()=>!(!o.clearable||T.value||Y.value||!R.value&&!je.value)&&!!Ue.value.length),Pe=i(()=>{const{showAllLevels:e,separator:t}=o,a=Ue.value;return a.length?Ae.value?"":a[0].calcText(e,t):""}),He=i(()=>(null==$?void 0:$.validateState)||""),Re=i({get:()=>Tt(o.modelValue),set(e){const t=null!=e?e:I.value;l(U,t),l(O,t),o.validateEvent&&(null==$||$.validate("change").catch(e=>ge(e)))}}),We=i(()=>[w.b(),w.m(ue.value),w.is("disabled",T.value),d.class]),Ye=i(()=>[S.e("icon"),"icon-arrow-down",w.is("reverse",P.value)]),Ze=i(()=>w.is("focus",je.value)),Je=i(()=>{var e,t;return null==(t=null==(e=A.value)?void 0:e.popperRef)?void 0:t.contentRef}),Xe=e=>{if(je.value){const t=new FocusEvent("blur",e);Fe(t)}Ge(!1)},Ge=e=>{var t,a,n;T.value||(e=null!=e?e:!P.value)!==P.value&&(P.value=e,null==(a=null==(t=M.value)?void 0:t.input)||a.setAttribute("aria-expanded",`${e}`),e?(Qe(),J(null==(n=F.value)?void 0:n.scrollToExpandingNode)):o.filterable&&rt(),l("visibleChange",e))},Qe=()=>{J(()=>{var e;null==(e=A.value)||e.updatePopper()})},et=()=>{Y.value=!1},tt=e=>{var t;const a=e.node;a.doCheck(!1),null==(t=F.value)||t.calculateCheckedValue(),l("removeTag",a.valueByOption)},at=()=>{var e,t;const{filterMethod:a,showAllLevels:l,separator:n}=o,s=null==(t=null==(e=F.value)?void 0:e.getFlattedNodes(!o.props.checkStrictly))?void 0:t.filter(e=>!e.isDisabled&&(e.calcText(l,n),a(e,Oe.value)));Ae.value&&le.value.forEach(e=>{e.hitState=!1}),Y.value=!0,ne.value=s,Qe()},lt=()=>{var e;let t;t=Y.value&&q.value?q.value.$el.querySelector(`.${w.e("suggestion-item")}`):null==(e=F.value)?void 0:e.$el.querySelector(`.${w.b("node")}[tabindex="-1"]`),t&&(t.focus(),!Y.value&&t.click())},nt=()=>{var e,t;const a=null==(e=M.value)?void 0:e.input,l=j.value,n=null==(t=q.value)?void 0:t.$el;if(X&&a){if(n){n.querySelector(`.${w.e("suggestion-list")}`).style.minWidth=`${a.offsetWidth}px`}if(l){const{offsetHeight:e}=l,t=le.value.length>0?Math.max(e,C)-2+"px":`${C}px`;a.style.height=t,Qe()}}},ot=e=>{var t;return null==(t=F.value)?void 0:t.getCheckedNodes(e)},st=e=>{Qe(),l("expandChange",e)},dt=e=>{if(L.value)return;switch(Q(e)){case ee.enter:case ee.numpadEnter:Ge();break;case ee.down:Ge(!0),J(lt),e.preventDefault();break;case ee.esc:!0===P.value&&(e.preventDefault(),e.stopPropagation(),Ge(!1));break;case ee.tab:Ge(!1)}},it=()=>{var e;null==(e=F.value)||e.clearCheckedNodes(),!P.value&&o.filterable&&rt(),Ge(!1),l("clear")},rt=()=>{const{value:e}=Pe;Z.value=e,G.value=e},ct=e=>{const t=e.target,a=Q(e);switch(a){case ee.up:case ee.down:{e.preventDefault();const l=a===ee.up?-1:1;te(ae(t,l,`.${w.e("suggestion-item")}[tabindex="-1"]`));break}case ee.enter:case ee.numpadEnter:t.click()}},pt=()=>{const e=le.value[le.value.length-1];N=G.value?0:N+1,!e||!N||o.collapseTags&&le.value.length>1||(e.hitState?tt(e):e.hitState=!0)},ht=i(()=>o.debounce),vt=Te(()=>{const{value:e}=Oe;if(!e)return;const t=o.beforeFilter(e);Le(t)?t.then(at).catch(()=>{}):!1!==t?at():et()},ht),mt=(e,t)=>{!P.value&&Ge(!0),(null==t?void 0:t.isComposing)||(e?vt():et())},yt=e=>Number.parseFloat(Ie(S.cssVarName("input-height"),e).value)-2;return H(Y,Qe),H([Ue,T,()=>o.collapseTags,()=>o.maxCollapseTags],()=>{if(!Ae.value)return;const e=(()=>{switch(o.showCheckedStrategy){case"child":return Ue.value;case"parent":{const e=ot(!1),t=e.map(e=>e.value);return e.filter(e=>!e.parent||!t.includes(e.parent.value))}default:return[]}})(),t=[];e.forEach(e=>t.push((e=>{const{showAllLevels:t,separator:a}=o;return{node:e,key:e.uid,text:e.calcText(t,a),hitState:!1,closable:!T.value&&!e.isDisabled}})(e))),le.value=t}),H(le,()=>{J(()=>nt())}),H(ue,async()=>{await J();const e=M.value.input;C=yt(e)||C,nt()}),H(Pe,rt,{immediate:!0}),H(()=>P.value,e=>{var t;e&&o.props.lazy&&o.props.lazyLoad&&(null==(t=F.value)||t.loadLazyRootNodes())}),W(()=>{const e=M.value.input,t=yt(e);C=e.offsetHeight||t,ke(e,nt)}),t({getCheckedNodes:ot,cascaderPanelRef:F,togglePopperVisible:Ge,contentRef:Je,presentText:Pe}),(e,t)=>(u(),p(h(Ve),{ref_key:"tooltipRef",ref:A,visible:P.value,teleported:e.teleported,"popper-class":[h(w).e("dropdown"),e.popperClass],"popper-style":e.popperStyle,"popper-options":s,"fallback-placements":e.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:e.placement,transition:`${h(w).namespace.value}-zoom-in-top`,effect:e.effect,pure:"",persistent:e.persistent,onHide:et},{default:f(()=>[be((u(),r("div",{ref_key:"wrapperRef",ref:Me,class:g(h(We)),style:xe(h(de)),onClick:()=>Ge(!h(Be)||void 0),onKeydown:dt,onMouseenter:e=>R.value=!0,onMouseleave:e=>R.value=!1},[n(h(we),{ref_key:"inputRef",ref:M,modelValue:Z.value,"onUpdate:modelValue":e=>Z.value=e,placeholder:h(re),readonly:h(Be),disabled:h(T),"validate-event":!1,size:h(ue),class:g(h(Ze)),tabindex:h(Ae)&&e.filterable&&!h(T)?-1:void 0,onCompositionstart:h(z),onCompositionupdate:h(z),onCompositionend:h(z),onInput:mt},_e({suffix:f(()=>[h(qe)?(u(),p(h(k),{key:"clear",class:g([h(S).e("icon"),"icon-circle-close"]),onClick:v(it,["stop"])},{default:f(()=>[(u(),p(Ee(e.clearIcon)))]),_:1},8,["class","onClick"])):(u(),p(h(k),{key:"arrow-down",class:g(h(Ye)),onClick:v(e=>Ge(),["stop"])},{default:f(()=>[n(h(Se))]),_:1},8,["class","onClick"]))]),_:2},[e.$slots.prefix?{name:"prefix",fn:f(()=>[D(e.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),h(Ae)?(u(),r("div",{key:0,ref_key:"tagWrapper",ref:j,class:g([h(w).e("tags"),h(w).is("validate",Boolean(h(He)))])},[D(e.$slots,"tag",{data:le.value,deleteTag:tt},()=>[(u(!0),r(b,null,E(h(oe),t=>(u(),p(h(ut),{key:t.key,type:e.tagType,size:h(ze),effect:e.tagEffect,hit:t.hitState,closable:t.closable,"disable-transitions":"",onClose:e=>tt(t)},{default:f(()=>[m("span",null,V(t.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128))]),e.collapseTags&&le.value.length>e.maxCollapseTags?(u(),p(h(Ve),{key:0,ref_key:"tagTooltipRef",ref:B,disabled:P.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom","popper-class":e.popperClass,"popper-style":e.popperStyle,effect:e.effect,persistent:e.persistent},{default:f(()=>[n(h(ut),{closable:!1,size:h(ze),type:e.tagType,effect:e.tagEffect,"disable-transitions":""},{default:f(()=>[m("span",{class:g(h(w).e("tags-text"))}," + "+V(le.value.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect"])]),content:f(()=>[n(h(ft),{"max-height":e.maxCollapseTagsTooltipHeight},{default:f(()=>[m("div",{class:g(h(w).e("collapse-tags"))},[(u(!0),r(b,null,E(h(se),(t,a)=>(u(),r("div",{key:a,class:g(h(w).e("collapse-tag"))},[(u(),p(h(ut),{key:t.key,class:"in-tooltip",type:e.tagType,size:h(ze),effect:e.tagEffect,hit:t.hitState,closable:t.closable,"disable-transitions":"",onClose:e=>tt(t)},{default:f(()=>[m("span",null,V(t.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:1},8,["disabled","popper-class","popper-style","effect","persistent"])):c("v-if",!0),e.filterable&&!h(T)?be((u(),r("input",{key:1,"onUpdate:modelValue":e=>G.value=e,type:"text",class:g(h(w).e("search-input")),placeholder:h(Pe)?"":h(ie),onInput:e=>mt(G.value,e),onClick:v(e=>Ge(!0),["stop"]),onKeydown:De(pt,["delete"]),onCompositionstart:h(z),onCompositionupdate:h(z),onCompositionend:h(z)},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[Ke,G.value]]):c("v-if",!0)],2)):c("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[h($e),Xe,h(Je)]])]),content:f(()=>[e.$slots.header?(u(),r("div",{key:0,class:g(h(w).e("header")),onClick:v(()=>{},["stop"])},[D(e.$slots,"header")],10,["onClick"])):c("v-if",!0),be(n(h(Xt),{ref_key:"cascaderPanelRef",ref:F,modelValue:h(Re),"onUpdate:modelValue":e=>Ce(Re)?Re.value=e:null,options:e.options,props:o.props,border:!1,"render-label":e.$slots.default,onExpandChange:st,onClose:t=>e.$nextTick(()=>Ge(!1))},{empty:f(()=>[D(e.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Ne,!Y.value]]),e.filterable?be((u(),p(h(ft),{key:1,ref_key:"suggestionPanel",ref:q,tag:"ul",class:g(h(w).e("suggestion-panel")),"view-class":h(w).e("suggestion-list"),onKeydown:ct},{default:f(()=>[ne.value.length?(u(!0),r(b,{key:0},E(ne.value,t=>(u(),r("li",{key:t.uid,class:g([h(w).e("suggestion-item"),h(w).is("checked",t.checked)]),tabindex:-1,onClick:e=>(e=>{var t,a;const{checked:l}=e;Ae.value?null==(t=F.value)||t.handleCheckChange(e,!l,!1):(!l&&(null==(a=F.value)||a.handleCheckChange(e,!0,!1)),Ge(!1))})(t)},[D(e.$slots,"suggestion-item",{item:t},()=>[m("span",null,V(t.text),1),t.checked?(u(),p(h(k),{key:0},{default:f(()=>[n(h(y))]),_:1})):c("v-if",!0)])],10,["onClick"]))),128)):D(e.$slots,"empty",{key:1},()=>[m("li",{class:g(h(w).e("empty-text"))},V(h(K)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ne,Y.value]]):c("v-if",!0),e.$slots.footer?(u(),r("div",{key:2,class:g(h(w).e("footer")),onClick:v(()=>{},["stop"])},[D(e.$slots,"footer")],10,["onClick"])):c("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-style","fallback-placements","placement","transition","effect","persistent"]))}}),[["__file","cascader.vue"]])),la="$treeNodeId",na=function(e,t){t&&!t[la]&&Object.defineProperty(t,la,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},oa=(e,t)=>null==t?void 0:t[e||la],sa=(e,t,a)=>{const l=e.value.currentNode;a();const n=e.value.currentNode;l!==n&&t("current-change",n?n.data:null,n)},da=e=>{let t=!0,a=!0,l=!0;for(let n=0,o=e.length;n<o;n++){const o=e[n];(!0!==o.checked||o.indeterminate)&&(t=!1,o.disabled||(l=!1)),(!1!==o.checked||o.indeterminate)&&(a=!1)}return{all:t,none:a,allWithoutDisable:l,half:!t&&!a}},ia=function(e){if(0===e.childNodes.length||e.loading)return;const{all:t,none:a,half:l}=da(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):l?(e.checked=!1,e.indeterminate=!0):a&&(e.checked=!1,e.indeterminate=!1);const n=e.parent;n&&0!==n.level&&(e.store.checkStrictly||ia(n))},ra=function(e,t){const a=e.store.props,l=e.data||{},n=a[t];if(T(n))return n(l,e);if(Be(n))return l[n];if(I(n)){const e=l[t];return I(e)?"":e}},ua=function(e,t){e.forEach(e=>{e.canFocus=t,ua(e.childNodes,t)})};let ca=0;class pa{constructor(e){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=ca++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)ze(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var e;const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const a=t.props;if(a&&void 0!==a.isLeaf){const e=ra(this,"isLeaf");ne(e)&&(this.isLeafByUser=e)}if(!0!==t.lazy&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&!this.isLeafByUser&&this.expand(),o(this.data)||na(this,this.data),!this.data)return;const l=t.defaultExpandedKeys,n=t.key;n&&!Ae(this.key)&&l&&l.includes(this.key)&&this.expand(null,t.autoExpandParent),n&&void 0!==t.currentNodeKey&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),1!==this.level&&!0!==(null==(e=this.parent)?void 0:e.expanded)||(this.canFocus=!0)}setData(e){let t;o(e)||na(this,e),this.data=e,this.childNodes=[],t=0===this.level&&o(this.data)?this.data:ra(this,"children")||[];for(let a=0,l=t.length;a<l;a++)this.insertChild({data:t[a]})}get label(){return ra(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return ra(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(a=>a===e||t&&a.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,a){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof pa)){if(!a){const a=this.getChildren(!0);(null==a?void 0:a.includes(e.data))||(I(t)||t<0?null==a||a.push(e.data):null==a||a.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),(e=P(new pa(e)))instanceof pa&&e.initialize()}e.level=this.level+1,I(t)||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let a;t&&(a=this.childNodes.indexOf(t)),this.insertChild(e,a)}insertAfter(e,t){let a;t&&(a=this.childNodes.indexOf(t),-1!==a&&(a+=1)),this.insertChild(e,a)}removeChild(e){const t=this.getChildren()||[],a=t.indexOf(e.data);a>-1&&t.splice(a,1);const l=this.childNodes.indexOf(e);l>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(l,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let a=0;a<this.childNodes.length;a++)if(this.childNodes[a].data===e){t=this.childNodes[a];break}t&&this.removeChild(t)}expand(e,t){const a=()=>{if(t){let e=this.parent;for(;e&&e.level>0;)e.expanded=!0,e=e.parent}this.expanded=!0,e&&e(),ua(this.childNodes,!0)};this.shouldLoadData()?this.loadData(e=>{o(e)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||ia(this),a())}):a()}doCreateChildren(e,t={}){e.forEach(e=>{this.insertChild(Object.assign({data:e},t),void 0,!0)})}collapse(){this.expanded=!1,ua(this.childNodes,!1)}shouldLoadData(){return Boolean(!0===this.store.lazy&&this.store.load&&!this.loaded)}updateLeafState(){if(!0===this.store.lazy&&!0!==this.loaded&&void 0!==this.isLeafByUser)return void(this.isLeaf=this.isLeafByUser);const e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}setChecked(e,t,a,l){if(this.indeterminate="half"===e,this.checked=!0===e,this.store.checkStrictly)return;if(!this.shouldLoadData()||this.store.checkDescendants){const{all:a,allWithoutDisable:n}=da(this.childNodes);this.isLeaf||a||!n||(this.checked=!1,e=!1);const o=()=>{if(t){const a=this.childNodes;for(let s=0,d=a.length;s<d;s++){const n=a[s];l=l||!1!==e;const o=n.disabled?n.checked:l;n.setChecked(o,t,!0,l)}const{half:n,all:o}=da(a);o||(this.checked=o,this.indeterminate=n)}};if(this.shouldLoadData())return void this.loadData(()=>{o(),ia(this)},{checked:!1!==e});o()}const n=this.parent;n&&0!==n.level&&(a||ia(n))}getChildren(e=!1){if(0===this.level)return this.data;const t=this.data;if(!t)return null;const a=this.store.props;let l="children";return a&&(l=a.children||"children"),I(t[l])&&(t[l]=null),e&&!t[l]&&(t[l]=[]),t[l]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map(e=>e.data),a={},l=[];e.forEach((e,n)=>{const o=e[la];!!o&&t.some(e=>(null==e?void 0:e[la])===o)?a[o]={index:n,data:e}:l.push({index:n,data:e})}),this.store.lazy||t.forEach(e=>{a[null==e?void 0:e[la]]||this.removeChildByData(e)}),l.forEach(({index:e,data:t})=>{this.insertChild({data:t},e)}),this.updateLeafState()}loadData(e,t={}){if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(t).length)e&&e.call(this);else{this.loading=!0;const a=a=>{this.childNodes=[],this.doCreateChildren(a,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,a)},l=()=>{this.loading=!1};this.store.load(this,a,l)}}eachNode(e){const t=[this];for(;t.length;){const a=t.shift();t.unshift(...a.childNodes),e(a)}}reInitChecked(){this.store.checkStrictly||ia(this)}}class ha{constructor(e){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const t in e)ze(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new pa({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){(0,this.load)(this.root,e=>{this.root.doCreateChildren(e),this._initDefaultCheckedNodes()},M)}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,a=this.lazy,l=async function(n){const o=n.root?n.root.childNodes:n.childNodes;for(const[a,s]of o.entries())s.visible=!!(null==t?void 0:t.call(s,e,s.data,s)),a%80==0&&a>0&&await J(),await l(s);if(!n.visible&&o.length){let e=!0;e=!o.some(e=>e.visible),n.root?n.root.visible=!1===e:n.visible=!1===e}e&&n.visible&&!n.isLeaf&&(a&&!n.loaded||n.expand())};l(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof pa)return e;const t=Oe(e)?oa(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){var a;const l=this.getNode(t);null==(a=l.parent)||a.insertBefore({data:e},l)}insertAfter(e,t){var a;const l=this.getNode(t);null==(a=l.parent)||a.insertAfter({data:e},l)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const a=L(t)?this.root:this.getNode(t);a&&a.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(e=>{const a=t[e];a&&a.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){const t=this.defaultCheckedKeys||[];!Ae(e.key)&&t.includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;if(e&&e.data)if(t){const t=e.key;Ae(t)||(this.nodesMap[t]=e)}else this.nodesMap[e.id]=e}deregisterNode(e){this.key&&e&&e.data&&(e.childNodes.forEach(e=>{this.deregisterNode(e)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const a=[],l=function(n){(n.root?n.root.childNodes:n.childNodes).forEach(n=>{(n.checked||t&&n.indeterminate)&&(!e||e&&n.isLeaf)&&a.push(n.data),l(n)})};return l(this),a}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(e=>(e||{})[this.key])}getHalfCheckedNodes(){const e=[],t=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(a=>{a.indeterminate&&e.push(a.data),t(a)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],t=this.nodesMap;for(const a in t)ze(t,a)&&e.push(t[a]);return e}updateChildren(e,t){const a=this.nodesMap[e];if(!a)return;const l=a.childNodes;for(let n=l.length-1;n>=0;n--){const e=l[n];this.remove(e.data)}for(let n=0,o=t.length;n<o;n++){const e=t[n];this.append(e,a.data)}}_setCheckedKeys(e,t=!1,a){const l=this._getAllNodes().sort((e,t)=>e.level-t.level),n=Object.create(null),o=Object.keys(a);l.forEach(e=>e.setChecked(!1,!1));const s=t=>{t.childNodes.forEach(t=>{var a;n[t.data[e]]=!0,(null==(a=t.childNodes)?void 0:a.length)&&s(t)})};for(let d=0,i=l.length;d<i;d++){const a=l[d],i=a.data[e].toString();if(o.includes(i)){if(a.childNodes.length&&s(a),a.isLeaf||this.checkStrictly)a.setChecked(!0,!1);else if(a.setChecked(!0,!0),t){a.setChecked(!1,!1);const e=function(t){t.childNodes.forEach(t=>{t.isLeaf||t.setChecked(!1,!1),e(t)})};e(a)}}else a.checked&&!n[i]&&a.setChecked(!1,!1)}}setCheckedNodes(e,t=!1){const a=this.key,l={};e.forEach(e=>{l[(e||{})[a]]=!0}),this._setCheckedKeys(a,t,l)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const a=this.key,l={};e.forEach(e=>{l[e]=!0}),this._setCheckedKeys(a,t,l)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(e=>{const t=this.getNode(e);t&&t.expand(null,this.autoExpandParent)})}setChecked(e,t,a){const l=this.getNode(e);l&&l.setChecked(!!t,a)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){var a;const l=e[this.key],n=this.nodesMap[l];this.setCurrentNode(n),t&&this.currentNode&&this.currentNode.level>1&&(null==(a=this.currentNode.parent)||a.expand(null,!0))}setCurrentNodeKey(e,t=!0){var a;if(this.currentNodeKey=e,L(e))return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);const l=this.getNode(e);l&&(this.setCurrentNode(l),t&&this.currentNode&&this.currentNode.level>1&&(null==(a=this.currentNode.parent)||a.expand(null,!0)))}}const va="RootTree",fa="NodeInstance",ma="TreeNodeMap";var ya=d(t({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=a("tree"),n=l(fa),o=l(va);return()=>{const a=e.node,{data:l,store:s}=a;return e.renderContent?e.renderContent(Ue,{_self:n,node:a,data:l,store:s}):D(o.ctx.slots,"default",{node:a,data:l},()=>[Ue(kt,{tag:"span",truncated:!0,class:t.be("node","label")},()=>[a.label])])}}}),[["__file","tree-node-content.vue"]]);function ga(e){const t=l(ma,null),a={treeNodeExpand:t=>{var a;e.node!==t&&(null==(a=e.node)||a.collapse())},children:[]};return t&&t.children.push(a),q(ma,a),{broadcastExpanded:t=>{if(e.accordion)for(const e of a.children)e.treeNodeExpand(t)}}}const ka=Symbol("dragEvents");const ba=t({name:"ElTreeNode",components:{ElCollapseTransition:qe,ElCheckbox:mt,NodeContent:ya,ElIcon:k,Loading:C},props:{node:{type:pa,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(e,t){const n=a("tree"),{broadcastExpanded:o}=ga(e),s=l(va),d=_(!1),i=_(!1),r=_(),u=_(),c=_(),p=l(ka),h=K();q(fa,h),s||ge("Tree","Can not find node's tree."),e.node.expanded&&(d.value=!0,i.value=!0);const v=s.props.props.children||"children";H(()=>{var t;const a=null==(t=e.node.data)?void 0:t[v];return a&&[...a]},()=>{e.node.updateChildren()}),H(()=>e.node.indeterminate,t=>{m(e.node.checked,t)}),H(()=>e.node.checked,t=>{m(t,e.node.indeterminate)}),H(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),H(()=>e.node.expanded,e=>{J(()=>d.value=e),e&&(i.value=!0)});const f=e=>oa(s.props.nodeKey,e.data),m=(t,a)=>{r.value===t&&u.value===a||s.ctx.emit("check-change",e.node.data,t,a),r.value=t,u.value=a},y=()=>{e.node.isLeaf||(d.value?(s.ctx.emit("node-collapse",e.node.data,e.node,h),e.node.collapse()):e.node.expand(()=>{t.emit("node-expand",e.node.data,e.node,h)}))},g=t=>{e.node.setChecked(t,!(null==s?void 0:s.props.checkStrictly)),J(()=>{const t=s.store.value;s.ctx.emit("check",e.node.data,{checkedNodes:t.getCheckedNodes(),checkedKeys:t.getCheckedKeys(),halfCheckedNodes:t.getHalfCheckedNodes(),halfCheckedKeys:t.getHalfCheckedKeys()})})};return{ns:n,node$:c,tree:s,expanded:d,childNodeRendered:i,oldChecked:r,oldIndeterminate:u,getNodeKey:f,getNodeClass:t=>{const a=e.props.class;if(!a)return{};let l;if(T(a)){const{data:e}=t;l=a(e,t)}else l=a;return Be(l)?{[l]:!0}:l},handleSelectChange:m,handleClick:t=>{sa(s.store,s.ctx.emit,()=>{var t;if(null==(t=null==s?void 0:s.props)?void 0:t.nodeKey){const t=f(e.node);s.store.value.setCurrentNodeKey(t)}else s.store.value.setCurrentNode(e.node)}),s.currentNode.value=e.node,s.props.expandOnClickNode&&y(),(s.props.checkOnClickNode||e.node.isLeaf&&s.props.checkOnClickLeaf&&e.showCheckbox)&&!e.node.disabled&&g(!e.node.checked),s.ctx.emit("node-click",e.node.data,e.node,h,t)},handleContextMenu:t=>{var a;(null==(a=s.instance.vnode.props)?void 0:a.onNodeContextmenu)&&(t.stopPropagation(),t.preventDefault()),s.ctx.emit("node-contextmenu",t,e.node.data,e.node,h)},handleExpandIconClick:y,handleCheckChange:g,handleChildNodeExpand:(e,t,a)=>{o(t),s.ctx.emit("node-expand",e,t,a)},handleDragStart:t=>{s.props.draggable&&p.treeNodeDragStart({event:t,treeNode:e})},handleDragOver:t=>{t.preventDefault(),s.props.draggable&&p.treeNodeDragOver({event:t,treeNode:{$el:c.value,node:e.node}})},handleDrop:e=>{e.preventDefault()},handleDragEnd:e=>{s.props.draggable&&p.treeNodeDragEnd(e)},CaretRight:Pe}}});const Ca={"check-change":(e,t,a)=>e&&ne(t)&&ne(a),"current-change":(e,t)=>!0,"node-click":(e,t,a,l)=>e&&t&&l instanceof Event,"node-contextmenu":(e,t,a,l)=>e instanceof Event&&t&&a,"node-collapse":(e,t,a)=>e&&t,"node-expand":(e,t,a)=>e&&t,check:(e,t)=>e&&t,"node-drag-start":(e,t)=>e&&t,"node-drag-end":(e,t,a,l)=>e&&l,"node-drop":(e,t,a,l)=>e&&t&&l,"node-drag-leave":(e,t,a)=>e&&t&&a,"node-drag-enter":(e,t,a)=>e&&t&&a,"node-drag-over":(e,t,a)=>e&&t&&a};const Na=le(d(t({name:"ElTree",components:{ElTreeNode:d(ba,[["render",function(e,t,a,l,o,s){const d=Fe("el-icon"),i=Fe("el-checkbox"),h=Fe("loading"),y=Fe("node-content"),k=Fe("el-tree-node"),C=Fe("el-collapse-transition");return be((u(),r("div",{ref:"node$",class:g([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:v(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:v(e.handleDragStart,["stop"]),onDragover:v(e.handleDragOver,["stop"]),onDragend:v(e.handleDragEnd,["stop"]),onDrop:v(e.handleDrop,["stop"])},[m("div",{class:g(e.ns.be("node","content")),style:xe({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(u(),p(d,{key:0,class:g([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:v(e.handleExpandIconClick,["stop"])},{default:f(()=>[(u(),p(Ee(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):c("v-if",!0),e.showCheckbox?(u(),p(i,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:v(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):c("v-if",!0),e.node.loading?(u(),p(d,{key:2,class:g([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:f(()=>[n(h)]),_:1},8,["class"])):c("v-if",!0),n(y,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),n(C,null,{default:f(()=>[!e.renderAfterExpand||e.childNodeRendered?be((u(),r("div",{key:0,class:g(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded,onClick:v(()=>{},["stop"])},[(u(!0),r(b,null,E(e.node.childNodes,t=>(u(),p(k,{key:e.getNodeKey(t),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:t,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[Ne,e.expanded]]):c("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Ne,e.node.visible]])}],["__file","tree-node.vue"]])},props:{data:{type:B(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:B(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:B(Function)},allowDrop:{type:B(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:re}},emits:Ca,setup(e,t){const{t:l}=x(),n=a("tree"),o=_(new ha({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));o.value.initialize();const s=_(o.value.root),d=_(null),r=_(null),u=_(null),{broadcastExpanded:c}=ga(e),{dragState:p}=function({props:e,ctx:t,el$:l,dropIndicator$:n,store:o}){const s=a("tree"),d=_({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return q(ka,{treeNodeDragStart:({event:a,treeNode:l})=>{if(a.dataTransfer){if(T(e.allowDrag)&&!e.allowDrag(l.node))return a.preventDefault(),!1;a.dataTransfer.effectAllowed="move";try{a.dataTransfer.setData("text/plain","")}catch(n){}d.value.draggingNode=l,t.emit("node-drag-start",l.node,a)}},treeNodeDragOver:({event:a,treeNode:o})=>{if(!a.dataTransfer)return;const i=o,r=d.value.dropNode;r&&r.node.id!==i.node.id&&Me(r.$el,s.is("drop-inner"));const u=d.value.draggingNode;if(!u||!i)return;let c=!0,p=!0,h=!0,v=!0;T(e.allowDrop)&&(c=e.allowDrop(u.node,i.node,"prev"),v=p=e.allowDrop(u.node,i.node,"inner"),h=e.allowDrop(u.node,i.node,"next")),a.dataTransfer.dropEffect=p||c||h?"move":"none",(c||p||h)&&(null==r?void 0:r.node.id)!==i.node.id&&(r&&t.emit("node-drag-leave",u.node,r.node,a),t.emit("node-drag-enter",u.node,i.node,a)),d.value.dropNode=c||p||h?i:null,i.node.nextSibling===u.node&&(h=!1),i.node.previousSibling===u.node&&(c=!1),i.node.contains(u.node,!1)&&(p=!1),(u.node===i.node||u.node.contains(i.node))&&(c=!1,p=!1,h=!1);const f=i.$el,m=f.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),y=l.value.getBoundingClientRect(),g=l.value.scrollTop;let k;const b=c?p?.25:h?.45:1:Number.NEGATIVE_INFINITY,C=h?p?.75:c?.55:0:Number.POSITIVE_INFINITY;let N=-9999;const x=a.clientY-m.top;k=x<m.height*b?"before":x>m.height*C?"after":p?"inner":"none";const w=f.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),_=n.value;"before"===k?N=w.top-y.top+g:"after"===k&&(N=w.bottom-y.top+g),_.style.top=`${N}px`,_.style.left=w.right-y.left+"px","inner"===k?je(f,s.is("drop-inner")):Me(f,s.is("drop-inner")),d.value.showDropIndicator="before"===k||"after"===k,d.value.allowDrop=d.value.showDropIndicator||v,d.value.dropType=k,t.emit("node-drag-over",u.node,i.node,a)},treeNodeDragEnd:e=>{var a,l;const{draggingNode:n,dropType:i,dropNode:r}=d.value;if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),(null==n?void 0:n.node.data)&&r){const d={data:n.node.data};"none"!==i&&n.node.remove(),"before"===i?null==(a=r.node.parent)||a.insertBefore(d,r.node):"after"===i?null==(l=r.node.parent)||l.insertAfter(d,r.node):"inner"===i&&r.node.insertChild(d),"none"!==i&&(o.value.registerNode(d),o.value.key&&n.node.eachNode(e=>{var t;null==(t=o.value.nodesMap[e.data[o.value.key]])||t.setChecked(e.checked,!o.value.checkStrictly)})),Me(r.$el,s.is("drop-inner")),t.emit("node-drag-end",n.node,r.node,i,e),"none"!==i&&t.emit("node-drop",n.node,r.node,i,e)}n&&!r&&t.emit("node-drag-end",n.node,null,i,e),d.value.showDropIndicator=!1,d.value.draggingNode=null,d.value.dropNode=null,d.value.allowDrop=!0}}),{dragState:d}}({props:e,ctx:t,el$:r,dropIndicator$:u,store:o});!function({el$:e},t){const l=a("tree");function n(e,a){var l,n;const o=t.value.getNode(e[a].dataset.key);return o.canFocus&&o.visible&&((null==(l=o.parent)?void 0:l.expanded)||0===(null==(n=o.parent)?void 0:n.level))}W(()=>{o()}),He(()=>{Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(e=>{e.setAttribute("tabindex","-1")})}),Re(e,"keydown",t=>{const a=t.target;if(!a.className.includes(l.b("node")))return;const o=Q(t),s=Array.from(e.value.querySelectorAll(`.${l.is("focusable")}[role=treeitem]`)),d=s.indexOf(a);let i;if([ee.up,ee.down].includes(o)){if(t.preventDefault(),o===ee.up){i=-1===d?0:0!==d?d-1:s.length-1;const e=i;for(;!n(s,i);){if(i--,i===e){i=-1;break}i<0&&(i=s.length-1)}}else{i=-1===d?0:d<s.length-1?d+1:0;const e=i;for(;!n(s,i);){if(i++,i===e){i=-1;break}i>=s.length&&(i=0)}}-1!==i&&s[i].focus()}[ee.left,ee.right].includes(o)&&(t.preventDefault(),a.click());const r=a.querySelector('[type="checkbox"]');[ee.enter,ee.numpadEnter,ee.space].includes(o)&&r&&(t.preventDefault(),r.click())});const o=()=>{var t;if(!e.value)return;const a=Array.from(e.value.querySelectorAll(`.${l.is("focusable")}[role=treeitem]`));Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(e=>{e.setAttribute("tabindex","-1")});const n=e.value.querySelectorAll(`.${l.is("checked")}[role=treeitem]`);n.length?n[0].setAttribute("tabindex","0"):null==(t=a[0])||t.setAttribute("tabindex","0")}}({el$:r},o);const h=K(),v=i(()=>{let e=null==h?void 0:h.parent;for(;e;){if("ElTreeSelect"===e.type.name)return!0;e=e.parent}return!1}),f=i(()=>{const{childNodes:e}=s.value;return(!e||0===e.length||e.every(({visible:e})=>!e))&&!v.value});H(()=>e.currentNodeKey,e=>{o.value.setCurrentNodeKey(null!=e?e:null)}),H(()=>e.defaultCheckedKeys,(e,t)=>{z(e,t)||o.value.setDefaultCheckedKey(null!=e?e:[])}),H(()=>e.defaultExpandedKeys,e=>{o.value.setDefaultExpandedKeys(null!=e?e:[])}),H(()=>e.data,e=>{o.value.setData(e)},{deep:!0}),H(()=>e.checkStrictly,e=>{o.value.checkStrictly=e});const m=()=>{const e=o.value.getCurrentNode();return e?e.data:null};return q(va,{ctx:t,props:e,store:o,root:s,currentNode:d,instance:h}),q(We,void 0),{ns:n,store:o,root:s,currentNode:d,dragState:p,el$:r,dropIndicator$:u,isEmpty:f,filter:t=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");o.value.filter(t)},getNodeKey:t=>oa(e.nodeKey,t.data),getNodePath:t=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const a=o.value.getNode(t);if(!a)return[];const l=[a.data];let n=a.parent;for(;n&&n!==s.value;)l.push(n.data),n=n.parent;return l.reverse()},getCheckedNodes:(e,t)=>o.value.getCheckedNodes(e,t),getCheckedKeys:e=>o.value.getCheckedKeys(e),getCurrentNode:m,getCurrentKey:()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const t=m();return t?t[e.nodeKey]:null},setCheckedNodes:(t,a)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");o.value.setCheckedNodes(t,a)},setCheckedKeys:(t,a)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");o.value.setCheckedKeys(t,a)},setChecked:(e,t,a)=>{o.value.setChecked(e,t,a)},getHalfCheckedNodes:()=>o.value.getHalfCheckedNodes(),getHalfCheckedKeys:()=>o.value.getHalfCheckedKeys(),setCurrentNode:(a,l=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");sa(o,t.emit,()=>{c(a),o.value.setUserCurrentNode(a,l)})},setCurrentKey:(a=null,l=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");sa(o,t.emit,()=>{c(),o.value.setCurrentNodeKey(a,l)})},t:l,getNode:e=>o.value.getNode(e),remove:e=>{o.value.remove(e)},append:(e,t)=>{o.value.append(e,t)},insertBefore:(e,t)=>{o.value.insertBefore(e,t)},insertAfter:(e,t)=>{o.value.insertAfter(e,t)},handleNodeExpand:(e,a,l)=>{c(a),t.emit("node-expand",e,a,l)},updateKeyChildren:(t,a)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");o.value.updateChildren(t,a)}}}}),[["render",function(e,t,a,l,n,o){const s=Fe("el-tree-node");return u(),r("div",{ref:"el$",class:g([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner","inner"===e.dragState.dropType),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(u(!0),r(b,null,E(e.root.childNodes,t=>(u(),p(s,{key:e.getNodeKey(t),node:t,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(u(),r("div",{key:0,class:g(e.ns.e("empty-block"))},[D(e.$slots,"empty",{},()=>{var t;return[m("span",{class:g(e.ns.e("empty-text"))},V(null!=(t=e.emptyText)?t:e.t("el.tree.emptyText")),3)]})],2)):c("v-if",!0),be(m("div",{ref:"dropIndicator$",class:g(e.ns.e("drop-indicator"))},null,2),[[Ne,e.dragState.showDropIndicator]])],2)}],["__file","tree.vue"]])),xa=t({extends:pt,setup(e,t){const a=pt.setup(e,t);delete a.selectOptionClick;const l=K().proxy;return J(()=>{a.select.states.cachedOptions.get(l.value)||a.select.onOptionCreate(l)}),H(()=>t.attrs.visible,e=>{J(()=>{a.states.visible=e})},{immediate:!0}),a},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function wa(e){return e||0===e}function _a(e){return o(e)&&e.length}function Ea(e){return o(e)?e:wa(e)?[e]:[]}function Sa(e,t,a,l,n){for(let o=0;o<e.length;o++){const s=e[o];if(t(s,o,e,n))return l?l(s,o,e,n):s;{const e=a(s);if(_a(e)){const n=Sa(e,t,a,l,s);if(n)return n}}}}function Va(e,t,a,l){for(let n=0;n<e.length;n++){const o=e[n];t(o,n,e,l);const s=a(o);_a(s)&&Va(s,t,a,o)}}var Da=t({props:{data:{type:Array,default:()=>[]}},setup(e){const t=l(vt);return H(()=>e.data,()=>{var a;e.data.forEach(e=>{t.states.cachedOptions.has(e.value)||t.states.cachedOptions.set(e.value,e)});const l=(null==(a=t.selectRef)?void 0:a.querySelectorAll("input"))||[];X&&!Array.from(l).includes(document.activeElement)&&t.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Ka=le(d(t({name:"ElTreeSelect",inheritAttrs:!1,props:{...ct.props,...Na.props,cacheData:{type:Array,default:()=>[]}},setup(e,t){const{slots:l,expose:n}=t,o=_(),s=_(),d=i(()=>e.nodeKey||e.valueKey||"value"),r=((e,{attrs:t,emit:l},{select:n,tree:o,key:s})=>{const d=a("tree-select");return H(()=>e.data,()=>{e.filterable&&J(()=>{var e,t;null==(t=o.value)||t.filter(null==(e=n.value)?void 0:e.states.inputValue)})},{flush:"post"}),{...Ye(Ze(e),Object.keys(ct.props)),...t,class:i(()=>t.class),style:i(()=>t.style),"onUpdate:modelValue":e=>l(U,e),valueKey:s,popperClass:i(()=>{const t=[d.e("popper")];return e.popperClass&&t.push(e.popperClass),t.join(" ")}),filterMethod:(t="")=>{var a;e.filterMethod?e.filterMethod(t):e.remoteMethod?e.remoteMethod(t):null==(a=o.value)||a.filter(t)}}})(e,t,{select:o,tree:s,key:d}),{cacheOptions:u,...c}=((e,{attrs:t,slots:a,emit:l},{select:n,tree:o,key:s})=>{H([()=>e.modelValue,o],()=>{e.showCheckbox&&J(()=>{const t=o.value;t&&!z(t.getCheckedKeys(),Ea(e.modelValue))&&t.setCheckedKeys(Ea(e.modelValue))})},{immediate:!0,deep:!0});const d=i(()=>({value:s.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),r=(e,t)=>{var a;const l=d.value[e];return T(l)?l(t,null==(a=o.value)?void 0:a.getNode(r("value",t))):t[l]},u=Ea(e.modelValue).map(t=>Sa(e.data||[],e=>r("value",e)===t,e=>r("children",e),(e,t,a,l)=>l&&r("value",l))).filter(e=>wa(e)),c=i(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const t=[];return Va(e.data.concat(e.cacheData),e=>{const a=r("value",e);t.push({value:a,currentLabel:r("label",e),isDisabled:r("disabled",e)})},e=>r("children",e)),t}),p=()=>{var e;return null==(e=o.value)?void 0:e.getCheckedKeys().filter(e=>{var t;const a=null==(t=o.value)?void 0:t.getNode(e);return!Ae(a)&&$(a.childNodes)})};return{...Ye(Ze(e),Object.keys(Na.props)),...t,nodeKey:s,expandOnClickNode:i(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:i(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(u):u),renderContent:(t,{node:l,data:n,store:o})=>t(xa,{value:r("value",n),label:r("label",n),disabled:r("disabled",n),visible:l.visible},e.renderContent?()=>e.renderContent(t,{node:l,data:n,store:o}):a.default?()=>a.default({node:l,data:n,store:o}):void 0),filterNodeMethod:(t,a,l)=>e.filterNodeMethod?e.filterNodeMethod(t,a,l):!t||new RegExp(ht(t),"i").test(r("label",a)||""),onNodeClick:(a,l,o)=>{var s,d,i,u;if(null==(s=t.onNodeClick)||s.call(t,a,l,o),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!l.isLeaf)e.expandOnClickNode&&o.proxy.handleExpandIconClick();else if(!r("disabled",a)){const e=null==(d=n.value)?void 0:d.states.options.get(r("value",a));null==(i=n.value)||i.handleOptionSelect(e)}null==(u=n.value)||u.focus()}},onCheck:(a,s)=>{var d;if(!e.showCheckbox)return;const i=r("value",a),u={};Va([o.value.store.root],e=>u[e.key]=e,e=>e.childNodes);const c=s.checkedKeys,h=e.multiple?Ea(e.modelValue).filter(e=>!(e in u)&&!c.includes(e)):[],v=h.concat(c);if(e.checkStrictly)l(U,e.multiple?v:v.includes(i)?i:void 0);else if(e.multiple){const e=p();l(U,h.concat(e))}else{const t=Sa([a],e=>!_a(r("children",e))&&!r("disabled",e),e=>r("children",e)),n=t?r("value",t):void 0,o=wa(e.modelValue)&&!!Sa([a],t=>r("value",t)===e.modelValue,e=>r("children",e));l(U,n===e.modelValue||o?void 0:n)}J(()=>{var l;const n=Ea(e.modelValue);o.value.setCheckedKeys(n),null==(l=t.onCheck)||l.call(t,a,{checkedKeys:o.value.getCheckedKeys(),checkedNodes:o.value.getCheckedNodes(),halfCheckedKeys:o.value.getHalfCheckedKeys(),halfCheckedNodes:o.value.getHalfCheckedNodes()})}),null==(d=n.value)||d.focus()},onNodeExpand:(a,n,s)=>{var d;null==(d=t.onNodeExpand)||d.call(t,a,n,s),J(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&n.checked){const t={},a=o.value.getCheckedKeys();Va([o.value.store.root],e=>t[e.key]=e,e=>e.childNodes);const n=Ea(e.modelValue).filter(e=>!(e in t)&&!a.includes(e)),s=p();l(U,n.concat(s))}})},cacheOptions:c}})(e,t,{select:o,tree:s,key:d}),p=P({});return n(p),W(()=>{Object.assign(p,{...Ye(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Ye(o.value,["focus","blur","selectedLabel"]),treeRef:s.value,selectRef:o.value})}),()=>Ue(ct,P({...r,ref:e=>o.value=e}),{...l,default:()=>[Ue(Da,{data:u.value}),Ue(Na,P({...c,ref:e=>s.value=e}))]})}}),[["__file","tree-select.vue"]]));const $a=et("organizationalUnits",()=>{const e=_([]),t=_(null),a=_([]),l=_([]),n=_(!1),o=_(!1),s=_(!1);async function d(t){n.value=!0;try{const a=await async function(e){return Je("/org-units",{params:e})}(t);return e.value=a.data,a.data}finally{n.value=!1}}async function i(e){n.value=!0;try{const n=await async function(e){return Je(`/org-units/${e}`)}(e);return t.value=n.data,a.value=n.data.members||[],l.value=n.data.suppliers||[],n.data}finally{n.value=!1}}async function r(e){o.value=!0;try{const l=await async function(e){return Je(`/org-units/${e}/members`)}(e);return a.value=l.data,t.value&&t.value.id===e&&(t.value.members=l.data),l.data}finally{o.value=!1}}async function u(e){s.value=!0;try{const a=await async function(e){return Je(`/org-units/${e}/suppliers`)}(e);return l.value=a.data,t.value&&t.value.id===e&&(t.value.suppliers=a.data),a.data}finally{s.value=!1}}return{units:e,currentUnit:t,members:a,suppliers:l,loading:n,loadingMembers:o,loadingSuppliers:s,fetchUnits:d,fetchUnit:i,createUnit:async function(e){const t=await async function(e){return Xe("/org-units",e)}(e);return await d(),t.data},updateUnit:async function(e,a){const l=await async function(e,t){return Ge(`/org-units/${e}`,t)}(e,a);return await d(),t.value&&t.value.id===e&&await i(e),l.data},deleteUnit:async function(n){const o=await async function(e){return Qe(`/org-units/${e}`)}(n),s=new Set(o?.data?.deletedIds??[n]);s.size>0&&(e.value=e.value.filter(e=>!s.has(e.id))),t.value&&s.has(t.value.id)&&(t.value=null,a.value=[],l.value=[]),await d()},checkDeletion:async function(e){return(await async function(e){return Je(`/org-units/${e}/cascade-check`)}(e)).data},moveUnit:async function(e,t){const a=await async function(e,t){return Xe(`/org-units/${e}/move`,t)}(e,{newParentId:t});return await d(),a.data},fetchMembers:r,addMembers:async function(e,t){const a=await async function(e,t){return Xe(`/org-units/${e}/members`,t)}(e,t);return await r(e),a.data},removeMember:async function(e,l){await async function(e,t){return Qe(`/org-units/${e}/members/${t}`)}(e,l),a.value=a.value.filter(e=>e.userId!==l),t.value&&t.value.id===e&&(t.value.members=a.value)},fetchSuppliers:u,addSuppliers:async function(e,t){const a=await async function(e,t){return Xe(`/org-units/${e}/suppliers`,t)}(e,t);return await u(e),a.data},removeSupplier:async function(e,a){await async function(e,t){return Qe(`/org-units/${e}/suppliers/${t}`)}(e,a),l.value=l.value.filter(e=>e.supplierId!==a),t.value&&t.value.id===e&&(t.value.suppliers=l.value)}}}),Ta={class:"org-units-view"},Ia={class:"filters-bar"},La={class:"filter-group"},za={class:"tree-node"},Aa={class:"node-info"},Ba={class:"node-actions"},Oa={class:"admin-panel"},Ua={class:"admin-info"},Ma={class:"value"},ja={key:0,class:"admin-editor"},Fa={class:"manage-section"},qa={class:"section-header"},Pa={class:"manage-section"},Ha={class:"section-header"},Ra=dt(t({__name:"OrganizationalUnitsView",setup(e){const t=$t(),a={admin:"",purchaser:"",procurement_manager:"",procurement_director:"",finance_accountant:"",finance_director:"",quality_manager:"",temp_supplier:"",formal_supplier:""},l=new Set(["temp_supplier","formal_supplier","supplier"]),o={value:"id",label:"name",children:"children",checkStrictly:!0},s={value:"id",label:"name",children:"children",disabled:"disabled"},d=tt(),y=$a(),{units:g,currentUnit:C,members:N,suppliers:x,loading:w,loadingMembers:D,loadingSuppliers:K}=at(y),$=_(""),T=_({type:""}),I=_("tree"),L=_(!1),z=_(!1),A=_(!1),B=_(!1),O=_(!1),U=_("members"),M=_(!1),j=_(!1),F=_(null),q=_(null),P=_(null),R=_(),Y=_({code:"",name:"",type:"general",parentId:null,description:"",adminId:null}),Z=i(()=>({code:[{required:!0,message:"",trigger:"blur"}],name:[{required:!0,message:"",trigger:"blur"}]})),X=_([]),G=_(!1),Q=_(!1),ee=_(null),te=_(!1),ae=_(!1),le=_({userIds:[],role:"member",notes:""}),ne=i(()=>{const e=d.user;return!!e&&("admin"===e.role||(e.permissions?.includes("admin.org_units.manage")??!1))}),oe=i(()=>"admin"===d.user?.role),se=i(()=>{const e=new Set;for(const t of d.user?.adminUnits??[])e.add(Number(t.id));return e});function de(e){if(!e)return!1;const t=se.value;return!!t.has(e.id)||!!e.path&&e.path.split("/").filter(Boolean).map(e=>Number(e)).some(e=>t.has(e))}const ie=i(()=>ne.value||de(C.value)),re=i(()=>oe.value||ne.value),ue=i(()=>C.value?.adminIds?.[0]??null),ce=i(()=>{const e=ue.value;if(!e)return"";const t=X.value.find(t=>t.id===e);return t?ke(t):e}),pe=i(()=>{let e=g.value.slice();if(T.value.type&&(e=e.filter(e=>e.type===T.value.type)),$.value){const t=$.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.code.toLowerCase().includes(t))}return e}),he=i(()=>pe.value),ve=i(()=>{const e=t=>pe.value.filter(e=>e.parentId===t).map(t=>({...t,children:e(t.id)}));return e(null)}),fe=i(()=>ve.value),me=i(()=>{const e=ve.value;if(!q.value)return e;const t=new Set([q.value.id]);q.value.path&&q.value.path.split("/").filter(Boolean).map(e=>Number(e)).forEach(e=>t.add(e));for(const l of g.value){if(!l.path)continue;l.path.split("/").filter(Boolean).map(e=>Number(e)).includes(q.value.id)&&t.add(l.id)}const a=e=>e.map(e=>({...e,disabled:t.has(e.id),children:e.children?a(e.children):void 0}));return a(e)}),ye=i(()=>new Set(N.value.map(e=>String(e.userId)))),ge=i(()=>X.value.filter(e=>!ye.value.has(e.id)));function ke(e){return`${e.name}${t=e.role,a[t]??t}  ${e.id}`;var t}function Ce(e){e&&(X.value.some(t=>t.id===e)||X.value.push({id:e,name:e,role:"unknown"}))}async function Ne(e=!1){if(!Q.value||e){G.value=!0;try{const e=(await Kt()).filter(e=>!l.has(String(e.role))).map(e=>({id:String(e.id??""),name:e.name??String(e.id??""),role:String(e.role??"unknown")})).sort((e,t)=>e.name.localeCompare(t.name,"zh-CN"));X.value=e,Q.value=!0}catch(a){console.error("Failed to load users for selection",a),t.error(a?.message??"")}finally{G.value=!1}}}function xe(e){return ne.value||de(e)}function _e(e){return xe(e)}function Ee(e){return!(e.level>=5)&&xe(e)}function Se(e){return{general:"",department:"",division:"",procurement:""}[e]??e}function Ve(e){return{general:"info",department:"success",division:"warning",procurement:"danger"}[e]??"info"}function De(){Y.value={code:"",name:"",type:"general",parentId:null,description:"",adminId:null}}function Ke(){le.value={userIds:[],role:"member",notes:""}}function $e(){L.value=!1,F.value=null,De(),R.value?.resetFields()}async function Te(){re.value?(F.value=null,De(),oe.value&&await Ne(),L.value=!0,J(()=>R.value?.clearValidate())):t.warning("")}async function Ie(e){var a;(a=e,ne.value||de(a))?(F.value=null,De(),Y.value.parentId=e.id,oe.value&&await Ne(),L.value=!0,J(()=>R.value?.clearValidate())):t.warning("")}async function Le(e){xe(e)?(F.value=e,Y.value={code:e.code,name:e.name,type:e.type,parentId:e.parentId??null,description:e.description??"",adminId:ue.value},oe.value&&(await Ne(),Ce(Y.value.adminId)),L.value=!0,J(()=>R.value?.clearValidate())):t.warning("")}async function ze(){R.value&&await R.value.validate(async e=>{if(e){M.value=!0;try{F.value?(await y.updateUnit(F.value.id,{name:Y.value.name,type:Y.value.type,description:Y.value.description,adminId:oe.value?Y.value.adminId??null:void 0}),t.success("")):(await y.createUnit({code:Y.value.code,name:Y.value.name,type:Y.value.type,parentId:Y.value.parentId,description:Y.value.description,adminId:oe.value?Y.value.adminId??null:void 0}),t.success("")),$e()}catch(a){t.error(a?.response?.data?.message??"")}finally{M.value=!1}}})}async function Ae(e){try{await y.fetchUnit(e.id),U.value="members",oe.value&&(await Ne(),Ce(ue.value)),ee.value=ue.value,z.value=!0}catch(a){t.error("")}}async function Be(e){if(xe(e))try{const a=await y.checkDeletion(e.id);if(!a.canDelete)return void t.alert(a.message??"","",{type:"warning"});await t.confirm(` ${e.name} `,"",{type:"warning"}),await y.deleteUnit(e.id),t.success("")}catch(a){"cancel"!==a&&t.error(a?.response?.data?.message??"")}else t.warning("")}async function Oe(e){_e(e)?(q.value=e,P.value=e.parentId??null,O.value=!0):t.warning("")}function Ue(){O.value=!1,q.value=null,P.value=null,j.value=!1}async function Me(){if(q.value){j.value=!0;try{await y.moveUnit(q.value.id,P.value??null),t.success(""),Ue()}catch(e){t.error(e?.response?.data?.message??"")}finally{j.value=!1}}}async function je(){ie.value?(await Ne(),Ce(ue.value),Ke(),A.value=!0):t.warning("")}function Fe(){A.value=!1,Ke()}async function qe(){if(C.value&&0!==le.value.userIds.length){ae.value=!0;try{const e={userIds:[...le.value.userIds],role:le.value.role},a=le.value.notes.trim();a&&(e.notes=a),await y.addMembers(C.value.id,e),t.success(""),Fe()}catch(e){t.error(e?.response?.data?.message??"")}finally{ae.value=!1}}}const Pe=i(()=>ee.value===ue.value);async function He(){if(C.value&&oe.value){te.value=!0;try{await y.updateUnit(C.value.id,{adminId:ee.value??null}),t.success(""),await y.fetchUnit(C.value.id),Ce(ue.value),ee.value=ue.value}catch(e){t.error(e?.response?.data?.message??"")}finally{te.value=!1}}}function Re(e){e&&oe.value&&Ne(!0).then(()=>Ce(ee.value))}return H(C,e=>{ee.value=e?e.adminIds?.[0]??null:null}),H(z,e=>{e||(ee.value=null)}),W(async()=>{await y.fetchUnits()}),(e,a)=>{const l=k,d=nt,i=we,g=pt,_=ct,H=Et,W=_t,J=ut,Q=Na,ne=gt,se=Vt,de=yt,ue=St,pe=xt,ye=aa,Ce=Nt,Ne=lt,De=Ct,Ke=bt,We=Ka,Ye=it;return u(),r("div",Ta,[n(Dt,{title:"",subtitle:" 5 "},{actions:f(()=>[n(d,{type:"primary",disabled:!re.value,onClick:Te},{default:f(()=>[n(l,null,{default:f(()=>[n(h(ot))]),_:1}),a[22]||(a[22]=S("  ",-1))]),_:1},8,["disabled"])]),_:1}),m("div",Ia,[n(i,{modelValue:$.value,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value=e),placeholder:"",clearable:"",style:{"max-width":"360px"}},{prefix:f(()=>[n(l,null,{default:f(()=>[n(h(st))]),_:1})]),_:1},8,["modelValue"]),m("div",La,[n(_,{modelValue:T.value.type,"onUpdate:modelValue":a[1]||(a[1]=e=>T.value.type=e),placeholder:"",clearable:"",style:{width:"160px"}},{default:f(()=>[n(g,{label:"",value:""}),n(g,{label:"",value:"general"}),n(g,{label:"",value:"department"}),n(g,{label:"",value:"division"}),n(g,{label:"",value:"procurement"})]),_:1},8,["modelValue"]),n(W,{modelValue:I.value,"onUpdate:modelValue":a[2]||(a[2]=e=>I.value=e)},{default:f(()=>[n(H,{value:"tree"},{default:f(()=>[...a[23]||(a[23]=[S("",-1)])]),_:1}),n(H,{value:"table"},{default:f(()=>[...a[24]||(a[24]=[S("",-1)])]),_:1})]),_:1},8,["modelValue"])])]),be((u(),p(ue,{class:"units-card"},{default:f(()=>["tree"===I.value?(u(),p(Q,{key:0,data:ve.value,"node-key":"id",props:{label:"name",children:"children"},"default-expand-all":"","expand-on-click-node":!1},{default:f(({data:e})=>[m("div",za,[m("span",Aa,[m("strong",null,V(e.name),1),n(J,{size:"small",type:Ve(e.type)},{default:f(()=>[S(V(Se(e.type)),1)]),_:2},1032,["type"]),n(J,{size:"small"},{default:f(()=>[S("L"+V(e.level),1)]),_:2},1024),e.memberCount?(u(),p(J,{key:0,size:"small"},{default:f(()=>[S(V(e.memberCount)+"  ",1)]),_:2},1024)):c("",!0)]),m("span",Ba,[n(d,{link:"",type:"primary",size:"small",onClick:t=>Ae(e)},{default:f(()=>[...a[25]||(a[25]=[S("  ",-1)])]),_:1},8,["onClick"]),n(d,{link:"",type:"primary",size:"small",disabled:!xe(e),onClick:t=>Le(e)},{default:f(()=>[...a[26]||(a[26]=[S("  ",-1)])]),_:1},8,["disabled","onClick"]),n(d,{link:"",type:"primary",size:"small",disabled:!_e(e),onClick:t=>Oe(e)},{default:f(()=>[...a[27]||(a[27]=[S("  ",-1)])]),_:1},8,["disabled","onClick"]),n(d,{link:"",type:"warning",size:"small",disabled:!Ee(e),onClick:t=>Ie(e)},{default:f(()=>[...a[28]||(a[28]=[S("  ",-1)])]),_:1},8,["disabled","onClick"]),n(d,{link:"",type:"danger",size:"small",disabled:!xe(e),onClick:t=>Be(e)},{default:f(()=>[...a[29]||(a[29]=[S("  ",-1)])]),_:1},8,["disabled","onClick"])])])]),_:1},8,["data"])):(u(),p(de,{key:1,data:he.value,stripe:"",onRowClick:Ae},{default:f(()=>[n(ne,{prop:"code",label:"",width:"140"}),n(ne,{prop:"name",label:"","min-width":"220"}),n(ne,{prop:"type",label:"",width:"120"},{default:f(({row:e})=>[n(J,{type:Ve(e.type),size:"small"},{default:f(()=>[S(V(Se(e.type)),1)]),_:2},1032,["type"])]),_:1}),n(ne,{prop:"level",label:"",width:"80",align:"center"}),n(ne,{label:"",width:"100",align:"center"},{default:f(({row:e})=>[S(V(e.memberCount??0),1)]),_:1}),n(ne,{label:"",width:"300",fixed:"right"},{default:f(({row:e})=>[n(se,{wrap:""},{default:f(()=>[n(d,{link:"",type:"primary",size:"small",onClick:v(t=>Ae(e),["stop"])},{default:f(()=>[...a[30]||(a[30]=[S("  ",-1)])]),_:1},8,["onClick"]),n(d,{link:"",type:"primary",size:"small",disabled:!xe(e),onClick:v(t=>Le(e),["stop"])},{default:f(()=>[...a[31]||(a[31]=[S("  ",-1)])]),_:1},8,["disabled","onClick"]),n(d,{link:"",type:"primary",size:"small",disabled:!_e(e),onClick:v(t=>Oe(e),["stop"])},{default:f(()=>[...a[32]||(a[32]=[S("  ",-1)])]),_:1},8,["disabled","onClick"]),n(d,{link:"",type:"warning",size:"small",disabled:!Ee(e),onClick:v(t=>Ie(e),["stop"])},{default:f(()=>[...a[33]||(a[33]=[S("  ",-1)])]),_:1},8,["disabled","onClick"]),n(d,{link:"",type:"danger",size:"small",disabled:!xe(e),onClick:v(t=>Be(e),["stop"])},{default:f(()=>[...a[34]||(a[34]=[S("  ",-1)])]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]))]),_:1})),[[Ye,h(w)]]),n(Ne,{modelValue:L.value,"onUpdate:modelValue":a[9]||(a[9]=e=>L.value=e),title:F.value?"":"",width:"520px","destroy-on-close":""},{footer:f(()=>[n(d,{onClick:$e},{default:f(()=>[...a[35]||(a[35]=[S("",-1)])]),_:1}),n(d,{type:"primary",loading:M.value,onClick:ze},{default:f(()=>[S(V(F.value?"":""),1)]),_:1},8,["loading"])]),default:f(()=>[n(Ce,{ref_key:"unitFormRef",ref:R,model:Y.value,rules:Z.value,"label-width":"96px"},{default:f(()=>[n(pe,{label:"",prop:"code"},{default:f(()=>[n(i,{modelValue:Y.value.code,"onUpdate:modelValue":a[3]||(a[3]=e=>Y.value.code=e),placeholder:" HQCN-BJ",disabled:!!F.value},null,8,["modelValue","disabled"])]),_:1}),n(pe,{label:"",prop:"name"},{default:f(()=>[n(i,{modelValue:Y.value.name,"onUpdate:modelValue":a[4]||(a[4]=e=>Y.value.name=e),placeholder:""},null,8,["modelValue"])]),_:1}),n(pe,{label:""},{default:f(()=>[n(_,{modelValue:Y.value.type,"onUpdate:modelValue":a[5]||(a[5]=e=>Y.value.type=e),style:{width:"100%"}},{default:f(()=>[n(g,{label:"",value:"general"}),n(g,{label:"",value:"department"}),n(g,{label:"",value:"division"}),n(g,{label:"",value:"procurement"})]),_:1},8,["modelValue"])]),_:1}),n(pe,{label:""},{default:f(()=>[n(ye,{modelValue:Y.value.parentId,"onUpdate:modelValue":a[6]||(a[6]=e=>Y.value.parentId=e),options:fe.value,props:o,clearable:"",placeholder:"",disabled:!!F.value,style:{width:"100%"}},null,8,["modelValue","options","disabled"])]),_:1}),n(pe,{label:""},{default:f(()=>[n(i,{modelValue:Y.value.description,"onUpdate:modelValue":a[7]||(a[7]=e=>Y.value.description=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),oe.value?(u(),p(pe,{key:0,label:""},{default:f(()=>[n(_,{modelValue:Y.value.adminId,"onUpdate:modelValue":a[8]||(a[8]=e=>Y.value.adminId=e),filterable:"",clearable:"",placeholder:"",loading:G.value,style:{width:"100%"},onVisibleChange:Re},{default:f(()=>[(u(!0),r(b,null,E(X.value,e=>(u(),p(g,{key:e.id,label:ke(e),value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1})):c("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),n(Ne,{modelValue:z.value,"onUpdate:modelValue":a[13]||(a[13]=e=>z.value=e),title:h(C)?`${h(C).name}`:"",width:"920px","destroy-on-close":""},{default:f(()=>[m("section",Oa,[m("div",Ua,[a[36]||(a[36]=m("span",{class:"label"},"",-1)),m("span",Ma,V(ce.value),1)]),oe.value?(u(),r("div",ja,[n(_,{modelValue:ee.value,"onUpdate:modelValue":a[10]||(a[10]=e=>ee.value=e),size:"small",filterable:"",clearable:"",placeholder:"",loading:G.value,style:{width:"260px"},onVisibleChange:Re},{default:f(()=>[(u(!0),r(b,null,E(X.value,e=>(u(),p(g,{key:e.id,label:ke(e),value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),n(d,{type:"primary",size:"small",loading:te.value,disabled:Pe.value,onClick:He},{default:f(()=>[...a[37]||(a[37]=[S("  ",-1)])]),_:1},8,["loading","disabled"])])):c("",!0)]),n(Ke,{modelValue:U.value,"onUpdate:modelValue":a[12]||(a[12]=e=>U.value=e)},{default:f(()=>[n(De,{label:"",name:"members"},{default:f(()=>[m("div",Fa,[m("div",qa,[a[39]||(a[39]=m("h3",null,"",-1)),ie.value?(u(),p(d,{key:0,size:"small",type:"primary",onClick:je},{default:f(()=>[...a[38]||(a[38]=[S("  ",-1)])]),_:1})):c("",!0)]),be((u(),p(de,{data:h(N),stripe:""},{default:f(()=>[n(ne,{prop:"userName",label:""}),n(ne,{prop:"userRole",label:"",width:"160"}),n(ne,{prop:"role",label:"",width:"120"},{default:f(({row:e})=>[n(J,{size:"small",type:"admin"===e.role?"danger":"lead"===e.role?"warning":"info"},{default:f(()=>[S(V(e.role),1)]),_:2},1032,["type"])]),_:1}),n(ne,{label:"",width:"120",align:"center"},{default:f(({row:e})=>[ie.value?(u(),p(d,{key:0,link:"",type:"danger",size:"small",onClick:a=>async function(e){if(C.value)try{await t.confirm("","",{type:"warning"}),await y.removeMember(C.value.id,e),t.success("")}catch(a){"cancel"!==a&&t.error("")}}(e.userId)},{default:f(()=>[...a[40]||(a[40]=[S("  ",-1)])]),_:1},8,["onClick"])):c("",!0)]),_:1})]),_:1},8,["data"])),[[Ye,h(D)]])])]),_:1}),n(De,{label:"",name:"suppliers"},{default:f(()=>[m("div",Pa,[m("div",Ha,[a[42]||(a[42]=m("h3",null,"",-1)),n(d,{size:"small",type:"primary",onClick:a[11]||(a[11]=e=>B.value=!0)},{default:f(()=>[...a[41]||(a[41]=[S("  ",-1)])]),_:1})]),be((u(),p(de,{data:h(x),stripe:""},{default:f(()=>[n(ne,{prop:"companyName",label:""}),n(ne,{prop:"companyId",label:"",width:"160"}),n(ne,{prop:"status",label:"",width:"120"}),n(ne,{label:"",width:"120",align:"center"},{default:f(({row:e})=>[n(d,{link:"",type:"danger",size:"small",onClick:a=>async function(e){if(C.value)try{await t.confirm("","",{type:"warning"}),await y.removeSupplier(C.value.id,e),t.success("")}catch(a){"cancel"!==a&&t.error("")}}(e.supplierId)},{default:f(()=>[...a[43]||(a[43]=[S("  ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ye,h(K)]])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","title"]),n(Ne,{modelValue:A.value,"onUpdate:modelValue":a[17]||(a[17]=e=>A.value=e),title:"",width:"520px",onClose:Fe},{footer:f(()=>[n(d,{onClick:Fe},{default:f(()=>[...a[44]||(a[44]=[S("",-1)])]),_:1}),n(d,{type:"primary",loading:ae.value,disabled:0===le.value.userIds.length,onClick:qe},{default:f(()=>[...a[45]||(a[45]=[S("  ",-1)])]),_:1},8,["loading","disabled"])]),default:f(()=>[n(Ce,{"label-width":"80px"},{default:f(()=>[n(pe,{label:"",required:""},{default:f(()=>[n(_,{modelValue:le.value.userIds,"onUpdate:modelValue":a[14]||(a[14]=e=>le.value.userIds=e),multiple:"",filterable:"",clearable:"",placeholder:"",loading:G.value,style:{width:"100%"},onVisibleChange:Re},{default:f(()=>[(u(!0),r(b,null,E(ge.value,e=>(u(),p(g,{key:e.id,label:ke(e),value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),n(pe,{label:""},{default:f(()=>[n(_,{modelValue:le.value.role,"onUpdate:modelValue":a[15]||(a[15]=e=>le.value.role=e),style:{width:"100%"}},{default:f(()=>[n(g,{label:"",value:"member"}),n(g,{label:"",value:"lead"}),n(g,{label:"",value:"admin"})]),_:1},8,["modelValue"])]),_:1}),n(pe,{label:""},{default:f(()=>[n(i,{modelValue:le.value.notes,"onUpdate:modelValue":a[16]||(a[16]=e=>le.value.notes=e),type:"textarea",rows:3,placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(Ne,{modelValue:B.value,"onUpdate:modelValue":a[19]||(a[19]=e=>B.value=e),title:"",width:"480px"},{footer:f(()=>[n(d,{onClick:a[18]||(a[18]=e=>B.value=!1)},{default:f(()=>[...a[46]||(a[46]=[S("",-1)])]),_:1})]),default:f(()=>[a[47]||(a[47]=m("p",null,"",-1))]),_:1},8,["modelValue"]),n(Ne,{modelValue:O.value,"onUpdate:modelValue":a[21]||(a[21]=e=>O.value=e),title:q.value?`${q.value.name}`:"",width:"420px",onClose:Ue},{footer:f(()=>[n(d,{onClick:Ue},{default:f(()=>[...a[48]||(a[48]=[S("",-1)])]),_:1}),n(d,{type:"primary",loading:j.value,onClick:Me},{default:f(()=>[...a[49]||(a[49]=[S("  ",-1)])]),_:1},8,["loading"])]),default:f(()=>[n(Ce,{"label-width":"96px"},{default:f(()=>[n(pe,{label:""},{default:f(()=>[n(We,{modelValue:P.value,"onUpdate:modelValue":a[20]||(a[20]=e=>P.value=e),data:me.value,props:s,"check-strictly":"",clearable:"",placeholder:"",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-85aa4014"]]);export{Ra as default};
