import{d as e,u as l,c as a,b as t,e as o,z as i,y as n,j as r,t as u,f as s,k as m,x as d,a$ as c,A as p,E as b,aM as f,o as h,_ as V}from"./index-CyQdnTIC.js";import{E as v,a as y}from"./el-table-column-DvsfEAIW.js";import"./el-scrollbar-CTtrnhms.js";/* empty css                 */import{E as q}from"./el-input-number-BOh8Y7Om.js";import"./el-tag-eQgnjs1v.js";import{E as g,a as U}from"./el-select-CdADVnxU.js";import{E as w}from"./el-alert-BXhB-eTB.js";import"./_baseClone-CxGxK45k.js";import"./castArray-C2ko8TfK.js";import"./debounce-B4S_WZO2.js";import"./index-CubmMpUU.js";const I={class:"rfq-line-items-editor"},_={class:"editor-header"},C={key:2,class:"summary-bar"},j=V(e({__name:"RfqLineItemsEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:V}){const j=e,z=V,{t:N}=l(),P=a({get:()=>j.modelValue||[],set:e=>z("update:modelValue",e)});function x(){const e={lineNumber:P.value.length+1,materialCategory:"",brand:"",itemName:"",specifications:"",quantity:1,unit:"件",estimatedUnitPrice:void 0,currency:"CNY",parameters:"",notes:""};P.value=[...P.value,e]}function k(){P.value=[...P.value]}function E(){let e=0,l="CNY";return P.value.forEach(a=>{a.quantity&&a.estimatedUnitPrice&&(e+=a.quantity*a.estimatedUnitPrice,a.currency&&(l=a.currency))}),e>0?`${e.toFixed(2)} ${l}`:"-"}return(e,l)=>{const a=p,V=w,j=v,z=U,Y=g,R=b,$=q,L=y;return h(),t("div",I,[o("div",_,[o("h3",null,u(s(N)("rfq.lineItems.title")),1),r(a,{type:"primary",icon:s(c),onClick:x},{default:m(()=>[d(u(s(N)("rfq.lineItems.addItem")),1)]),_:1},8,["icon"])]),0===P.value.length?(h(),i(V,{key:0,title:s(N)("rfq.lineItems.emptyHint"),type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"16px"}},null,8,["title"])):(h(),i(L,{key:1,data:P.value,border:"",stripe:"",style:{width:"100%"},"max-height":"500px"},{default:m(()=>[r(j,{type:"index",label:s(N)("rfq.items.lineNumber"),width:"70",align:"center"},null,8,["label"]),r(j,{label:s(N)("rfq.lineItems.materialCategory"),width:"120"},{default:m(({row:e})=>[r(Y,{modelValue:e.materialCategory,"onUpdate:modelValue":l=>e.materialCategory=l,placeholder:s(N)("rfq.lineItems.selectCategory"),size:"small",onChange:k},{default:m(()=>[r(z,{value:"equipment",label:s(N)("rfq.distributionCategory.equipment")},null,8,["label"]),r(z,{value:"consumables",label:s(N)("rfq.lineItems.consumables")},null,8,["label"]),r(z,{value:"hardware",label:s(N)("rfq.distributionCategory.hardware")},null,8,["label"]),r(z,{value:"other",label:s(N)("common.other")},null,8,["label"])]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:s(N)("rfq.lineItems.brand"),width:"120"},{default:m(({row:e})=>[r(R,{modelValue:e.brand,"onUpdate:modelValue":l=>e.brand=l,placeholder:s(N)("rfq.lineItems.brandPlaceholder"),size:"small",onInput:k},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:s(N)("rfq.items.itemName"),"min-width":"150"},{default:m(({row:e})=>[r(R,{modelValue:e.itemName,"onUpdate:modelValue":l=>e.itemName=l,placeholder:s(N)("rfq.lineItems.itemNameRequired"),size:"small",onInput:k},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:s(N)("rfq.lineItems.specifications"),"min-width":"150"},{default:m(({row:e})=>[r(R,{modelValue:e.specifications,"onUpdate:modelValue":l=>e.specifications=l,placeholder:s(N)("rfq.lineItems.specificationsPlaceholder"),size:"small",onInput:k},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:s(N)("rfq.items.quantity"),width:"100"},{default:m(({row:e})=>[r($,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,min:.01,precision:2,size:"small","controls-position":"right",style:{width:"100%"},onChange:k},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),r(j,{label:s(N)("rfq.lineItems.unit"),width:"100"},{default:m(({row:e})=>[r(Y,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,placeholder:s(N)("rfq.lineItems.selectUnit"),size:"small",filterable:"","allow-create":"",onChange:k},{default:m(()=>[r(z,{value:"件",label:"件"}),r(z,{value:"个",label:"个"}),r(z,{value:"台",label:"台"}),r(z,{value:"套",label:"套"}),r(z,{value:"箱",label:"箱"}),r(z,{value:"包",label:"包"}),r(z,{value:"kg",label:"kg"}),r(z,{value:"g",label:"g"}),r(z,{value:"L",label:"L"}),r(z,{value:"m",label:"m"}),r(z,{value:"m²",label:"m²"}),r(z,{value:"m³",label:"m³"})]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:s(N)("rfq.items.estimatedPrice"),width:"120"},{default:m(({row:e})=>[r($,{modelValue:e.estimatedUnitPrice,"onUpdate:modelValue":l=>e.estimatedUnitPrice=l,min:0,precision:2,size:"small","controls-position":"right",style:{width:"100%"},onChange:k},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),r(j,{label:s(N)("rfq.lineItems.currency"),width:"100"},{default:m(({row:e})=>[r(Y,{modelValue:e.currency,"onUpdate:modelValue":l=>e.currency=l,size:"small",onChange:k},{default:m(()=>[r(z,{value:"CNY",label:"CNY"}),r(z,{value:"USD",label:"USD"}),r(z,{value:"EUR",label:"EUR"}),r(z,{value:"JPY",label:"JPY"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),r(j,{label:s(N)("rfq.lineItems.notes"),"min-width":"120"},{default:m(({row:e})=>[r(R,{modelValue:e.notes,"onUpdate:modelValue":l=>e.notes=l,placeholder:s(N)("rfq.lineItems.notesPlaceholder"),size:"small",onInput:k},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:s(N)("common.actions"),width:"80",fixed:"right",align:"center"},{default:m(({$index:e})=>[r(a,{type:"danger",icon:s(f),size:"small",link:"",onClick:l=>function(e){const l=[...P.value];l.splice(e,1),l.forEach((e,l)=>{e.lineNumber=l+1}),P.value=l}(e)},null,8,["icon","onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),P.value.length>0?(h(),t("div",C,[o("span",null,u(s(N)("rfq.lineItems.totalItems"))+": "+u(P.value.length),1),o("span",null,u(s(N)("rfq.lineItems.estimatedTotal"))+": "+u(E()),1)])):n("",!0)])}}}),[["__scopeId","data-v-bea94743"]]);export{j as default};
