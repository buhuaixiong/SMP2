const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/public-DjRm_Xox.js","assets/index-rw7zlv6S.js","assets/index-CMY-P_dF.css"])))=>i.map(i=>d[i]);
import{an as e,ao as a,ap as l,aq as t,c as s,ar as o,h as i,B as n,as as u,D as r,at as d,au as c,d as p,av as v,aw as f,ax as m,ay as y,az as _,z as b,o as g,k as h,j as w,aA as k,f as E,m as C,aB as D,aC as N,e as R,aD as A,w as z,b as j,y as P,S as F,aa as I,t as V,O as x,aE as O,ak as T,aF as L,aG as S,aH as $,a8 as U,g as B,u as Q,i as q,C as G,H,x as M,A as W,a9 as Z,F as Y,aI as J,Z as X,V as K,X as ee,E as ae,J as le,_ as te}from"./index-rw7zlv6S.js";import{v as se}from"./el-loading-C8xC8rSu.js";import{a as oe,E as ie}from"./el-form-item-BX0_rjAF.js";/* empty css                 */import{E as ne,a as ue}from"./el-radio-group-C7AQpQOQ.js";import{a as re,E as de}from"./el-descriptions-item-DIkI8c8h.js";import{E as ce}from"./el-divider-uQWCJzJb.js";import{E as pe}from"./el-alert-i6ynGj4f.js";import{E as ve}from"./el-skeleton-item-CTAQL92b.js";import{E as fe}from"./el-card-B9-LS32_.js";import{E as me}from"./el-empty-DCsIcLEB.js";import{E as ye,a as _e}from"./el-table-column-IKxgbm5V.js";import"./el-scrollbar-D5w1osf_.js";import{E as be}from"./el-tag-cdPnKa4g.js";import{P as ge}from"./PageHeader-WE543s7R.js";import{fetchPendingRegistrations as he,fetchApprovedRegistrations as we,bindSupplierCode as ke}from"./public-DjRm_Xox.js";import"./dayjs.min-CuEfV50W.js";import{r as Ee}from"./apiBaseUrl-Bx8aB0Mq.js";import{u as Ce}from"./useNotification-CkKTeXAr.js";import"./castArray-BwqloSa3.js";import"./_baseClone-CNDyvpdQ.js";import"./debounce-ClUD_C4p.js";const De=a({...l,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},resizable:Boolean,size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Ne=e;function Re(e,a){const{width:l,height:c}=t(),p=s(()=>["ltr","rtl"].includes(e.direction)),v=s(()=>["ltr","ttb"].includes(e.direction)?1:-1),f=s(()=>p.value?l.value:c.value),m=s(()=>o(y.value+v.value*_.value,4,f.value)),y=i(0),_=i(0),b=i(!1),g=i(!1);let h=[],w=[];n(()=>[e.size,e.resizable],()=>{g.value=!1,y.value=0,_.value=0,E()});const k=e=>{const{pageX:a,pageY:l}=e,t=a-h[0],s=l-h[1];_.value=p.value?t:s},E=()=>{h=[],y.value=m.value,_.value=0,b.value=!1,w.forEach(e=>null==e?void 0:e()),w=[]},C=u(a,"mousedown",l=>{e.resizable&&(g.value||(y.value=(()=>{var e;const l=null==(e=a.value)?void 0:e.closest('[aria-modal="true"]');return l?p.value?l.offsetWidth:l.offsetHeight:100})(),g.value=!0),h=[l.pageX,l.pageY],b.value=!0,w.push(u(window,"mouseup",E),u(window,"mousemove",k)))});return r(()=>{C(),E()}),{size:s(()=>g.value?`${m.value}px`:d(e.size)),isResizing:b,isHorizontal:p}}const Ae=p({name:"ElDrawer",inheritAttrs:!1});const ze=$(c(p({...Ae,props:De,emits:Ne,setup(e,{expose:a}){const l=e,t=v();f({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},s(()=>!!t.title));const o=i(),n=i(),u=i(),r=m("drawer"),{t:d}=y(),{afterEnter:c,afterLeave:p,beforeLeave:$,visible:U,rendered:B,titleId:Q,bodyId:q,zIndex:G,onModalClick:H,onOpenAutoFocus:M,onCloseAutoFocus:W,onFocusoutPrevented:Z,onCloseRequested:Y,handleClose:J}=_(l,o),{isHorizontal:X,size:K,isResizing:ee}=Re(l,u),ae=s(()=>l.modalPenetrable&&!l.modal);return a({handleClose:J,afterEnter:c,afterLeave:p}),(e,a)=>(g(),b(E(S),{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},{default:h(()=>[w(k,{name:E(r).b("fade"),onAfterEnter:E(c),onAfterLeave:E(p),onBeforeLeave:E($),persisted:""},{default:h(()=>{var a;return[C(w(E(D),{mask:e.modal,"overlay-class":[E(r).is("drawer"),null!=(a=e.modalClass)?a:"",`${E(r).namespace.value}-modal-drawer`,E(r).is("penetrable",E(ae))],"z-index":E(G),onClick:E(H)},{default:h(()=>[w(E(N),{loop:"",trapped:E(U),"focus-trap-el":o.value,"focus-start-el":n.value,onFocusAfterTrapped:E(M),onFocusAfterReleased:E(W),onFocusoutPrevented:E(Z),onReleaseRequested:E(Y)},{default:h(()=>[R("div",A({ref_key:"drawerRef",ref:o,"aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:E(Q),"aria-describedby":E(q)},e.$attrs,{class:[E(r).b(),e.direction,E(U)&&"open",E(r).is("dragging",E(ee))],style:{[E(X)?"width":"height"]:E(K)},role:"dialog",onClick:z(()=>{},["stop"])}),[R("span",{ref_key:"focusStartRef",ref:n,class:F(E(r).e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(g(),j("header",{key:0,class:F([E(r).e("header"),e.headerClass])},[e.$slots.title?I(e.$slots,"title",{key:1},()=>[P(" DEPRECATED SLOT ")]):I(e.$slots,"header",{key:0,close:E(J),titleId:E(Q),titleClass:E(r).e("title")},()=>[R("span",{id:E(Q),role:"heading","aria-level":e.headerAriaLevel,class:F(E(r).e("title"))},V(e.title),11,["id","aria-level"])]),e.showClose?(g(),j("button",{key:2,"aria-label":E(d)("el.drawer.close"),class:F(E(r).e("close-btn")),type:"button",onClick:E(J)},[w(E(x),{class:F(E(r).e("close"))},{default:h(()=>[w(E(O))]),_:1},8,["class"])],10,["aria-label","onClick"])):P("v-if",!0)],2)):P("v-if",!0),E(B)?(g(),j("div",{key:1,id:E(q),class:F([E(r).e("body"),e.bodyClass])},[I(e.$slots,"default")],10,["id"])):P("v-if",!0),e.$slots.footer?(g(),j("div",{key:2,class:F([E(r).e("footer"),e.footerClass])},[I(e.$slots,"footer")],2)):P("v-if",!0),e.resizable?(g(),j("div",{key:3,ref_key:"draggerRef",ref:u,style:T({zIndex:E(G)}),class:F(E(r).e("dragger"))},null,6)):P("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[L,E(U)]])]}),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}}),[["__file","drawer.vue"]])),je=e=>{if(!e)return"Unknown Status";return{[U.PENDING_INFO]:"Awaiting profile details",[U.PENDING_PURCHASER]:"Waiting for purchaser review",pending_code_binding:"Pending code binding",pending_cashier:"Cashier review",[U.REJECTED]:"Rejected"}[e]||e},Pe=e=>{if(!e)return"info";return{[U.PENDING_INFO]:"info",[U.PENDING_PURCHASER]:"warning",[U.PENDING_QUALITY_REVIEW]:"warning",[U.PENDING_PURCHASE_MANAGER]:"warning",[U.PENDING_PURCHASE_DIRECTOR]:"warning",pending_code_binding:"warning",pending_cashier:"warning",[U.PENDING_FINANCE_MANAGER]:"warning",[U.APPROVED]:"success",[U.REJECTED]:"danger"}[e]||"info"},Fe={class:"approval-view"},Ie={class:"content-wrapper"},Ve={class:"approval-stack"},xe={class:"card-header"},Oe={class:"supplier-info"},Te={class:"supplier-name"},Le={key:0,class:"supplier-code"},Se={key:0,class:"empty-state"},$e={class:"card-header"},Ue={class:"supplier-info"},Be={class:"supplier-name"},Qe={key:0,class:"supplier-code"},qe={key:0,class:"empty-state"},Ge={key:0},He={key:1},Me={key:2,class:"drawer-content"},We={style:{"font-size":"15px","font-weight":"600"}},Ze={style:{"margin-top":"8px","font-size":"13px"}},Ye={class:"document-grid"},Je={class:"document-header"},Xe={class:"document-meta"},Ke={class:"document-name"},ea={key:0,class:"document-size"},aa={class:"document-actions"},la={key:1,class:"document-empty"},ta={class:"document-header"},sa={class:"document-meta"},oa={class:"document-name"},ia={key:0,class:"document-size"},na={class:"document-actions"},ua={key:1,class:"document-empty"},ra={key:0},da={style:{"white-space":"pre-wrap","line-height":"1.6"}},ca={key:1},pa={class:"drawer-footer"},va=te(p({name:"ApprovalQueueView",__name:"ApprovalQueueView",setup(e){const a=Ce(),l=B(),{t:t}=Q(),o=i(!1),n=i([]),u=i(!1),r=i([]),d=i(!1),c=i(null),p=i(null),v=i(!1),f=i(!1),m=i("approved"),y=q({value:"",submitting:!1}),_=i(!1),k=i(""),D=i(!1),N=s(()=>"finance_accountant"===l.user?.role),A=s(()=>N.value&&"pending_code_binding"===c.value?.status),z=async()=>{o.value=!0;try{n.value=await he()}catch(e){console.error("Failed to fetch pending registrations",e),a.error(t("errors.general"))}finally{o.value=!1}},F=async()=>{u.value=!0;try{r.value=await we()}catch(e){console.error("Failed to fetch approved registrations",e),a.error(t("errors.general"))}finally{u.value=!1}},I=async(e,a="pending")=>{c.value=e,d.value=!0,f.value="approved"===a,m.value="approved",y.value="",await O(e.id),console.log("[DEBUG openDetails] app.status:",e.status),console.log("[DEBUG openDetails] isFinanceAccountant:",N.value),console.log("[DEBUG openDetails] role:",l.user?.role),N.value&&"pending_code_binding"===e.status?.toLowerCase()&&(console.log("[DEBUG openDetails] 准备弹出绑定对话框"),k.value="",_.value=!0)},O=async e=>{v.value=!0;try{const{fetchRegistrationDetail:a}=await le(async()=>{const{fetchRegistrationDetail:e}=await import("./public-DjRm_Xox.js");return{fetchRegistrationDetail:e}},__vite__mapDeps([0,1,2]));p.value=await a(e)}catch(l){p.value=null,console.error("Failed to fetch application detail",l),a.error(t("approvalQueue.errors.loadStatus"))}finally{v.value=!1}},T=async()=>{if(c.value)if("rejected"!==m.value&&"requestInfo"!==m.value||y.value.trim())try{y.submitting=!0;const e=c.value.id,l="approved"===m.value;let s;if(l){const{approveRegistration:l}=await le(async()=>{const{approveRegistration:e}=await import("./public-DjRm_Xox.js");return{approveRegistration:e}},__vite__mapDeps([0,1,2])),o=await l(e,{comment:y.value.trim()||void 0});a.success(o.message||t("approvalQueue.notifications.approved")),s=o.nextStatus}else if("rejected"===m.value){const{rejectRegistration:l}=await le(async()=>{const{rejectRegistration:e}=await import("./public-DjRm_Xox.js");return{rejectRegistration:e}},__vite__mapDeps([0,1,2])),s=await l(e,{reason:y.value});a.success(s.message||t("approvalQueue.notifications.rejected"))}else{const{requestRegistrationInfo:l}=await le(async()=>{const{requestRegistrationInfo:e}=await import("./public-DjRm_Xox.js");return{requestRegistrationInfo:e}},__vite__mapDeps([0,1,2])),s=await l(e,{message:y.value});a.success(s.message||t("approvalQueue.notifications.requestedInfo"))}if(N.value&&l&&"pending_code_binding"===s?.toLowerCase()){d.value=!1,await z();const a=n.value.find(a=>a.id===e);a&&(c.value=a),k.value="",_.value=!0}else d.value=!1,c.value=null,await Promise.all([z(),F()])}catch(e){console.error("Failed to submit decision",e),a.error(e instanceof Error?e.message:t("errors.general"))}finally{y.submitting=!1}else a.warning(t("approvalQueue.validation.commentRequired"))},L=e=>{if(!e)return"-";return new Date(e).toLocaleString()},S=e=>!e||Number.isNaN(e)?"-":e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`,$=e=>{const l=(e=>{if(!e)return null;const a=e.startsWith("/")?e:`/${e}`,l=localStorage.getItem("token"),t=Ee(`/uploads${a}`);if(!l)return t;const s=t.includes("?")?"&":"?";return`${t}${s}token=${encodeURIComponent(l)}`})(e);l?window.open(l,"_blank","noopener,noreferrer"):a.warning("未找到该文件，请联系供应商重新上传。")},U=()=>{c.value&&(k.value="",_.value=!0)},te=async()=>{if(c.value&&k.value.trim()){D.value=!0;try{const e=await ke(c.value.id,k.value.trim());a.success(e.message||"VENDOR CODE 绑定成功"),_.value=!1,await z(),await F()}catch(e){a.error(e.message||"绑定失败")}finally{D.value=!1}}else a.warning("请输入 VENDOR CODE")};return G(()=>{z(),F()}),(e,a)=>{const l=x,s=W,i=ye,N=be,O=_e,B=me,Q=fe,q=ve,G=pe,le=ce,he=re,we=de,ke=ue,Ee=ne,Ce=oe,De=ae,Ne=ie,Re=ze,Ae=H,va=se;return g(),j("div",Fe,[w(ge,{title:E(t)("approvalQueue.title"),subtitle:E(t)("approvalQueue.subtitle")},null,8,["title","subtitle"]),R("div",Ie,[R("div",Ve,[w(Q,{class:"approval-card",shadow:"never"},{header:h(()=>[R("div",xe,[R("span",null,"待我审批 ("+V(n.value.length)+")",1),w(s,{type:"primary",size:"small",onClick:z},{default:h(()=>[w(l,null,{default:h(()=>[w(E(Z))]),_:1}),M(" "+V(E(t)("common.refresh")),1)]),_:1})])]),default:h(()=>[C((g(),b(O,{data:n.value,stripe:""},{default:h(()=>[w(i,{prop:"id",label:"申请编号",width:"100"}),w(i,{label:"供应商信息",width:"250"},{default:h(({row:e})=>[R("div",Oe,[R("div",Te,V(e.companyName),1),e.supplierCode?(g(),j("div",Le," 代码: "+V(e.supplierCode),1)):P("",!0)])]),_:1}),w(i,{label:"状态",width:"140"},{default:h(({row:e})=>[w(N,{type:E(Pe)(e.status),size:"small"},{default:h(()=>[M(V(E(je)(e.status)),1)]),_:2},1032,["type"])]),_:1}),w(i,{label:"联系方式",width:"200"},{default:h(({row:e})=>[M(V(e.contactEmail),1)]),_:1}),w(i,{label:"负责采购员",width:"180"},{default:h(({row:e})=>[M(V(e.procurementEmail||"-"),1)]),_:1}),w(i,{prop:"createdAt",label:"提交时间",width:"180"},{default:h(({row:e})=>[M(V(L(e.createdAt)),1)]),_:1}),w(i,{label:"操作",width:"200",fixed:"right"},{default:h(({row:e})=>[w(s,{type:"primary",size:"small",onClick:a=>I(e)},{default:h(()=>[M(V(E(t)("approvalQueue.actions.viewDetails")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[va,o.value]]),0!==n.value.length||o.value?P("",!0):(g(),j("div",Se,[w(B,{description:E(t)("approvalQueue.noSuppliers")},null,8,["description"])]))]),_:1}),w(Q,{class:"approval-card",shadow:"never"},{header:h(()=>[R("div",$e,[R("span",null,"已审批 ("+V(r.value.length)+")",1),w(s,{type:"primary",size:"small",onClick:F},{default:h(()=>[w(l,null,{default:h(()=>[w(E(Z))]),_:1}),M(" "+V(E(t)("common.refresh")),1)]),_:1})])]),default:h(()=>[C((g(),b(O,{data:r.value,stripe:""},{default:h(()=>[w(i,{prop:"id",label:"申请编号",width:"100"}),w(i,{label:"供应商信息",width:"250"},{default:h(({row:e})=>[R("div",Ue,[R("div",Be,V(e.companyName),1),e.supplierCode?(g(),j("div",Qe," 代码: "+V(e.supplierCode),1)):P("",!0)])]),_:1}),w(i,{label:"状态",width:"140"},{default:h(({row:e})=>[w(N,{type:E(Pe)(e.status),size:"small"},{default:h(()=>[M(V(E(je)(e.status)),1)]),_:2},1032,["type"])]),_:1}),w(i,{label:"联系方式",width:"200"},{default:h(({row:e})=>[M(V(e.contactEmail),1)]),_:1}),w(i,{label:"负责采购员",width:"180"},{default:h(({row:e})=>[M(V(e.procurementEmail||"-"),1)]),_:1}),w(i,{prop:"createdAt",label:"提交时间",width:"180"},{default:h(({row:e})=>[M(V(L(e.createdAt)),1)]),_:1}),w(i,{label:"操作",width:"200",fixed:"right"},{default:h(({row:e})=>[w(s,{type:"primary",size:"small",onClick:a=>I(e,"approved")},{default:h(()=>[M(V(E(t)("approvalQueue.actions.viewDetails")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[va,u.value]]),0!==r.value.length||u.value?P("",!0):(g(),j("div",qe,[w(B,{description:E(t)("approvalQueue.noSuppliers")},null,8,["description"])]))]),_:1})])]),d.value?(g(),b(Re,{key:0,modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=e=>d.value=e),title:c.value?.companyName||E(t)("approvalQueue.drawer.title"),size:"900px","destroy-on-close":""},{footer:h(()=>[R("div",pa,[w(s,{onClick:a[4]||(a[4]=e=>d.value=!1)},{default:h(()=>[...a[31]||(a[31]=[M("取消",-1)])]),_:1}),w(s,{type:"primary",loading:y.submitting,onClick:T,disabled:f.value||!c.value||A.value},{default:h(()=>[...a[32]||(a[32]=[M(" 提交审批 ",-1)])]),_:1},8,["loading","disabled"])])]),default:h(()=>[v.value?(g(),j("div",Ge,[w(q,{rows:8,animated:""})])):p.value?(g(),j("div",Me,[w(G,{type:"info",closable:!1,style:{"margin-bottom":"20px"}},{title:h(()=>[R("div",We,V(p.value.companyName),1)]),default:h(()=>[R("div",Ze," 申请编号: "+V(p.value.id)+" | 提交时间: "+V(L(p.value.createdAt)),1)]),_:1}),w(le,{"content-position":"left"},{default:h(()=>[...a[9]||(a[9]=[M("基本信息",-1)])]),_:1}),w(we,{column:2,border:""},{default:h(()=>[w(he,{label:"申请编号"},{default:h(()=>[M(V(p.value.id),1)]),_:1}),w(he,{label:"状态"},{default:h(()=>[w(N,{type:E(Pe)(p.value.status),size:"small"},{default:h(()=>[M(V(E(je)(p.value.status)),1)]),_:1},8,["type"])]),_:1}),p.value.supplierCode?(g(),b(he,{key:0,label:"供应商代码"},{default:h(()=>[M(V(p.value.supplierCode),1)]),_:1})):P("",!0),w(he,{label:"最后更新"},{default:h(()=>[M(V(L(p.value.updatedAt)),1)]),_:1})]),_:1}),w(le,{"content-position":"left"},{default:h(()=>[...a[10]||(a[10]=[M("公司信息",-1)])]),_:1}),w(we,{column:2,border:""},{default:h(()=>[w(he,{label:"公司名称（中文）"},{default:h(()=>[M(V(p.value.companyName),1)]),_:1}),p.value.companyNameEnglish?(g(),b(he,{key:0,label:"公司名称（英文）"},{default:h(()=>[M(V(p.value.companyNameEnglish),1)]),_:1})):P("",!0),w(he,{label:"英文名称"},{default:h(()=>[M(V(p.value.englishName||"-"),1)]),_:1}),w(he,{label:"供应商分类"},{default:h(()=>{return[M(V((e=p.value.supplierClassification,e?"DM"===e?`DM (${t("rfq.materialType.dm")})`:"IDM"===e?`IDM (${t("rfq.materialType.idm")})`:e:"-")),1)];var e}),_:1}),p.value.companyType?(g(),b(he,{key:1,label:"公司类型"},{default:h(()=>[M(V(p.value.companyType),1)]),_:1})):P("",!0),w(he,{label:"营业执照号"},{default:h(()=>[M(V(p.value.businessRegistrationNumber),1)]),_:1}),w(he,{label:"注册地址",span:2},{default:h(()=>[M(V(p.value.registeredOffice),1)]),_:1}),w(he,{label:"经营地址",span:2},{default:h(()=>[M(V(p.value.businessAddress),1)]),_:1}),p.value.companyPhone?(g(),b(he,{key:2,label:"公司电话"},{default:h(()=>[M(V(p.value.companyPhone),1)]),_:1})):P("",!0),p.value.companyFax?(g(),b(he,{key:3,label:"公司传真"},{default:h(()=>[M(V(p.value.companyFax),1)]),_:1})):P("",!0)]),_:1}),w(le,{"content-position":"left"},{default:h(()=>[...a[11]||(a[11]=[M("联系人信息",-1)])]),_:1}),w(we,{column:2,border:""},{default:h(()=>[w(he,{label:"联系人"},{default:h(()=>[M(V(p.value.contactName),1)]),_:1}),w(he,{label:"联系邮箱"},{default:h(()=>[M(V(p.value.contactEmail),1)]),_:1}),w(he,{label:"联系电话"},{default:h(()=>[M(V(p.value.contactPhone),1)]),_:1}),p.value.financeContactName?(g(),b(he,{key:0,label:"财务联系人"},{default:h(()=>[M(V(p.value.financeContactName),1)]),_:1})):P("",!0),p.value.financeContactEmail?(g(),b(he,{key:1,label:"财务联系邮箱"},{default:h(()=>[M(V(p.value.financeContactEmail),1)]),_:1})):P("",!0),p.value.financeContactPhone?(g(),b(he,{key:2,label:"财务联系电话"},{default:h(()=>[M(V(p.value.financeContactPhone),1)]),_:1})):P("",!0),p.value.procurementEmail?(g(),b(he,{key:3,label:"采购联系邮箱"},{default:h(()=>[M(V(p.value.procurementEmail),1)]),_:1})):P("",!0)]),_:1}),w(le,{"content-position":"left"},{default:h(()=>[...a[12]||(a[12]=[M("业务信息",-1)])]),_:1}),w(we,{column:2,border:""},{default:h(()=>[p.value.businessNature?(g(),b(he,{key:0,label:"业务性质"},{default:h(()=>[M(V(p.value.businessNature),1)]),_:1})):P("",!0),w(he,{label:"结算货币"},{default:h(()=>[M(V(p.value.operatingCurrency),1)]),_:1}),w(he,{label:"交货地点"},{default:h(()=>[M(V(p.value.deliveryLocation),1)]),_:1}),p.value.shipCode?(g(),b(he,{key:1,label:"Ship Code"},{default:h(()=>[M(V(p.value.shipCode),1)]),_:1})):P("",!0),p.value.productTypes?(g(),b(he,{key:2,label:"产品类型",span:2},{default:h(()=>[M(V(p.value.productTypes),1)]),_:1})):P("",!0),p.value.invoiceType?(g(),b(he,{key:3,label:"发票类型"},{default:h(()=>[M(V(p.value.invoiceType),1)]),_:1})):P("",!0),p.value.paymentTermsDays?(g(),b(he,{key:4,label:"付款条款"},{default:h(()=>[M(V(p.value.paymentTermsDays)+" 天 ",1)]),_:1})):P("",!0),p.value.paymentMethods?(g(),b(he,{key:5,label:"付款方式",span:2},{default:h(()=>[M(V(p.value.paymentMethods),1)]),_:1})):P("",!0)]),_:1}),w(le,{"content-position":"left"},{default:h(()=>[...a[13]||(a[13]=[M("银行信息",-1)])]),_:1}),w(we,{column:2,border:""},{default:h(()=>[w(he,{label:"银行名称"},{default:h(()=>[M(V(p.value.bankName),1)]),_:1}),w(he,{label:"银行地址"},{default:h(()=>[M(V(p.value.bankAddress),1)]),_:1}),w(he,{label:"银行账号",span:2},{default:h(()=>[M(V(p.value.bankAccountNumber),1)]),_:1}),p.value.swiftCode?(g(),b(he,{key:0,label:"SWIFT Code",span:2},{default:h(()=>[M(V(p.value.swiftCode),1)]),_:1})):P("",!0)]),_:1}),w(le,{"content-position":"left"},{default:h(()=>[...a[14]||(a[14]=[M("提交资料",-1)])]),_:1}),R("div",Ye,[w(Q,{class:"document-card",shadow:"hover"},{header:h(()=>[R("div",Je,[a[17]||(a[17]=R("span",null,"营业执照",-1)),p.value.businessLicenseFilePath?(g(),b(N,{key:0,type:"success",size:"small"},{default:h(()=>[...a[15]||(a[15]=[M(" 已上传 ",-1)])]),_:1})):(g(),b(N,{key:1,type:"info",size:"small"},{default:h(()=>[...a[16]||(a[16]=[M("暂无",-1)])]),_:1}))])]),default:h(()=>[p.value.businessLicenseFilePath?(g(),j(Y,{key:0},[R("div",Xe,[R("div",Ke,V(p.value.businessLicenseFileName||"business-license"),1),p.value.businessLicenseFileSize?(g(),j("div",ea," 大小："+V(S(p.value.businessLicenseFileSize)),1)):P("",!0)]),R("div",aa,[w(s,{type:"primary",link:"",onClick:a[0]||(a[0]=e=>$(p.value.businessLicenseFilePath))},{default:h(()=>[...a[18]||(a[18]=[M(" 查看 / 下载 ",-1)])]),_:1})])],64)):(g(),j("p",la,"供应商未上传营业执照。"))]),_:1}),w(Q,{class:"document-card",shadow:"hover"},{header:h(()=>[R("div",ta,[a[21]||(a[21]=R("span",null,"银行开户资料",-1)),p.value.bankAccountFilePath?(g(),b(N,{key:0,type:"success",size:"small"},{default:h(()=>[...a[19]||(a[19]=[M(" 已上传 ",-1)])]),_:1})):(g(),b(N,{key:1,type:"info",size:"small"},{default:h(()=>[...a[20]||(a[20]=[M("暂无",-1)])]),_:1}))])]),default:h(()=>[p.value.bankAccountFilePath?(g(),j(Y,{key:0},[R("div",sa,[R("div",oa,V(p.value.bankAccountFileName||"bank-account-document"),1),p.value.bankAccountFileSize?(g(),j("div",ia," 大小："+V(S(p.value.bankAccountFileSize)),1)):P("",!0)]),R("div",na,[w(s,{type:"primary",link:"",onClick:a[1]||(a[1]=e=>$(p.value.bankAccountFilePath))},{default:h(()=>[...a[22]||(a[22]=[M(" 查看 / 下载 ",-1)])]),_:1})])],64)):(g(),j("p",ua,"供应商未上传银行开户资料。"))]),_:1})]),p.value.notes?(g(),j("div",ra,[w(le,{"content-position":"left"},{default:h(()=>[...a[23]||(a[23]=[M("备注",-1)])]),_:1}),w(G,{type:"info",closable:!1},{default:h(()=>[R("div",da,V(p.value.notes),1)]),_:1})])):P("",!0),A.value?(g(),j("div",ca,[w(le,{"content-position":"left"},{default:h(()=>[...a[24]||(a[24]=[M("绑定 VENDOR CODE",-1)])]),_:1}),w(G,{type:"warning",closable:!1,"show-icon":"",style:{"margin-bottom":"16px"}},{default:h(()=>[...a[25]||(a[25]=[M(" 审批流程已完成，请为此供应商绑定 VENDOR CODE ",-1)])]),_:1}),w(s,{type:"primary",icon:E(J),onClick:U},{default:h(()=>[...a[26]||(a[26]=[M(" 绑定 VENDOR CODE ",-1)])]),_:1},8,["icon"])])):P("",!0),A.value?P("",!0):(g(),j(Y,{key:2},[w(le,{"content-position":"left"},{default:h(()=>[...a[27]||(a[27]=[M("您的审批决定",-1)])]),_:1}),w(Ne,{"label-width":"100px"},{default:h(()=>[w(Ce,{label:"审批决定",required:""},{default:h(()=>[w(Ee,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e)},{default:h(()=>[w(ke,{value:"approved"},{default:h(()=>[w(l,{color:"#67c23a"},{default:h(()=>[w(E(X))]),_:1}),a[28]||(a[28]=M(" 批准 ",-1))]),_:1}),w(ke,{value:"rejected"},{default:h(()=>[w(l,{color:"#f56c6c"},{default:h(()=>[w(E(K))]),_:1}),a[29]||(a[29]=M(" 拒绝 ",-1))]),_:1}),w(ke,{value:"requestInfo"},{default:h(()=>[w(l,{color:"#e6a23c"},{default:h(()=>[w(E(ee))]),_:1}),a[30]||(a[30]=M(" 退回补充资料 ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(Ce,{label:"审批意见"},{default:h(()=>[w(De,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value=e),type:"textarea",rows:4,placeholder:"approved"===m.value?"请填写审批意见（可选）":"rejected"===m.value?"请说明驳回原因（必填）":"请填写需要供应商补充的内容（必填）"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})],64))])):(g(),j("div",He,[w(B,{description:E(t)("approvalQueue.errors.noStatus")},null,8,["description"])]))]),_:1},8,["modelValue","title"])):P("",!0),w(Ae,{modelValue:_.value,"onUpdate:modelValue":a[8]||(a[8]=e=>_.value=e),title:"绑定 VENDOR CODE",width:"500px","close-on-click-modal":!1},{footer:h(()=>[w(s,{onClick:a[7]||(a[7]=e=>_.value=!1)},{default:h(()=>[...a[35]||(a[35]=[M("取消",-1)])]),_:1}),w(s,{type:"primary",loading:D.value,disabled:!k.value.trim(),onClick:te},{default:h(()=>[...a[36]||(a[36]=[M(" 确认绑定 ",-1)])]),_:1},8,["loading","disabled"])]),default:h(()=>[w(G,{type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},{default:h(()=>[a[33]||(a[33]=M(" 请为供应商 ",-1)),R("strong",null,V(c.value?.companyName),1),a[34]||(a[34]=M(" 绑定 VENDOR CODE ",-1))]),_:1}),w(Ne,{"label-width":"120px"},{default:h(()=>[w(Ce,{label:"VENDOR CODE",required:""},{default:h(()=>[w(De,{modelValue:k.value,"onUpdate:modelValue":a[6]||(a[6]=e=>k.value=e),placeholder:"请输入 7 位供应商代码",maxlength:"7","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-936ac8da"]]);export{va as default};
