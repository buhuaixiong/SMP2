import{d as e,s as a,h as l,C as s,T as t,b as i,e as r,j as u,k as n,O as o,t as d,A as c,z as v,y as p,x as f,f as y,U as m,V as _,q as k,o as b,_ as g}from"./index-CyQdnTIC.js";import{E as h}from"./el-link-CQNmh80k.js";import{E as q}from"./el-alert-BXhB-eTB.js";import{E as w}from"./el-card-DJj_OhI8.js";import{E as x,a as E}from"./el-descriptions-item-C3lsVx1m.js";const j={class:"rfq-invitation-page"},z={class:"invitation-container"},C={key:0,class:"loading-box"},I={key:1,class:"error-box"},R={key:2,class:"content"},A={class:"action-buttons"},P={class:"footer-hint"},U={key:0},N=g(e({__name:"RfqInvitationView",setup(e){const g=a(),N=k(),Q=g.params.token,V=l(!0),$=l(""),D=l(!1),F=l({}),H=l(""),L=l(""),O=()=>{N.push({path:"/login",query:{redirect:`/rfq/${F.value.id}`}})},S=()=>{N.push({path:"/supplier-registration",query:{token:Q,rfqId:F.value.id}})};return s(async()=>{try{const e=await t.get(`/api/public/rfq-preview/${Q}`);e.data.success&&(D.value=e.data.isRegistered,F.value=e.data.rfqPreview,H.value=e.data.message,L.value=e.data.recipientEmail)}catch(e){console.error("[RFQ Invitation] Error:",e),404===e.response?.status?$.value="æ— æ•ˆçš„é‚€è¯·é“¾æŽ¥":403===e.response?.status?$.value="é‚€è¯·é“¾æŽ¥å·²è¿‡æœŸ":$.value=e.response?.data?.message||"åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•"}finally{V.value=!1}}),(e,a)=>{const l=o,s=c,t=E,k=x,g=w,N=q,Q=h;return b(),i("div",j,[r("div",z,[V.value?(b(),i("div",C,[u(l,{class:"is-loading",size:50,color:"#e6a23c"},{default:n(()=>[u(y(m))]),_:1}),a[0]||(a[0]=r("p",null,"åŠ è½½ä¸­...",-1))])):$.value?(b(),i("div",I,[u(l,{size:60,color:"#f56c6c"},{default:n(()=>[u(y(_))]),_:1}),r("h2",null,d($.value),1),u(s,{onClick:O},{default:n(()=>[...a[1]||(a[1]=[f("è¿”å›žç™»å½•é¡µ",-1)])]),_:1})])):(b(),i("div",R,[a[10]||(a[10]=r("div",{class:"header"},[r("h1",null,"ðŸŽ¯ æ‚¨æ”¶åˆ°äº†ä¸€å°è¯¢ä»·é‚€è¯·"),r("p",null,"Request for Quotation Invitation")],-1)),u(g,{shadow:"hover",class:"rfq-card"},{header:n(()=>[...a[2]||(a[2]=[r("span",{class:"card-title"},"é¡¹ç›®ä¿¡æ¯",-1)])]),default:n(()=>[u(k,{column:1,border:""},{default:n(()=>[u(t,{label:"é¡¹ç›®åç§°"},{default:n(()=>[r("strong",null,d(F.value.title),1)]),_:1}),u(t,{label:"é¡¹ç›®ç¼–å·"},{default:n(()=>[f(" #"+d(F.value.id),1)]),_:1}),u(t,{label:"é‚€è¯·äºº"},{default:n(()=>[f(d(F.value.inviterName),1)]),_:1}),F.value.deliveryPeriod?(b(),v(t,{key:0,label:"äº¤è´§æœŸ"},{default:n(()=>[f(d(F.value.deliveryPeriod)+" å¤© ",1)]),_:1})):p("",!0),F.value.budgetAmount?(b(),v(t,{key:1,label:"é¢„ç®—é‡‘é¢"},{default:n(()=>[f(d(F.value.budgetAmount)+" "+d(F.value.currency),1)]),_:1})):p("",!0),F.value.validUntil?(b(),v(t,{key:2,label:"æˆªæ­¢æ—¶é—´"},{default:n(()=>{return[f(d((e=F.value.validUntil,e?new Date(e).toLocaleString("zh-CN"):"-")),1)];var e}),_:1})):p("",!0),F.value.description?(b(),v(t,{key:3,label:"é¡¹ç›®æè¿°"},{default:n(()=>[f(d(F.value.description),1)]),_:1})):p("",!0)]),_:1})]),_:1}),D.value?(b(),v(N,{key:0,type:"info",closable:!1,"show-icon":"",class:"alert-box"},{title:n(()=>[...a[3]||(a[3]=[r("strong",null,"æ‚¨å·²æ˜¯æ³¨å†Œä¾›åº”å•†",-1)])]),default:n(()=>[r("p",null,d(H.value),1)]),_:1})):(b(),v(N,{key:1,type:"warning",closable:!1,"show-icon":"",class:"alert-box"},{title:n(()=>[...a[4]||(a[4]=[r("strong",null,"âš ï¸ å®Œæˆä¾›åº”å•†æ³¨å†ŒåŽå³å¯ï¼š",-1)])]),default:n(()=>[a[5]||(a[5]=r("ul",null,[r("li",null,"âœ“ æŸ¥çœ‹å®Œæ•´è¯¢ä»·å•è¯¦æƒ…"),r("li",null,"âœ“ åœ¨çº¿å¡«å†™å¹¶æäº¤æŠ¥ä»·"),r("li",null,"âœ“ å®žæ—¶è·Ÿè¸ªæŠ¥ä»·çŠ¶æ€")],-1))]),_:1})),r("div",A,[D.value?(b(),v(s,{key:0,type:"primary",size:"large",onClick:O},{default:n(()=>[...a[6]||(a[6]=[f(" å‰å¾€ç™»å½• ",-1)])]),_:1})):(b(),v(s,{key:1,type:"warning",size:"large",onClick:S},{default:n(()=>[...a[7]||(a[7]=[f(" ðŸ“ ç«‹å³æ³¨å†Œå¹¶æŸ¥çœ‹å®Œæ•´è¯¢ä»· ",-1)])]),_:1}))]),r("div",P,[D.value?p("",!0):(b(),i("p",U,[a[9]||(a[9]=f(" å·²æœ‰è´¦å·ï¼Ÿ",-1)),u(Q,{type:"primary",onClick:O},{default:n(()=>[...a[8]||(a[8]=[f("ç‚¹å‡»ç™»å½•",-1)])]),_:1})]))])]))])])}}}),[["__scopeId","data-v-ed68d3fa"]]);export{N as default};
