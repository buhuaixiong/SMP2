import{d as e,u as l,c as a,b as t,e as o,z as i,y as n,j as r,t as s,f as u,k as m,x as d,b3 as c,A as p,E as b,aM as f,o as h,_ as V}from"./index-CKlweL-F.js";import{E as v,a as y}from"./el-table-column-BWGfC8Ra.js";import"./el-scrollbar-XGQhG3En.js";/* empty css                 */import{E as q}from"./el-input-number-BVCDRK4o.js";import"./el-tag-DywyWHs3.js";import{E as g,a as U}from"./el-select-79r3EY9c.js";import{E as w}from"./el-alert-CxZeCMr_.js";import"./_baseClone-gXXhZHtw.js";import"./castArray-rcXHEszK.js";import"./debounce-B4YRQ3JS.js";import"./index-DUOC0fDR.js";const I={class:"rfq-line-items-editor"},_={class:"editor-header"},C={key:2,class:"summary-bar"},j=V(e({__name:"RfqLineItemsEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:V}){const j=e,N=V,{t:x}=l(),z=a({get:()=>j.modelValue||[],set:e=>N("update:modelValue",e)});function P(){const e={lineNumber:z.value.length+1,materialCategory:"",brand:"",itemName:"",specifications:"",quantity:1,unit:"件",estimatedUnitPrice:void 0,currency:"CNY",parameters:"",notes:""};z.value=[...z.value,e]}function k(){z.value=[...z.value]}function E(){let e=0,l="CNY";return z.value.forEach(a=>{a.quantity&&a.estimatedUnitPrice&&(e+=a.quantity*a.estimatedUnitPrice,a.currency&&(l=a.currency))}),e>0?`${e.toFixed(2)} ${l}`:"-"}return(e,l)=>{const a=p,V=w,j=v,N=U,Y=g,R=b,L=q,$=y;return h(),t("div",I,[o("div",_,[o("h3",null,s(u(x)("rfq.lineItems.title")),1),r(a,{type:"primary",icon:u(c),onClick:P},{default:m(()=>[d(s(u(x)("rfq.lineItems.addItem")),1)]),_:1},8,["icon"])]),0===z.value.length?(h(),i(V,{key:0,title:u(x)("rfq.lineItems.emptyHint"),type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"16px"}},null,8,["title"])):(h(),i($,{key:1,data:z.value,border:"",stripe:"",style:{width:"100%"},"max-height":"500px"},{default:m(()=>[r(j,{type:"index",label:u(x)("rfq.items.lineNumber"),width:"70",align:"center"},null,8,["label"]),r(j,{label:u(x)("rfq.lineItems.materialCategory"),width:"120"},{default:m(({row:e})=>[r(Y,{modelValue:e.materialCategory,"onUpdate:modelValue":l=>e.materialCategory=l,placeholder:u(x)("rfq.lineItems.selectCategory"),size:"small",onChange:k},{default:m(()=>[r(N,{value:"equipment",label:u(x)("rfq.distributionCategory.equipment")},null,8,["label"]),r(N,{value:"consumables",label:u(x)("rfq.lineItems.consumables")},null,8,["label"]),r(N,{value:"hardware",label:u(x)("rfq.distributionCategory.hardware")},null,8,["label"]),r(N,{value:"other",label:u(x)("common.other")},null,8,["label"])]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:u(x)("rfq.lineItems.brand"),width:"120"},{default:m(({row:e})=>[r(R,{modelValue:e.brand,"onUpdate:modelValue":l=>e.brand=l,placeholder:u(x)("rfq.lineItems.brandPlaceholder"),size:"small",onInput:k},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:u(x)("rfq.items.itemName"),"min-width":"150"},{default:m(({row:e})=>[r(R,{modelValue:e.itemName,"onUpdate:modelValue":l=>e.itemName=l,placeholder:u(x)("rfq.lineItems.itemNameRequired"),size:"small",onInput:k},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:u(x)("rfq.lineItems.specifications"),"min-width":"150"},{default:m(({row:e})=>[r(R,{modelValue:e.specifications,"onUpdate:modelValue":l=>e.specifications=l,placeholder:u(x)("rfq.lineItems.specificationsPlaceholder"),size:"small",onInput:k},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:u(x)("rfq.items.quantity"),width:"100"},{default:m(({row:e})=>[r(L,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,min:.01,precision:2,size:"small","controls-position":"right",style:{width:"100%"},onChange:k},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),r(j,{label:u(x)("rfq.lineItems.unit"),width:"100"},{default:m(({row:e})=>[r(Y,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,placeholder:u(x)("rfq.lineItems.selectUnit"),size:"small",filterable:"","allow-create":"",onChange:k},{default:m(()=>[r(N,{value:"件",label:"件"}),r(N,{value:"个",label:"个"}),r(N,{value:"台",label:"台"}),r(N,{value:"套",label:"套"}),r(N,{value:"箱",label:"箱"}),r(N,{value:"包",label:"包"}),r(N,{value:"kg",label:"kg"}),r(N,{value:"g",label:"g"}),r(N,{value:"L",label:"L"}),r(N,{value:"m",label:"m"}),r(N,{value:"m²",label:"m²"}),r(N,{value:"m³",label:"m³"})]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:u(x)("rfq.items.estimatedPrice"),width:"120"},{default:m(({row:e})=>[r(L,{modelValue:e.estimatedUnitPrice,"onUpdate:modelValue":l=>e.estimatedUnitPrice=l,min:0,precision:2,size:"small","controls-position":"right",style:{width:"100%"},onChange:k},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),r(j,{label:u(x)("rfq.lineItems.currency"),width:"100"},{default:m(({row:e})=>[r(Y,{modelValue:e.currency,"onUpdate:modelValue":l=>e.currency=l,size:"small",onChange:k},{default:m(()=>[r(N,{value:"CNY",label:"CNY"}),r(N,{value:"USD",label:"USD"}),r(N,{value:"EUR",label:"EUR"}),r(N,{value:"JPY",label:"JPY"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),r(j,{label:u(x)("rfq.lineItems.notes"),"min-width":"120"},{default:m(({row:e})=>[r(R,{modelValue:e.notes,"onUpdate:modelValue":l=>e.notes=l,placeholder:u(x)("rfq.lineItems.notesPlaceholder"),size:"small",onInput:k},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),r(j,{label:u(x)("common.actions"),width:"80",fixed:"right",align:"center"},{default:m(({$index:e})=>[r(a,{type:"danger",icon:u(f),size:"small",link:"",onClick:l=>function(e){const l=[...z.value];l.splice(e,1),l.forEach((e,l)=>{e.lineNumber=l+1}),z.value=l}(e)},null,8,["icon","onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),z.value.length>0?(h(),t("div",C,[o("span",null,s(u(x)("rfq.lineItems.totalItems"))+": "+s(z.value.length),1),o("span",null,s(u(x)("rfq.lineItems.estimatedTotal"))+": "+s(E()),1)])):n("",!0)])}}}),[["__scopeId","data-v-bea94743"]]);export{j as default};
