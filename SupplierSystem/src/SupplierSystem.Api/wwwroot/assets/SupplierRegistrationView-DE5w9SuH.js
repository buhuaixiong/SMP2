const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SupplierRegistrationStepProfile-9QFbum93.js","assets/index-BqVgmY2a.js","assets/index-D5VxGV9f.css","assets/SupplierRegistrationStepContacts-DDgXd0S_.js","assets/SupplierRegistrationStepBusiness-CVdDMOH1.js","assets/SupplierRegistrationStepFinance-DWPByF_K.js","assets/SupplierRegistrationStepBanking-DXRJkedl.js","assets/SupplierRegistrationStepDocuments-BJWuEiTI.js","assets/el-alert-ZQ_1rrnl.js","assets/el-alert-G57rL0jl.css","assets/useNotification-CGrCsW-s.js","assets/SupplierRegistrationStepDocuments-DYeTdDiy.css","assets/SupplierRegistrationSubmissionCard-BuITL115.js"])))=>i.map(i=>d[i]);
import{d as e,b as a,e as t,t as i,o as s,j as l,y as n,z as r,A as o,k as u,x as c,u as p,g as d,h as m,c as v,i as g,B as y,C as f,s as b,D as h,f as w,G as k,H as R,q as A,I as C,F as S,r as _,E as N,J as T,K as E,L as O,M as D,N as P,_ as F}from"./index-BqVgmY2a.js";import{E as M,a as L}from"./el-form-item-D2sI2QvI.js";/* empty css                 */import{E as j,a as x}from"./el-step-Bg6XKvA8.js";import{E as I}from"./el-alert-ZQ_1rrnl.js";import{fetchSupplierRegistrationDraft as B,saveSupplierRegistrationDraft as U,submitSupplierRegistration as q}from"./public-JFDabKwE.js";import{v as V}from"./whitelistBlacklist-BkL9jhbo.js";import{P as $}from"./PageHeader-e2pKlIF2.js";import{u as z}from"./useNotification-CGrCsW-s.js";import"./castArray-B2VphuOT.js";import"./_baseClone-DnYTnrzK.js";import"./index-Hw__zmIm.js";const Y={class:"invitation-banner"},W={class:"banner-content"},J=e({__name:"SupplierRegistrationInvitationBanner",props:{translateOr:{type:Function}},setup:e=>(l,n)=>(s(),a("div",Y,[n[0]||(n[0]=t("div",{class:"banner-icon"},"ðŸ“¨",-1)),t("div",W,[t("h3",null,i(e.translateOr("supplierRegistration.invitation.title","RFQ Invitation Linked")),1),t("p",null,i(e.translateOr("supplierRegistration.invitation.subtitle","Complete the wizard to unlock RFQ details and tracking.")),1)])]))}),Q={class:"wizard-footer"},H={class:"footer-left"},G={key:0,class:"draft-meta"},K={class:"footer-right"},X=e({__name:"SupplierRegistrationWizardFooter",props:{translateOr:{type:Function},isFirstStep:{type:Boolean},isLastStep:{type:Boolean},loading:{type:Boolean},previewLoading:{type:Boolean},draftSaving:{type:Boolean},draftLoading:{type:Boolean},draftExpiresAt:{},formatDateTime:{type:Function},handleSaveDraft:{type:Function},goPreviousStep:{type:Function},goNextStep:{type:Function},handlePreview:{type:Function},handleSubmit:{type:Function}},setup:e=>(p,d)=>{const m=o;return s(),a("div",Q,[t("div",H,[l(m,{class:"ghost-button",loading:e.draftSaving,disabled:e.draftSaving||e.draftLoading||e.loading,onClick:e.handleSaveDraft},{default:u(()=>[c(i(e.translateOr("supplierRegistration.actions.saveDraft","Save Draft")),1)]),_:1},8,["loading","disabled","onClick"]),e.draftExpiresAt?(s(),a("span",G,i(e.translateOr("supplierRegistration.draft.expiresAt","Expires"))+": "+i(e.formatDateTime(e.draftExpiresAt)),1)):n("",!0),e.isFirstStep?n("",!0):(s(),r(m,{key:1,onClick:e.goPreviousStep,disabled:e.loading||e.previewLoading},{default:u(()=>[c(i(e.translateOr("common.previous","Previous")),1)]),_:1},8,["onClick","disabled"]))]),t("div",K,[e.isLastStep?(s(),r(m,{key:0,loading:e.previewLoading,class:"ghost-button",onClick:e.handlePreview},{default:u(()=>[c(i(e.translateOr("supplierRegistration.actions.previewApproval","Preview Approval Flow")),1)]),_:1},8,["loading","onClick"])):n("",!0),l(m,{type:"primary",loading:e.loading,onClick:d[0]||(d[0]=a=>e.isLastStep?e.handleSubmit():e.goNextStep())},{default:u(()=>[c(i(e.isLastStep?e.translateOr("supplierRegistration.actions.submit","Submit Registration"):e.translateOr("common.next","Next")),1)]),_:1},8,["loading"])])])}}),Z=e=>{if(!e)return"";const a=new Date(e);return Number.isNaN(a.getTime())?"":a.toLocaleString()},ee=e=>{const a=(e??"").trim();return a.length?a:void 0},ae=e=>null!=e&&"object"==typeof e&&!Array.isArray(e),te=(e,a)=>{if(e===a)return!0;if(Array.isArray(e)&&Array.isArray(a))return e.length===a.length&&e.every((e,t)=>te(e,a[t]));if(ae(e)&&ae(a)){const t=Object.keys(e),i=Object.keys(a);return t.length===i.length&&t.every(t=>te(e[t],a[t]))}return!1},ie={class:"registration-page"},se={class:"registration-header"},le={class:"registration-content"},ne={key:2,class:"wizard-card"},re={class:"wizard-header"},oe={class:"wizard-body"},ue={key:0,class:"tracking-account-password-note tracking-account-password-note--success"},ce={key:1,class:"tracking-account-password-note"},pe={class:"tracking-account-actions"},de="supplierRegistrationDraftToken",me=F(e({__name:"SupplierRegistrationView",setup(e){const F=z(),Y=k(()=>T(()=>import("./SupplierRegistrationStepProfile-9QFbum93.js"),__vite__mapDeps([0,1,2]))),W=k(()=>T(()=>import("./SupplierRegistrationStepContacts-DDgXd0S_.js"),__vite__mapDeps([3,1,2]))),Q=k(()=>T(()=>import("./SupplierRegistrationStepBusiness-CVdDMOH1.js"),__vite__mapDeps([4,1,2]))),H=k(()=>T(()=>import("./SupplierRegistrationStepFinance-DWPByF_K.js"),__vite__mapDeps([5,1,2]))),G=k(()=>T(()=>import("./SupplierRegistrationStepBanking-DXRJkedl.js"),__vite__mapDeps([6,1,2]))),K=k(()=>T(()=>import("./SupplierRegistrationStepDocuments-BJWuEiTI.js"),__vite__mapDeps([7,1,2,8,9,10,11]))),ae=k(()=>T(()=>import("./SupplierRegistrationSubmissionCard-BuITL115.js"),__vite__mapDeps([12,1,2]))),{t:me}=p(),ve=b(),ge=A();d();const ye=(e,a)=>((e,a,t)=>{const i=e(a);return i===a?t:i})(me,e,a),fe=[{key:"profile",title:ye("supplierRegistration.stepTitles.profile","Company Profile"),description:ye("supplierRegistration.stepDescriptions.profile","Provide basic company identifiers.")},{key:"contacts",title:ye("supplierRegistration.stepTitles.contacts","Registration & Contacts"),description:ye("supplierRegistration.stepDescriptions.contacts","Share legal addresses and key contacts.")},{key:"business",title:ye("supplierRegistration.stepTitles.business","Business Scope"),description:ye("supplierRegistration.stepDescriptions.business","Outline your operating coverage.")},{key:"finance",title:ye("supplierRegistration.stepTitles.finance","Finance & Payment"),description:ye("supplierRegistration.stepDescriptions.finance","Define billing and payment preferences.")},{key:"banking",title:ye("supplierRegistration.stepTitles.banking","Bank & Submission"),description:ye("supplierRegistration.stepDescriptions.banking","Confirm bank details and preview approvals.")},{key:"documents",title:ye("supplierRegistration.stepTitles.documents","Supporting Documents"),description:ye("supplierRegistration.stepDescriptions.documents","Upload business license and bank account proof.")}],be=m(0),he=m(new Set),we=v(()=>0===be.value),ke=v(()=>be.value===fe.length-1),Re=g({companyName:"",englishName:"",chineseName:"",registeredOffice:"",businessRegistrationNumber:"",businessAddress:"",companyType:"limited",companyTypeOther:"",supplierClassification:"DM",operatingCurrency:"RMB",deliveryLocation:"",shipCode:"",productOrigin:"",businessNature:"",contactName:"",contactEmail:"",procurementEmail:"",contactPhone:"",financeContactName:"",financeContactEmail:"",financeContactPhone:"",invoiceType:"general_vat",paymentTermsDays:"",paymentMethods:[],paymentMethodsOther:"",bankName:"",bankAddress:"",bankAccountNumber:"",swiftCode:"",notes:"",businessLicenseFile:null,bankAccountFile:null}),Ae=e=>{Object.assign(Re,e)},Ce=m(!1),Se=m(!1),_e=m(null),Ne=m(null),Te=m(null),Ee=m(!1),Oe=m(!1),De=m(null),Pe=m(null),Fe=m(null),Me=m([]),Le=m(!1);let je=null;const xe=m(""),Ie=m(""),Be=m(!1),Ue=m(""),qe=m(""),Ve=m(!1),$e=m(null),ze=m(null),Ye=m(!1),We=m(!1),Je=g({username:"",password:"",message:""}),Qe=m(!1),He=m(!1),Ge="https://quickchart.io".replace(/\/+$/,"");let Ke=null,Xe=null;const Ze=v(()=>{if(!$e.value)return"";const e=$e.value.password??"";return Ye.value?e:e.replace(/./g,"?")}),ea=v(()=>$e.value&&Ge?`${Ge}/qr?text=${encodeURIComponent(`user=${$e.value.username}&pass=${$e.value.password}`)}`:""),aa=()=>{Ke&&(clearTimeout(Ke),Ke=null)},ta=()=>{Xe&&(clearTimeout(Xe),Xe=null)},ia=e=>{e.trackingUsername&&e.trackingPassword&&(Je.username=e.trackingUsername,Je.password=e.trackingPassword,Je.message=e.trackingMessage||e.message||ye("supplierRegistration.tempAccount.instructions","Use the credentials below to track your approval progress."),Qe.value=!1,We.value=!0,"undefined"!=typeof window&&(aa(),Ke=setTimeout(()=>{Je.password=""},3e5)))},sa=e=>{We.value=!1,Je.username="",Je.password="",Je.message="",Qe.value=!1,ta(),aa(),!1!==e?.redirect&&ge.push("/login")},la=new Set(["companyName","englishName","chineseName","bankName","bankAddress","bankAccountNumber","swiftCode","financeContactName","financeContactEmail","financeContactPhone","invoiceType","paymentTermsDays","paymentMethods"]),na=v(()=>ye("supplierRegistration.categoryA.label","Category A")),ra=v(()=>ye("supplierRegistration.categoryA.tooltip","Editing after registration triggers full approval.")),oa=e=>la.has(e),ua=[{value:"CA",label:"CA - Cash in Advance"},{value:"PO",label:"PO - TERM BY PO"},{value:"00",label:"00 - COD"},{value:"04",label:"04 - 1% 10 Net 30"},{value:"05",label:"05 - 1% 15 Net 30"},{value:"07",label:"07 - 7 days net"},{value:"1A",label:"1A - 120 days AMS"},{value:"1B",label:"1B - 150 days AMS"},{value:"1C",label:"1C - 180 days AMS"},{value:"1D",label:"1D - 210 days AMS"},{value:"1E",label:"1E - 240 days AMS"},{value:"10",label:"10 - 10 days net"},{value:"12",label:"12 - 120 days net"},{value:"14",label:"14 - 14 days net"},{value:"15",label:"15 - 150 days net"},{value:"16",label:"16 - 105 days net"},{value:"18",label:"18 - 180 days net"},{value:"21",label:"21 - 21 days net"},{value:"3A",label:"3A - 30 days AMS"},{value:"3B",label:"3B - 30 Days 10th Dy"},{value:"30",label:"30 - 30 days net"},{value:"32",label:"32 - Net 15 Days"},{value:"33",label:"33 - Net 135 days"},{value:"35",label:"35 - 35 days net"},{value:"4A",label:"4A - 45 days AMS"},{value:"40",label:"40 - NET 40 DAYS"},{value:"45",label:"45 - 45 days net"},{value:"5A",label:"5A - 5 days net"},{value:"52",label:"52 - Net 115 Days"},{value:"55",label:"55 - 55 days net"},{value:"6A",label:"6A - 60 days AMS"},{value:"60",label:"60 - 60 days net"},{value:"65",label:"65 - 65 days net"},{value:"68",label:"68 - Net 195 Days"},{value:"7A",label:"7A - 75 days AMS"},{value:"70",label:"70 - 70 days net"},{value:"75",label:"75 - 75 DAYS NET"},{value:"76",label:"76 - 1.5% Net 75"},{value:"9A",label:"9A - 90 days AMS"},{value:"90",label:"90 - 90 days net"}],ca=new Set(ua.map(e=>e.value)),pa=v(()=>ua),da=v(()=>[{value:"cash",label:ye("supplierRegistration.paymentMethods.cash","Cash")},{value:"cheque",label:ye("supplierRegistration.paymentMethods.cheque","Cheque / Banker Draft")},{value:"wire",label:ye("supplierRegistration.paymentMethods.wire","Wire Transfer")},{value:"other",label:ye("supplierRegistration.paymentMethods.other","Other")}]),ma=[["companyName","companyType","supplierClassification","operatingCurrency"],["registeredOffice","businessAddress","businessRegistrationNumber","contactName","contactEmail","contactPhone","procurementEmail","financeContactName","financeContactPhone"],["deliveryLocation","shipCode","productOrigin"],["invoiceType","paymentMethods"],["bankName","bankAddress","bankAccountNumber"],["businessLicenseFile","bankAccountFile"]],va=()=>{ha(be.value)&&(ke.value||(be.value+=1))},ga=()=>{be.value>0&&(be.value-=1)},ya=()=>JSON.parse(JSON.stringify({...Re,paymentMethods:[...Re.paymentMethods]})),fa=()=>{je&&(clearTimeout(je),je=null)},ba=()=>{Ce.value||Ee.value||Oe.value||!Me.value.length||(fa(),"undefined"!=typeof window&&(je=window.setTimeout(()=>{je=null,Sa({silent:!0})},6e3)))},ha=e=>{const a=(ma[e]||[]).filter(e=>!(e=>{const a=Re[e];if(Array.isArray(a))return a.length>0;if(a&&"object"==typeof a){if("content"in a){const e=a.content;return"string"==typeof e&&e.trim().length>0}return Object.keys(a).length>0}return String(a??"").trim().length>0})(e));return a.length?(he.value=new Set(a),F.warning(ye("supplierRegistration.validation.completeStep","Please complete all required fields for this step before continuing.")),!1):(he.value=new Set,0!==e||"other"!==Re.companyType||Re.companyTypeOther.trim()?1===e&&(xe.value||Ie.value)?(F.error(ye("supplierRegistration.validation.resolveBlacklist","Please resolve the highlighted blacklist warnings before continuing.")),!1):!(3===e&&Re.paymentMethods.includes("other")&&!Re.paymentMethodsOther.trim())||(F.warning(ye("supplierRegistration.validation.describeOtherPayment","Please describe the additional payment method.")),!1):(F.warning(ye("supplierRegistration.validation.specifyCompanyType","Please specify the company type.")),!1))},wa=()=>String(Re.paymentTermsDays??"").trim().toUpperCase(),ka=()=>{const e=wa();if(!e)return!0;if(ca.has(e))return!0;const a=Number(e);return Number.isFinite(a)&&a>=0&&a<=365},Ra=()=>({companyName:Re.companyName.trim(),englishName:ee(Re.englishName),chineseName:ee(Re.chineseName),companyType:Re.companyType,companyTypeOther:ee(Re.companyTypeOther),supplierClassification:Re.supplierClassification,authorizedCapital:void 0,issuedCapital:void 0,directors:void 0,owners:void 0,registeredOffice:Re.registeredOffice.trim(),businessRegistrationNumber:Re.businessRegistrationNumber.trim(),businessAddress:Re.businessAddress.trim(),businessPhone:void 0,businessFax:void 0,contactName:Re.contactName.trim(),contactEmail:Re.contactEmail.trim(),procurementEmail:Re.procurementEmail.trim(),contactPhone:Re.contactPhone.trim(),financeContactName:Re.financeContactName.trim(),financeContactEmail:ee(Re.financeContactEmail),financeContactPhone:Re.financeContactPhone.trim(),businessNature:ee(Re.businessNature),operatingCurrency:Re.operatingCurrency,deliveryLocation:Re.deliveryLocation.trim(),shipCode:Re.shipCode.trim(),productOrigin:Re.productOrigin.trim(),productTypes:void 0,invoiceType:Re.invoiceType||void 0,paymentTermsDays:wa()||void 0,paymentMethods:[...Re.paymentMethods],paymentMethodsOther:ee(Re.paymentMethodsOther),bankName:Re.bankName.trim(),bankAddress:Re.bankAddress.trim(),bankAccountNumber:Re.bankAccountNumber.trim(),swiftCode:ee(Re.swiftCode),notes:ee(Re.notes),businessLicenseFile:Re.businessLicenseFile??void 0,bankAccountFile:Re.bankAccountFile??void 0}),Aa=e=>{const a=new Date(e);return Number.isNaN(a.getTime())?e:a.toLocaleString()},Ca=async()=>{if(ke.value&&ha(be.value))if(ka()){Se.value=!0,_e.value=null;try{const e=Ra(),a=await E({payload:e,changedFields:[...Me.value]});Ne.value=a}catch(e){console.error("Failed to preview approval flow:",e),_e.value=e instanceof Error?e.message:ye("supplierRegistration.preview.failed","Unable to generate approval preview at this time.")}finally{Se.value=!1}}else F.warning(ye("supplierRegistration.validation.paymentTerms","Please select a valid payment term."))},Sa=async({silent:e=!1}={})=>{if(Me.value.length){Ee.value=!0;try{const t=ya(),i=(a=be.value,fe[a]?.key??null),s=await U({draftToken:De.value??void 0,form:t,lastStep:i});De.value=s.draftToken,Pe.value=s.expiresAt??null,"undefined"!=typeof window&&window.localStorage.setItem(de,s.draftToken);const l=ya();Me.value=((e,a)=>{const t=new Set([...Object.keys(e),...Object.keys(a)]);return Array.from(t).filter(t=>!te(e[t],a[t]))})(t,l),Fe.value=null,Me.value.length&&ba(),e||F.success(ye("supplierRegistration.draft.saveSuccess","Draft saved successfully."))}catch(t){console.error("Failed to save draft:",t);const a=t instanceof Error?t.message:ye("supplierRegistration.draft.saveFailed","Unable to save draft.");Fe.value=a,e||F.error(a),ba()}finally{Ee.value=!1}var a}else e||F.info(ye("supplierRegistration.draft.noChanges","Nothing new to save."))},_a=async e=>{Oe.value=!0;try{const a=await B(e);De.value=a.draftToken,Pe.value=a.expiresAt??null,(e=>{const a={companyName:"",englishName:"",chineseName:"",registeredOffice:"",businessRegistrationNumber:"",businessAddress:"",companyType:"limited",companyTypeOther:"",supplierClassification:"DM",operatingCurrency:"RMB",deliveryLocation:"",shipCode:"",productOrigin:"",businessNature:"",contactName:"",contactEmail:"",procurementEmail:"",contactPhone:"",financeContactName:"",financeContactEmail:"",financeContactPhone:"",invoiceType:"general_vat",paymentTermsDays:"",paymentMethods:[],paymentMethodsOther:"",bankName:"",bankAddress:"",bankAccountNumber:"",swiftCode:"",notes:"",businessLicenseFile:null,bankAccountFile:null};Le.value=!0;const t=Re,i=e;Object.entries(a).forEach(([e,a])=>{const s=i[e];if(Array.isArray(a)){const i=Array.isArray(s)?[...s]:[...a];t[e]=i}else if("string"==typeof a){const a=null==s?"":String(s);t[e]="paymentTermsDays"===e?a.trim().toUpperCase():a}else t[e]=s??a}),Ne.value=null,_e.value=null,Me.value=[],Fe.value=null,$e.value=null,ze.value=null,Ye.value=!1,fa(),C(()=>{Le.value=!1})})(a.form),Te.value=null,$e.value=null,ze.value=null,Ye.value=!1;const t=a.lastStep?fe.findIndex(e=>e.key===a.lastStep):-1;t>=0&&(be.value=t),"undefined"!=typeof window&&window.localStorage.setItem(de,a.draftToken)}catch(a){console.error("Failed to load draft:",a),Fe.value=a instanceof Error?a.message:ye("supplierRegistration.draft.loadFailed","Unable to load saved draft."),De.value=null,Pe.value=null,"undefined"!=typeof window&&window.localStorage.removeItem(de)}finally{Oe.value=!1}},Na=async(e,a)=>{const t=ye("supplierRegistration.tempAccount.copied",`${a} copied to clipboard.`),i=ye("supplierRegistration.tempAccount.copyFailed","Unable to copy to clipboard."),s=await(async e=>{if("undefined"!=typeof navigator&&navigator.clipboard?.writeText)try{return await navigator.clipboard.writeText(e),!0}catch{}if("undefined"==typeof document)return!1;const a=document.createElement("textarea");a.value=e,a.style.position="fixed",a.style.opacity="0",document.body.appendChild(a),a.focus(),a.select();let t=!1;try{t=document.execCommand("copy")}finally{document.body.removeChild(a)}return t})(e);return s?F.success(t):F.warning(i),s},Ta=async(e,a,t={})=>{if(!e)return;await Na(e,a)&&t.markPassword&&(Qe.value=!0,ta(),Xe=setTimeout(()=>{Qe.value=!1,Xe=null},3e3))};y(Re,(e,a)=>{Le.value||(Object.keys(e).forEach(t=>{const i=t;e[i]===a?.[i]||Me.value.includes(t)||Me.value.push(t)}),Ne.value&&(Ne.value=null,_e.value=null),ba())},{deep:!0});const Ea=async()=>{const e=Re.businessRegistrationNumber.trim();if(e){Be.value=!0;try{const a=await V({credit_code:e});a.is_blacklisted?xe.value="critical"===a.severity?ye("supplierRegistration.validation.blacklistCreditCode","This registration number is blacklisted."):ye("supplierRegistration.validation.blacklistCreditCodeReason","This registration number requires manual review."):xe.value=""}catch(a){console.error(ye("supplierRegistration.errors.validateCreditCode","Validation failed"),a),xe.value=""}finally{Be.value=!1}}else xe.value=""},Oa=async()=>{const e=Re.contactEmail.trim();if(e){Be.value=!0;try{const a=await V({email:e});a.is_blacklisted?Ie.value="critical"===a.severity?ye("supplierRegistration.validation.blacklistEmail","This email is blacklisted."):ye("supplierRegistration.validation.blacklistEmailReason","This email requires manual review."):Ie.value=""}catch(a){console.error(ye("supplierRegistration.errors.validateEmail","Email validation failed"),a),Ie.value=""}finally{Be.value=!1}}else Ie.value=""},Da=async()=>{if(ha(be.value)&&ka())if(xe.value||Ie.value)F.error(ye("supplierRegistration.validation.resolveBlacklist","Please resolve the highlighted blacklist warnings before continuing."));else{$e.value=null,ze.value=null,Ye.value=!1,Ce.value=!0;try{const a=await q(Ra());if(Te.value=a,Ne.value=null,_e.value=null,Me.value=[],await(async e=>{const a=[];if(e.applicationId&&a.push({label:ye("supplierRegistration.confirmation.applicationId","Application ID"),value:String(e.applicationId)}),e.supplierCode&&a.push({label:ye("supplierRegistration.confirmation.supplierId","Supplier ID"),value:e.supplierCode}),e.trackingUrl){const t="undefined"!=typeof window?window.location.origin:"",i=t?`${t}${e.trackingUrl}`:e.trackingUrl;a.push({label:ye("supplierRegistration.confirmation.viewStatus","View Application Status"),value:i})}const t=D("div",{class:"registration-success-dialog__body"},[D("p",{class:"registration-success-dialog__intro"},ye("supplierRegistration.confirmation.successMessage","Thank you for submitting your supplier registration.")),a.length?D("ul",{class:"registration-success-dialog__list"},a.map(e=>D("li",{class:"registration-success-dialog__list-item"},[D("span",{class:"registration-success-dialog__list-label"},`${e.label}`),D("span",{class:"registration-success-dialog__list-value"},e.value)]))):null,D("p",{class:"registration-success-dialog__note"},ye("supplierRegistration.confirmation.pendingMessage","Your application is under review. We will notify you by email."))]);await P.alert(t,ye("supplierRegistration.confirmation.title","Application Submitted"),{confirmButtonText:ye("supplierRegistration.confirmation.viewStatus","View Application Status"),type:"success",customClass:"registration-success-dialog"})})(a),ia(a),De.value&&"undefined"!=typeof window&&window.localStorage.removeItem(de),De.value=null,Pe.value=null,fa(),F.success(`${ye("supplier.registration","Supplier Registration")} ${ye("approval.notifications.approveSuccess","submitted successfully")}`),a.supplierId)try{const e=await O(a.supplierId,{currency:Re.operatingCurrency});$e.value=e,Ye.value=!1}catch(e){console.error("Failed to issue temporary account:",e),ze.value=e instanceof Error?e.message:ye("supplierRegistration.tempAccount.issueFailed","Temporary account could not be issued automatically.")}}catch(a){console.error(ye("supplierRegistration.errors.submitFailed","Registration failed"),a),F.error(a instanceof Error&&a.message?a.message:ye("errors.general","Unexpected error occurred."))}finally{Ce.value=!1}}else ka()||F.warning(ye("supplierRegistration.validation.paymentTerms","Please select a valid payment term."))},Pa=()=>{Ye.value=!Ye.value},Fa=()=>{Te.value&&ge.push(`/registration-status/${Te.value.applicationId}`)},Ma=()=>{sa({redirect:!1}),Fa()},La=()=>{ge.push("/login")};return f(()=>{He.value=!0;const e=ve.query.token,a=ve.query.rfqId;e&&a&&(Ue.value=e,qe.value=a,Ve.value=!0);const t=ve.query.draftToken,i="undefined"!=typeof window?window.localStorage.getItem(de):null,s=t||i||null;s&&_a(s)}),h(()=>{He.value=!1,fa(),aa(),ta()}),(e,p)=>{const d=I,m=x,v=j,g=o,y=N,f=L,b=M,h=R;return s(),a("div",ie,[l($,null,{title:u(()=>[t("div",se,[t("h1",null,i(w(me)("common.appName")),1)])]),_:1}),t("main",le,[Fe.value?(s(),r(d,{key:0,type:"warning",closable:!1,class:"draft-alert"},{default:u(()=>[c(i(Fe.value),1)]),_:1})):n("",!0),Ve.value?(s(),r(J,{key:1,"translate-or":ye})):n("",!0),Te.value?(s(),r(w(ae),{key:3,"translate-or":ye,submission:Te.value,"temp-account":$e.value,"temp-account-error":ze.value,"temp-account-qr-url":ea.value,"masked-temp-password":Ze.value,"show-temp-password":Ye.value,"format-date-time":w(Z),"copy-to-clipboard":Na,"toggle-temp-password":Pa,"view-status":Fa,"return-to-login":La},null,8,["submission","temp-account","temp-account-error","temp-account-qr-url","masked-temp-password","show-temp-password","format-date-time"])):(s(),a("section",ne,[t("div",re,[l(v,{active:be.value,"finish-status":"success","align-center":""},{default:u(()=>[(s(),a(S,null,_(fe,e=>l(m,{key:e.key,title:e.title,description:e.description},null,8,["title","description"])),64))]),_:1},8,["active"])]),t("div",oe,[0===be.value?(s(),r(w(Y),{key:0,title:fe[0].title,description:fe[0].description,form:Re,"onUpdate:form":Ae,"translate-or":ye,"is-category-a":oa,"category-badge-label":na.value,"category-badge-tooltip":ra.value},null,8,["title","description","form","category-badge-label","category-badge-tooltip"])):1===be.value?(s(),r(w(W),{key:1,title:fe[1].title,description:fe[1].description,form:Re,"translate-or":ye,"is-category-a":oa,"category-badge-label":na.value,"category-badge-tooltip":ra.value,"credit-code-error":xe.value,"email-error":Ie.value,"validate-credit-code":Ea,"validate-contact-email":Oa},null,8,["title","description","form","category-badge-label","category-badge-tooltip","credit-code-error","email-error"])):2===be.value?(s(),r(w(Q),{key:2,title:fe[2].title,description:fe[2].description,form:Re,"translate-or":ye},null,8,["title","description","form"])):3===be.value?(s(),r(w(H),{key:3,title:fe[3].title,description:fe[3].description,form:Re,"translate-or":ye,"is-category-a":oa,"category-badge-label":na.value,"category-badge-tooltip":ra.value,"payment-method-options":da.value,"payment-term-options":pa.value},null,8,["title","description","form","category-badge-label","category-badge-tooltip","payment-method-options","payment-term-options"])):4===be.value?(s(),r(w(G),{key:4,title:fe[4].title,description:fe[4].description,form:Re,"translate-or":ye,"is-category-a":oa,"category-badge-label":na.value,"category-badge-tooltip":ra.value},null,8,["title","description","form","category-badge-label","category-badge-tooltip"])):5===be.value?(s(),r(w(K),{key:5,title:fe[5].title,description:fe[5].description,form:Re,"onUpdate:form":Ae,"translate-or":ye,"approval-preview":Ne.value,"preview-loading":Se.value,"preview-error":_e.value,"format-eta":Aa,"request-preview":Ca},null,8,["title","description","form","approval-preview","preview-loading","preview-error"])):n("",!0)]),l(X,{"translate-or":ye,"is-first-step":we.value,"is-last-step":ke.value,loading:Ce.value,"preview-loading":Se.value,"draft-saving":Ee.value,"draft-loading":Oe.value,"draft-expires-at":Pe.value,"format-date-time":w(Z),"handle-save-draft":Sa,"go-previous-step":ga,"go-next-step":va,"handle-preview":Ca,"handle-submit":Da},null,8,["is-first-step","is-last-step","loading","preview-loading","draft-saving","draft-loading","draft-expires-at","format-date-time"])])),l(h,{modelValue:We.value,"onUpdate:modelValue":p[3]||(p[3]=e=>We.value=e),class:"tracking-account-dialog",title:ye("supplierRegistration.confirmation.trackingDialogTitle","Registration Successful - Tracking Account Created"),width:"520px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,onClose:p[4]||(p[4]=()=>sa())},{footer:u(()=>[t("div",pe,[l(g,{onClick:p[2]||(p[2]=()=>sa())},{default:u(()=>[c(i(ye("common.close","Close")),1)]),_:1}),l(g,{type:"primary",onClick:Ma},{default:u(()=>[c(i(ye("supplierRegistration.confirmation.viewStatus","View Application Status")),1)]),_:1})])]),default:u(()=>[l(d,{class:"tracking-account-alert",type:"success",closable:!1,"show-icon":"",title:Je.message||ye("supplierRegistration.tempAccount.instructions","Use the credentials below to track your approval progress.")},null,8,["title"]),l(b,{"label-width":"120px",class:"tracking-account-form"},{default:u(()=>[l(f,{label:ye("auth.usernameLabel","Username")},{default:u(()=>[l(y,{"model-value":Je.username,readonly:""},{append:u(()=>[l(g,{link:"",disabled:!Je.username,onClick:p[0]||(p[0]=e=>Ta(Je.username,ye("auth.usernameLabel","Username")))},{default:u(()=>[c(i(ye("common.copy","Copy")),1)]),_:1},8,["disabled"])]),_:1},8,["model-value"])]),_:1},8,["label"]),l(f,{label:ye("auth.passwordLabel","Password")},{default:u(()=>[l(y,{"model-value":Je.password||"â€¢â€¢â€¢â€¢â€¢â€¢",readonly:""},{append:u(()=>[l(g,{link:"",disabled:!Je.password,onClick:p[1]||(p[1]=e=>Ta(Je.password,ye("auth.passwordLabel","Password"),{markPassword:!0}))},{default:u(()=>[c(i(ye("common.copy","Copy")),1)]),_:1},8,["disabled"])]),_:1},8,["model-value"]),Qe.value?(s(),a("span",ue,i(ye("supplierRegistration.tempAccount.copied","Copied to clipboard.")),1)):Je.password?n("",!0):(s(),a("span",ce,i(ye("supplierRegistration.confirmation.passwordCleared","For security, the password is cleared a few minutes after it is shown.")),1))]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])])])}}}),[["__scopeId","data-v-d1af618e"]]);export{me as default};
