import{r as e}from"./apiBaseUrl-Bx8aB0Mq.js";import{I as o}from"./index-CIahGNSM.js";const t=()=>{try{return localStorage.getItem("token")}catch{return null}};async function n(e,n){try{const r=t(),a=await fetch(e,{headers:r?{Authorization:`Bearer ${r}`}:{}});if(!a.ok)throw new Error(`Failed to download file: ${a.statusText}`);const i=await a.blob();if(!(await(async()=>"undefined"!=typeof document&&"undefined"!=typeof window&&(await o(),!0))()))throw new Error("DOM is not available for file download.");const d=window.URL.createObjectURL(i),c=document.createElement("a");c.href=d,c.download=n||"download",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(d)}catch(r){throw console.error("Download failed:",r),r}}async function r(e){const o=t(),n=await fetch(e,{headers:o?{Authorization:`Bearer ${o}`}:{}});if(!n.ok)throw new Error(`Failed to open file: ${n.statusText}`);const r=await n.blob();if("undefined"==typeof window)throw new Error("Window is not available.");const a=window.URL.createObjectURL(r);window.open(a,"_blank","noopener,noreferrer"),window.setTimeout(()=>{window.URL.revokeObjectURL(a)},6e4)}function a(o,t,n="rfq-attachments"){if("string"==typeof o&&o.length>0){const t=o.replace(/\\/g,"/"),n=t.indexOf("/uploads/");if(n>=0){let o=t.slice(n);return o.startsWith("/")||(o=`/${o}`),e(o)}}return t?function(o,t="rfq-attachments"){return o?e(`/uploads/${t}/${o}`):""}(t,n):null}export{n as d,r as o,a as r};
