import{d as a,s as e,h as l,C as t,T as s,b as i,e as r,j as n,k as u,O as o,t as d,A as v,z as c,y as f,x as p,f as y,U as m,V as _,q as k,o as b,_ as g}from"./index-CIahGNSM.js";import{E as h}from"./el-link-DKYHmLK0.js";import{E as q}from"./el-alert-TFaY92GP.js";import{E as w}from"./el-card-DDLg7AOV.js";import{E as x,a as j}from"./el-descriptions-item-DhEExd0m.js";const z={class:"rfq-invitation-page"},C={class:"invitation-container"},E={key:0,class:"loading-box"},I={key:1,class:"error-box"},R={key:2,class:"content"},A={class:"action-buttons"},P={class:"footer-hint"},U={key:0},N=g(a({__name:"RfqInvitationView",setup(a){const g=e(),N=k(),Q=g.params.token,V=l(!0),$=l(""),D=l(!1),F=l({}),L=l(""),O=l(""),S=()=>{N.push({path:"/login",query:{redirect:`/rfq/${F.value.id}`}})},T=()=>{N.push({path:"/supplier-registration",query:{token:Q,rfqId:F.value.id}})};return t(async()=>{try{const a=await s.get(`/api/public/rfq-preview/${Q}`);a.data.success?(D.value=a.data.isRegistered,F.value=a.data.rfqPreview,L.value=a.data.message,O.value=a.data.recipientEmail):$.value=a.data?.message||"Invalid invitation link"}catch(a){console.error("[RFQ Invitation] Error:",a),404===a.response?.status?$.value="æ— æ•ˆçš„é‚€è¯·é“¾æŽ¥":403===a.response?.status?$.value="é‚€è¯·é“¾æŽ¥å·²è¿‡æœŸ":$.value=a.response?.data?.message||"åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•"}finally{V.value=!1}}),(a,e)=>{const l=o,t=v,s=j,k=x,g=w,N=q,Q=h;return b(),i("div",z,[r("div",C,[V.value?(b(),i("div",E,[n(l,{class:"is-loading",size:50,color:"#e6a23c"},{default:u(()=>[n(y(m))]),_:1}),e[0]||(e[0]=r("p",null,"åŠ è½½ä¸­...",-1))])):$.value?(b(),i("div",I,[n(l,{size:60,color:"#f56c6c"},{default:u(()=>[n(y(_))]),_:1}),r("h2",null,d($.value),1),n(t,{onClick:S},{default:u(()=>[...e[1]||(e[1]=[p("è¿”å›žç™»å½•é¡µ",-1)])]),_:1})])):(b(),i("div",R,[e[10]||(e[10]=r("div",{class:"header"},[r("h1",null,"ðŸŽ¯ æ‚¨æ”¶åˆ°äº†ä¸€å°è¯¢ä»·é‚€è¯·"),r("p",null,"Request for Quotation Invitation")],-1)),n(g,{shadow:"hover",class:"rfq-card"},{header:u(()=>[...e[2]||(e[2]=[r("span",{class:"card-title"},"é¡¹ç›®ä¿¡æ¯",-1)])]),default:u(()=>[n(k,{column:1,border:""},{default:u(()=>[n(s,{label:"é¡¹ç›®åç§°"},{default:u(()=>[r("strong",null,d(F.value.title),1)]),_:1}),n(s,{label:"é¡¹ç›®ç¼–å·"},{default:u(()=>[p(" #"+d(F.value.id),1)]),_:1}),n(s,{label:"é‚€è¯·äºº"},{default:u(()=>[p(d(F.value.inviterName),1)]),_:1}),F.value.deliveryPeriod?(b(),c(s,{key:0,label:"äº¤è´§æœŸ"},{default:u(()=>[p(d(F.value.deliveryPeriod)+" å¤© ",1)]),_:1})):f("",!0),F.value.budgetAmount?(b(),c(s,{key:1,label:"é¢„ç®—é‡‘é¢"},{default:u(()=>[p(d(F.value.budgetAmount)+" "+d(F.value.currency),1)]),_:1})):f("",!0),F.value.validUntil?(b(),c(s,{key:2,label:"æˆªæ­¢æ—¶é—´"},{default:u(()=>{return[p(d((a=F.value.validUntil,a?new Date(a).toLocaleString("zh-CN"):"-")),1)];var a}),_:1})):f("",!0),F.value.description?(b(),c(s,{key:3,label:"é¡¹ç›®æè¿°"},{default:u(()=>[p(d(F.value.description),1)]),_:1})):f("",!0)]),_:1})]),_:1}),D.value?(b(),c(N,{key:0,type:"info",closable:!1,"show-icon":"",class:"alert-box"},{title:u(()=>[...e[3]||(e[3]=[r("strong",null,"æ‚¨å·²æ˜¯æ³¨å†Œä¾›åº”å•†",-1)])]),default:u(()=>[r("p",null,d(L.value),1)]),_:1})):(b(),c(N,{key:1,type:"warning",closable:!1,"show-icon":"",class:"alert-box"},{title:u(()=>[...e[4]||(e[4]=[r("strong",null,"âš ï¸ å®Œæˆä¾›åº”å•†æ³¨å†ŒåŽå³å¯ï¼š",-1)])]),default:u(()=>[e[5]||(e[5]=r("ul",null,[r("li",null,"âœ“ æŸ¥çœ‹å®Œæ•´è¯¢ä»·å•è¯¦æƒ…"),r("li",null,"âœ“ åœ¨çº¿å¡«å†™å¹¶æäº¤æŠ¥ä»·"),r("li",null,"âœ“ å®žæ—¶è·Ÿè¸ªæŠ¥ä»·çŠ¶æ€")],-1))]),_:1})),r("div",A,[D.value?(b(),c(t,{key:0,type:"primary",size:"large",onClick:S},{default:u(()=>[...e[6]||(e[6]=[p(" å‰å¾€ç™»å½• ",-1)])]),_:1})):(b(),c(t,{key:1,type:"warning",size:"large",onClick:T},{default:u(()=>[...e[7]||(e[7]=[p(" ðŸ“ ç«‹å³æ³¨å†Œå¹¶æŸ¥çœ‹å®Œæ•´è¯¢ä»· ",-1)])]),_:1}))]),r("div",P,[D.value?f("",!0):(b(),i("p",U,[e[9]||(e[9]=p(" å·²æœ‰è´¦å·ï¼Ÿ",-1)),n(Q,{type:"primary",onClick:S},{default:u(()=>[...e[8]||(e[8]=[p("ç‚¹å‡»ç™»å½•",-1)])]),_:1})]))])]))])])}}}),[["__scopeId","data-v-c2bffd56"]]);export{N as default};
