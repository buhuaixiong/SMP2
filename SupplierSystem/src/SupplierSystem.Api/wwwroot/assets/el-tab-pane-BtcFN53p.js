import{e6 as e,ao as a,cA as t,b6 as l,au as s,d as n,bh as o,cF as r,ax as u,h as i,B as d,cc as c,D as v,b,o as p,ak as f,S as m,f as h,bZ as g,I as y,e7 as x,e8 as w,b8 as $,c as C,e9 as P,C as R,cm as E,cT as N,j as k,O as T,aY as S,bW as B,b9 as A,ba as F,aE as j,bc as L,cp as V,aa as _,a$ as W,be as z,bb as K,bl as M,av as O,ea as I,i as Y,c2 as D,m as H,y as X,aF as q,aH as U,bM as Z}from"./index-DXSUgVsS.js";import{d as G,r as J,o as Q}from"./el-table-column-CT42DUDO.js";import{c as ee,b as ae}from"./el-select-BJKaasqg.js";import{u as te}from"./index-DIU4vmjK.js";const le="horizontal",se="vertical",ne={[le]:"deltaX",[se]:"deltaY"},oe=Symbol("tabsRootContextKey"),re=a({tabs:{type:l(Array),default:()=>t([])},tabRefs:{type:l(Object),default:()=>t({})}}),ue="ElTabBar",ie=n({name:ue});var de=s(n({...ie,props:re,setup(e,{expose:a}){const t=e,l=o(oe);l||r(ue,"<el-tabs><el-tab-bar /></el-tabs>");const s=u("tabs"),n=i(),x=i(),w=()=>x.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(g(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${ee(o)}`],a=n[`client${ee(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${ee(n)}(${e}px)`}})(),$=[];d(()=>t.tabs,async()=>{await y(),w(),$.forEach(e=>e.stop()),$.length=0,Object.values(t.tabRefs).forEach(e=>{$.push(c(e,w))})},{immediate:!0});const C=c(n,()=>w());return v(()=>{$.forEach(e=>e.stop()),$.length=0,C.stop()}),a({ref:n,update:w}),(e,a)=>(p(),b("div",{ref_key:"barRef",ref:n,class:m([h(s).e("active-bar"),h(s).is(h(l).props.tabPosition)]),style:f(x.value)},null,6))}}),[["__file","tab-bar.vue"]]);const ce=a({panes:{type:l(Array),default:()=>t([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),ve="ElTabNav",be=n({name:ve,props:ce,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(a,{expose:t,emit:l}){const s=o(oe);s||r(ve,"<el-tabs><tab-nav /></el-tabs>");const n=u("tabs"),v=x(),b=w(),p=i(),f=i(),m=i(),h=i({}),g=i(),L=i(!1),V=i(0),_=i(!1),W=i(!0),z=$(),K=C(()=>["top","bottom"].includes(s.props.tabPosition)),M=C(()=>K.value?"width":"height"),O=C(()=>({transform:`translate${"width"===M.value?"X":"Y"}(-${V.value}px)`})),{width:I,height:Y}=P(p),{width:D,height:H}=P(f,{width:0,height:0},{box:"border-box"}),X=C(()=>K.value?I.value:Y.value),q=C(()=>K.value?D.value:H.value),{onWheel:U}=(({atEndEdge:a,atStartEdge:t,layout:l},s)=>{let n,o=0;const r=e=>e<0&&t.value||e>0&&a.value;return{hasReachedEdge:r,onWheel:a=>{G(n);const t=a[ne[l.value]];r(o)&&r(o+t)||(o+=t,e()||a.preventDefault(),n=J(()=>{s(o),o=0}))}}})({atStartEdge:C(()=>V.value<=0),atEndEdge:C(()=>q.value-V.value<=X.value),layout:C(()=>K.value?"horizontal":"vertical")},e=>{V.value=ae(V.value+e,0,q.value-X.value)}),Z=()=>{if(!p.value)return;const e=p.value[`offset${ee(M.value)}`],a=V.value;if(!a)return;const t=a>e?a-e:0;V.value=t},Q=()=>{if(!p.value||!f.value)return;const e=f.value[`offset${ee(M.value)}`],a=p.value[`offset${ee(M.value)}`],t=V.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;V.value=l},te=async()=>{const e=f.value;if(!(L.value&&m.value&&p.value&&e))return;await y();const t=h.value[a.currentName];if(!t)return;const l=p.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=K.value?e.offsetWidth-n.width:e.offsetHeight-n.height,r=V.value;let u=r;K.value?(s.left<n.left&&(u=r-(n.left-s.left)),s.right>n.right&&(u=r+s.right-n.right)):(s.top<n.top&&(u=r-(n.top-s.top)),s.bottom>n.bottom&&(u=r+(s.bottom-n.bottom))),u=Math.max(u,0),V.value=Math.min(u,o)},le=()=>{var e;if(!f.value||!p.value)return;a.stretch&&(null==(e=g.value)||e.update());const t=f.value[`offset${ee(M.value)}`],l=p.value[`offset${ee(M.value)}`],s=V.value;l<t?(L.value=L.value||{},L.value.prev=s,L.value.next=s+l<t,t-s<l&&(V.value=t-l)):(L.value=!1,s>0&&(V.value=0))},se=e=>{let a=0;switch(A(e)){case F.left:case F.up:a=-1;break;case F.right:case F.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),re()},re=()=>{W.value&&(_.value=!0)},ue=()=>_.value=!1;return d(v,e=>{"hidden"===e?W.value=!1:"visible"===e&&setTimeout(()=>W.value=!0,50)}),d(b,e=>{e?setTimeout(()=>W.value=!0,50):W.value=!1}),c(m,le),R(()=>setTimeout(()=>te(),0)),E(()=>le()),t({scrollToActiveTab:te,removeFocus:ue,focusActiveTab:async()=>{await y();const e=h.value[a.currentName];null==e||e.focus({preventScroll:!0})},tabListRef:f,tabBarRef:g,scheduleRender:()=>N(z)}),()=>{const e=L.value?[k("span",{class:[n.e("nav-prev"),n.is("disabled",!L.value.prev)],onClick:Z},[k(T,null,{default:()=>[k(S,null,null)]})]),k("span",{class:[n.e("nav-next"),n.is("disabled",!L.value.next)],onClick:Q},[k(T,null,{default:()=>[k(B,null,null)]})])]:null,t=a.panes.map((e,t)=>{var o,r,u,i,d;const c=e.uid,v=e.props.disabled,b=null!=(r=null!=(o=e.props.name)?o:e.index)?r:`${t}`,p=!v&&(e.isClosable||!1!==e.props.closable&&a.editable);e.index=`${t}`;const f=p?k(T,{class:"is-icon-close",onClick:a=>l("tabRemove",e,a)},{default:()=>[k(j,null,null)]}):null,m=(null==(i=(u=e.slots).label)?void 0:i.call(u))||e.props.label,g=!v&&e.active?null!=(d=a.tabindex)?d:s.props.tabindex:-1;return k("div",{ref:e=>((e,a)=>{h.value[a]=e})(e,b),class:[n.e("item"),n.is(s.props.tabPosition),n.is("active",e.active),n.is("disabled",v),n.is("closable",p),n.is("focus",_.value)],id:`tab-${b}`,key:`tab-${c}`,"aria-controls":`pane-${b}`,role:"tab","aria-selected":e.active,tabindex:g,onFocus:()=>re(),onBlur:()=>ue(),onClick:a=>{ue(),l("tabClick",e,b,a)},onKeydown:a=>{const t=A(a);!p||t!==F.delete&&t!==F.backspace||l("tabRemove",e,a)}},[m,f])});return z.value,k("div",{ref:m,class:[n.e("nav-wrap"),n.is("scrollable",!!L.value),n.is(s.props.tabPosition)]},[e,k("div",{class:n.e("nav-scroll"),ref:p},[a.panes.length>0?k("div",{class:[n.e("nav"),n.is(s.props.tabPosition),n.is("stretch",a.stretch&&["top","bottom"].includes(s.props.tabPosition))],ref:f,style:O.value,role:"tablist",onKeydown:se,onWheel:U},[a.type?null:k(de,{ref:g,tabs:[...a.panes],tabRefs:h.value},null),t]):null])])}}}),pe=a({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:l(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),fe=e=>L(e)||V(e);var me=n({name:"ElTabs",props:pe,emits:{[z]:e=>fe(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>fe(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>fe(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=u("tabs"),o=C(()=>["left","right"].includes(e.tabPosition)),{children:r,addChild:c,removeChild:v,ChildrenSorter:b}=te(K(),"ElTabPane"),p=i(),f=i(null!=(s=e.modelValue)?s:"0"),m=async(t,l=!1)=>{var s,n,o,u;if(f.value!==t&&!g(t))try{let i;if(e.beforeLeave){const a=e.beforeLeave(t,f.value);i=a instanceof Promise?await a:a}else i=!0;if(!1!==i){const e=null==(s=r.value.find(e=>e.paneName===f.value))?void 0:s.isFocusInsidePane();f.value=t,l&&(a(z,t),a("tabChange",t)),null==(o=null==(n=p.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(u=p.value)||u.focusActiveTab())}}catch(i){}},h=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),m(t,!0))},x=(e,t)=>{e.props.disabled||g(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},w=()=>{a("edit",void 0,"add"),a("tabAdd")},$=e=>{const a=A(e);[F.enter,F.numpadEnter].includes(a)&&w()},P=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return d(()=>e.modelValue,e=>m(e)),d(f,async()=>{var e;await y(),null==(e=p.value)||e.scrollToActiveTab()}),M(oe,{props:e,currentName:f,registerPane:c,unregisterPane:v,nav$:p}),l({currentName:f,get tabNavRef(){return Q(p.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?k("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:e.tabindex,onClick:w,onKeydown:$},[a?_(t,"add-icon"):k(T,{class:n.is("icon-plus")},{default:()=>[k(W,null,null)]})]):null,s=k("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[k(b,null,{default:()=>k(be,{ref:p,currentName:f.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:h,onTabRemove:x},null),$stable:!0}),l]),u=k("div",{class:n.e("content")},[_(t,"default")]);return k("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:P,onVnodeUpdated:P},[u,s])}}});const he=a({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),ge="ElTabPane",ye=n({name:ge});var xe=s(n({...ye,props:he,setup(e){const a=e,t=K(),l=O(),s=o(oe);s||r(ge,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=u("tab-pane"),c=i(),f=i(),g=C(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),y=I(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:f.value)}),x=i(y.value),w=C(()=>{var e;return null!=(e=a.name)?e:f.value}),$=I(()=>!a.lazy||x.value||y.value);d(y,e=>{e&&(x.value=!0)});const P=Y({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:w,active:y,index:f,isClosable:g,isFocusInsidePane:()=>{var e;return null==(e=c.value)?void 0:e.contains(document.activeElement)}});return s.registerPane(P),v(()=>{s.unregisterPane(P)}),D(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>h($)?H((p(),b("div",{key:0,id:`pane-${h(w)}`,ref_key:"paneRef",ref:c,class:m(h(n).b()),role:"tabpanel","aria-hidden":!h(y),"aria-labelledby":`tab-${h(w)}`},[_(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[q,h(y)]]):X("v-if",!0)}}),[["__file","tab-pane.vue"]]);const we=U(me,{TabPane:xe}),$e=Z(xe);export{we as E,$e as a};
