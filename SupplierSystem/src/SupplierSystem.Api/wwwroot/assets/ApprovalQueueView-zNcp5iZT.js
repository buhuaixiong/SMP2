const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/public-DfZl2B2P.js","assets/index-CyRNMvNu.js","assets/index-BKgpdITu.css"])))=>i.map(i=>d[i]);
import{an as e,ao as a,ap as l,aq as t,c as s,ar as o,h as i,B as u,as as r,D as n,at as d,au as c,d as p,av as v,aw as f,ax as m,ay as y,az as _,z as b,o as h,k as w,j as g,aA as k,f as E,m as C,aB as R,aC as N,e as D,aD as A,w as z,b as j,y as F,S as P,aa as I,t as V,O as x,aE as O,ak as L,aF as S,aG as T,aH as U,a8 as $,g as B,u as Q,i as G,C as q,H,x as M,A as W,a9 as Z,F as Y,aI as J,Z as X,V as K,X as ee,E as ae,J as le,_ as te}from"./index-CyRNMvNu.js";import{v as se}from"./el-loading-BOtuuplO.js";import{a as oe,E as ie}from"./el-form-item-BQHiulRL.js";/* empty css                 */import{E as ue,a as re}from"./el-radio-group-BuXSpwEH.js";import{a as ne,E as de}from"./el-descriptions-item-C65f-ujF.js";import{E as ce}from"./el-divider-5zNEMNIX.js";import{E as pe}from"./el-alert-C_2vi33t.js";import{E as ve}from"./el-skeleton-item-C1OdNt69.js";import{E as fe}from"./el-card-DXvXWoCD.js";import{E as me}from"./el-empty-FerO07cH.js";import{E as ye,a as _e}from"./el-table-column-D7PrEwn8.js";import"./el-scrollbar-CdTVjh_P.js";import{E as be}from"./el-tag-DGgsViqv.js";import{P as he}from"./PageHeader-8_jhZxUx.js";import{fetchPendingRegistrations as we,fetchApprovedRegistrations as ge,bindSupplierCode as ke}from"./public-DfZl2B2P.js";import"./dayjs.min-CuEfV50W.js";import{r as Ee}from"./apiBaseUrl-Bx8aB0Mq.js";import{u as Ce}from"./useNotification-DsktK-_s.js";import"./castArray-zz_IM52U.js";import"./_baseClone-CqMMMsoT.js";import"./debounce-DFNSnbDM.js";const Re=a({...l,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},resizable:Boolean,size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Ne=e;function De(e,a){const{width:l,height:c}=t(),p=s(()=>["ltr","rtl"].includes(e.direction)),v=s(()=>["ltr","ttb"].includes(e.direction)?1:-1),f=s(()=>p.value?l.value:c.value),m=s(()=>o(y.value+v.value*_.value,4,f.value)),y=i(0),_=i(0),b=i(!1),h=i(!1);let w=[],g=[];u(()=>[e.size,e.resizable],()=>{h.value=!1,y.value=0,_.value=0,E()});const k=e=>{const{pageX:a,pageY:l}=e,t=a-w[0],s=l-w[1];_.value=p.value?t:s},E=()=>{w=[],y.value=m.value,_.value=0,b.value=!1,g.forEach(e=>null==e?void 0:e()),g=[]},C=r(a,"mousedown",l=>{e.resizable&&(h.value||(y.value=(()=>{var e;const l=null==(e=a.value)?void 0:e.closest('[aria-modal="true"]');return l?p.value?l.offsetWidth:l.offsetHeight:100})(),h.value=!0),w=[l.pageX,l.pageY],b.value=!0,g.push(r(window,"mouseup",E),r(window,"mousemove",k)))});return n(()=>{C(),E()}),{size:s(()=>h.value?`${m.value}px`:d(e.size)),isResizing:b,isHorizontal:p}}const Ae=p({name:"ElDrawer",inheritAttrs:!1});const ze=U(c(p({...Ae,props:Re,emits:Ne,setup(e,{expose:a}){const l=e,t=v();f({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},s(()=>!!t.title));const o=i(),u=i(),r=i(),n=m("drawer"),{t:d}=y(),{afterEnter:c,afterLeave:p,beforeLeave:U,visible:$,rendered:B,titleId:Q,bodyId:G,zIndex:q,onModalClick:H,onOpenAutoFocus:M,onCloseAutoFocus:W,onFocusoutPrevented:Z,onCloseRequested:Y,handleClose:J}=_(l,o),{isHorizontal:X,size:K,isResizing:ee}=De(l,r),ae=s(()=>l.modalPenetrable&&!l.modal);return a({handleClose:J,afterEnter:c,afterLeave:p}),(e,a)=>(h(),b(E(T),{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},{default:w(()=>[g(k,{name:E(n).b("fade"),onAfterEnter:E(c),onAfterLeave:E(p),onBeforeLeave:E(U),persisted:""},{default:w(()=>{var a;return[C(g(E(R),{mask:e.modal,"overlay-class":[E(n).is("drawer"),null!=(a=e.modalClass)?a:"",`${E(n).namespace.value}-modal-drawer`,E(n).is("penetrable",E(ae))],"z-index":E(q),onClick:E(H)},{default:w(()=>[g(E(N),{loop:"",trapped:E($),"focus-trap-el":o.value,"focus-start-el":u.value,onFocusAfterTrapped:E(M),onFocusAfterReleased:E(W),onFocusoutPrevented:E(Z),onReleaseRequested:E(Y)},{default:w(()=>[D("div",A({ref_key:"drawerRef",ref:o,"aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:E(Q),"aria-describedby":E(G)},e.$attrs,{class:[E(n).b(),e.direction,E($)&&"open",E(n).is("dragging",E(ee))],style:{[E(X)?"width":"height"]:E(K)},role:"dialog",onClick:z(()=>{},["stop"])}),[D("span",{ref_key:"focusStartRef",ref:u,class:P(E(n).e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(h(),j("header",{key:0,class:P([E(n).e("header"),e.headerClass])},[e.$slots.title?I(e.$slots,"title",{key:1},()=>[F(" DEPRECATED SLOT ")]):I(e.$slots,"header",{key:0,close:E(J),titleId:E(Q),titleClass:E(n).e("title")},()=>[D("span",{id:E(Q),role:"heading","aria-level":e.headerAriaLevel,class:P(E(n).e("title"))},V(e.title),11,["id","aria-level"])]),e.showClose?(h(),j("button",{key:2,"aria-label":E(d)("el.drawer.close"),class:P(E(n).e("close-btn")),type:"button",onClick:E(J)},[g(E(x),{class:P(E(n).e("close"))},{default:w(()=>[g(E(O))]),_:1},8,["class"])],10,["aria-label","onClick"])):F("v-if",!0)],2)):F("v-if",!0),E(B)?(h(),j("div",{key:1,id:E(G),class:P([E(n).e("body"),e.bodyClass])},[I(e.$slots,"default")],10,["id"])):F("v-if",!0),e.$slots.footer?(h(),j("div",{key:2,class:P([E(n).e("footer"),e.footerClass])},[I(e.$slots,"footer")],2)):F("v-if",!0),e.resizable?(h(),j("div",{key:3,ref_key:"draggerRef",ref:r,style:L({zIndex:E(q)}),class:P(E(n).e("dragger"))},null,6)):F("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[S,E($)]])]}),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}}),[["__file","drawer.vue"]])),je=e=>{if(!e)return"Unknown Status";return{[$.PENDING_INFO]:"Awaiting profile details",[$.PENDING_PURCHASER]:"Waiting for purchaser review",[$.REJECTED]:"Rejected"}[e]||e},Fe=e=>{if(!e)return"info";return{[$.PENDING_INFO]:"info",[$.PENDING_PURCHASER]:"warning",[$.PENDING_QUALITY_REVIEW]:"warning",[$.PENDING_PURCHASE_MANAGER]:"warning",[$.PENDING_PURCHASE_DIRECTOR]:"warning",[$.PENDING_FINANCE_MANAGER]:"warning",[$.APPROVED]:"success",[$.REJECTED]:"danger"}[e]||"info"},Pe={class:"approval-view"},Ie={class:"content-wrapper"},Ve={class:"approval-stack"},xe={class:"card-header"},Oe={class:"supplier-info"},Le={class:"supplier-name"},Se={key:0,class:"supplier-code"},Te={key:0,class:"empty-state"},Ue={class:"card-header"},$e={class:"supplier-info"},Be={class:"supplier-name"},Qe={key:0,class:"supplier-code"},Ge={key:0,class:"empty-state"},qe={key:0},He={key:1},Me={key:2,class:"drawer-content"},We={style:{"font-size":"15px","font-weight":"600"}},Ze={style:{"margin-top":"8px","font-size":"13px"}},Ye={class:"document-grid"},Je={class:"document-header"},Xe={class:"document-meta"},Ke={class:"document-name"},ea={key:0,class:"document-size"},aa={class:"document-actions"},la={key:1,class:"document-empty"},ta={class:"document-header"},sa={class:"document-meta"},oa={class:"document-name"},ia={key:0,class:"document-size"},ua={class:"document-actions"},ra={key:1,class:"document-empty"},na={key:0},da={style:{"white-space":"pre-wrap","line-height":"1.6"}},ca={key:1},pa={class:"drawer-footer"},va=te(p({name:"ApprovalQueueView",__name:"ApprovalQueueView",setup(e){const a=Ce(),l=B(),{t:t}=Q(),o=i(!1),u=i([]),r=i(!1),n=i([]),d=i(!1),c=i(null),p=i(null),v=i(!1),f=i(!1),m=i("approved"),y=G({value:"",submitting:!1}),_=i(!1),k=i(""),R=i(!1),N=s(()=>"finance_accountant"===l.user?.role),A=s(()=>N.value&&"pending_code_binding"===c.value?.status),z=async()=>{o.value=!0;try{u.value=await we()}catch(e){console.error("Failed to fetch pending registrations",e),a.error(t("errors.general"))}finally{o.value=!1}},P=async()=>{r.value=!0;try{n.value=await ge()}catch(e){console.error("Failed to fetch approved registrations",e),a.error(t("errors.general"))}finally{r.value=!1}},I=async(e,a="pending")=>{c.value=e,d.value=!0,f.value="approved"===a,m.value="approved",y.value="",await O(e.id),console.log("[DEBUG openDetails] app.status:",e.status),console.log("[DEBUG openDetails] isFinanceAccountant:",N.value),console.log("[DEBUG openDetails] role:",l.user?.role),N.value&&"pending_code_binding"===e.status?.toLowerCase()&&(console.log("[DEBUG openDetails] 准备弹出绑定对话框"),k.value="",_.value=!0)},O=async e=>{v.value=!0;try{const{fetchRegistrationDetail:a}=await le(async()=>{const{fetchRegistrationDetail:e}=await import("./public-DfZl2B2P.js");return{fetchRegistrationDetail:e}},__vite__mapDeps([0,1,2]));p.value=await a(e)}catch(l){p.value=null,console.error("Failed to fetch application detail",l),a.error(t("approvalQueue.errors.loadStatus"))}finally{v.value=!1}},L=async()=>{if(c.value)if("rejected"!==m.value&&"requestInfo"!==m.value||y.value.trim())try{y.submitting=!0;const e=c.value.id,l="approved"===m.value;let s;if(l){const{approveRegistration:l}=await le(async()=>{const{approveRegistration:e}=await import("./public-DfZl2B2P.js");return{approveRegistration:e}},__vite__mapDeps([0,1,2])),o=await l(e,{comment:y.value.trim()||void 0});a.success(o.message||t("approvalQueue.notifications.approved")),s=o.nextStatus}else if("rejected"===m.value){const{rejectRegistration:l}=await le(async()=>{const{rejectRegistration:e}=await import("./public-DfZl2B2P.js");return{rejectRegistration:e}},__vite__mapDeps([0,1,2])),s=await l(e,{reason:y.value});a.success(s.message||t("approvalQueue.notifications.rejected"))}else{const{requestRegistrationInfo:l}=await le(async()=>{const{requestRegistrationInfo:e}=await import("./public-DfZl2B2P.js");return{requestRegistrationInfo:e}},__vite__mapDeps([0,1,2])),s=await l(e,{message:y.value});a.success(s.message||t("approvalQueue.notifications.requestedInfo"))}if(N.value&&l&&"pending_code_binding"===s?.toLowerCase()){d.value=!1,await z();const a=u.value.find(a=>a.id===e);a&&(c.value=a),k.value="",_.value=!0}else d.value=!1,c.value=null,await Promise.all([z(),P()])}catch(e){console.error("Failed to submit decision",e),a.error(e instanceof Error?e.message:t("errors.general"))}finally{y.submitting=!1}else a.warning(t("approvalQueue.validation.commentRequired"))},S=e=>{if(!e)return"-";return new Date(e).toLocaleString()},T=e=>!e||Number.isNaN(e)?"-":e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`,U=e=>{const l=(e=>{if(!e)return null;const a=e.startsWith("/")?e:`/${e}`,l=localStorage.getItem("token"),t=Ee(`/uploads${a}`);if(!l)return t;const s=t.includes("?")?"&":"?";return`${t}${s}token=${encodeURIComponent(l)}`})(e);l?window.open(l,"_blank","noopener,noreferrer"):a.warning("未找到该文件，请联系供应商重新上传。")},$=()=>{c.value&&(k.value="",_.value=!0)},te=async()=>{if(c.value&&k.value.trim()){R.value=!0;try{const e=await ke(c.value.id,k.value.trim());a.success(e.message||"VENDOR CODE 绑定成功"),_.value=!1,await z(),await P()}catch(e){a.error(e.message||"绑定失败")}finally{R.value=!1}}else a.warning("请输入 VENDOR CODE")};return q(()=>{z(),P()}),(e,a)=>{const l=x,s=W,i=ye,N=be,O=_e,B=me,Q=fe,G=ve,q=pe,le=ce,we=ne,ge=de,ke=re,Ee=ue,Ce=oe,Re=ae,Ne=ie,De=ze,Ae=H,va=se;return h(),j("div",Pe,[g(he,{title:E(t)("approvalQueue.title"),subtitle:E(t)("approvalQueue.subtitle")},null,8,["title","subtitle"]),D("div",Ie,[D("div",Ve,[g(Q,{class:"approval-card",shadow:"never"},{header:w(()=>[D("div",xe,[D("span",null,"待我审批 ("+V(u.value.length)+")",1),g(s,{type:"primary",size:"small",onClick:z},{default:w(()=>[g(l,null,{default:w(()=>[g(E(Z))]),_:1}),M(" "+V(E(t)("common.refresh")),1)]),_:1})])]),default:w(()=>[C((h(),b(O,{data:u.value,stripe:""},{default:w(()=>[g(i,{prop:"id",label:"申请编号",width:"100"}),g(i,{label:"供应商信息",width:"250"},{default:w(({row:e})=>[D("div",Oe,[D("div",Le,V(e.companyName),1),e.supplierCode?(h(),j("div",Se," 代码: "+V(e.supplierCode),1)):F("",!0)])]),_:1}),g(i,{label:"状态",width:"140"},{default:w(({row:e})=>[g(N,{type:E(Fe)(e.status),size:"small"},{default:w(()=>[M(V(E(je)(e.status)),1)]),_:2},1032,["type"])]),_:1}),g(i,{label:"联系方式",width:"200"},{default:w(({row:e})=>[M(V(e.contactEmail),1)]),_:1}),g(i,{label:"负责采购员",width:"180"},{default:w(({row:e})=>[M(V(e.procurementEmail||"-"),1)]),_:1}),g(i,{prop:"createdAt",label:"提交时间",width:"180"},{default:w(({row:e})=>[M(V(S(e.createdAt)),1)]),_:1}),g(i,{label:"操作",width:"200",fixed:"right"},{default:w(({row:e})=>[g(s,{type:"primary",size:"small",onClick:a=>I(e)},{default:w(()=>[M(V(E(t)("approvalQueue.actions.viewDetails")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[va,o.value]]),0!==u.value.length||o.value?F("",!0):(h(),j("div",Te,[g(B,{description:E(t)("approvalQueue.noSuppliers")},null,8,["description"])]))]),_:1}),g(Q,{class:"approval-card",shadow:"never"},{header:w(()=>[D("div",Ue,[D("span",null,"已审批 ("+V(n.value.length)+")",1),g(s,{type:"primary",size:"small",onClick:P},{default:w(()=>[g(l,null,{default:w(()=>[g(E(Z))]),_:1}),M(" "+V(E(t)("common.refresh")),1)]),_:1})])]),default:w(()=>[C((h(),b(O,{data:n.value,stripe:""},{default:w(()=>[g(i,{prop:"id",label:"申请编号",width:"100"}),g(i,{label:"供应商信息",width:"250"},{default:w(({row:e})=>[D("div",$e,[D("div",Be,V(e.companyName),1),e.supplierCode?(h(),j("div",Qe," 代码: "+V(e.supplierCode),1)):F("",!0)])]),_:1}),g(i,{label:"状态",width:"140"},{default:w(({row:e})=>[g(N,{type:E(Fe)(e.status),size:"small"},{default:w(()=>[M(V(E(je)(e.status)),1)]),_:2},1032,["type"])]),_:1}),g(i,{label:"联系方式",width:"200"},{default:w(({row:e})=>[M(V(e.contactEmail),1)]),_:1}),g(i,{label:"负责采购员",width:"180"},{default:w(({row:e})=>[M(V(e.procurementEmail||"-"),1)]),_:1}),g(i,{prop:"createdAt",label:"提交时间",width:"180"},{default:w(({row:e})=>[M(V(S(e.createdAt)),1)]),_:1}),g(i,{label:"操作",width:"200",fixed:"right"},{default:w(({row:e})=>[g(s,{type:"primary",size:"small",onClick:a=>I(e,"approved")},{default:w(()=>[M(V(E(t)("approvalQueue.actions.viewDetails")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[va,r.value]]),0!==n.value.length||r.value?F("",!0):(h(),j("div",Ge,[g(B,{description:E(t)("approvalQueue.noSuppliers")},null,8,["description"])]))]),_:1})])]),d.value?(h(),b(De,{key:0,modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=e=>d.value=e),title:c.value?.companyName||E(t)("approvalQueue.drawer.title"),size:"900px","destroy-on-close":""},{footer:w(()=>[D("div",pa,[g(s,{onClick:a[4]||(a[4]=e=>d.value=!1)},{default:w(()=>[...a[31]||(a[31]=[M("取消",-1)])]),_:1}),g(s,{type:"primary",loading:y.submitting,onClick:L,disabled:f.value||!c.value},{default:w(()=>[...a[32]||(a[32]=[M(" 提交审批 ",-1)])]),_:1},8,["loading","disabled"])])]),default:w(()=>[v.value?(h(),j("div",qe,[g(G,{rows:8,animated:""})])):p.value?(h(),j("div",Me,[g(q,{type:"info",closable:!1,style:{"margin-bottom":"20px"}},{title:w(()=>[D("div",We,V(p.value.companyName),1)]),default:w(()=>[D("div",Ze," 申请编号: "+V(p.value.id)+" | 提交时间: "+V(S(p.value.createdAt)),1)]),_:1}),g(le,{"content-position":"left"},{default:w(()=>[...a[9]||(a[9]=[M("基本信息",-1)])]),_:1}),g(ge,{column:2,border:""},{default:w(()=>[g(we,{label:"申请编号"},{default:w(()=>[M(V(p.value.id),1)]),_:1}),g(we,{label:"状态"},{default:w(()=>[g(N,{type:E(Fe)(p.value.status),size:"small"},{default:w(()=>[M(V(E(je)(p.value.status)),1)]),_:1},8,["type"])]),_:1}),p.value.supplierCode?(h(),b(we,{key:0,label:"供应商代码"},{default:w(()=>[M(V(p.value.supplierCode),1)]),_:1})):F("",!0),g(we,{label:"最后更新"},{default:w(()=>[M(V(S(p.value.updatedAt)),1)]),_:1})]),_:1}),g(le,{"content-position":"left"},{default:w(()=>[...a[10]||(a[10]=[M("公司信息",-1)])]),_:1}),g(ge,{column:2,border:""},{default:w(()=>[g(we,{label:"公司名称（中文）"},{default:w(()=>[M(V(p.value.companyName),1)]),_:1}),p.value.companyNameEnglish?(h(),b(we,{key:0,label:"公司名称（英文）"},{default:w(()=>[M(V(p.value.companyNameEnglish),1)]),_:1})):F("",!0),p.value.companyType?(h(),b(we,{key:1,label:"公司类型"},{default:w(()=>[M(V(p.value.companyType),1)]),_:1})):F("",!0),g(we,{label:"营业执照号"},{default:w(()=>[M(V(p.value.businessRegistrationNumber),1)]),_:1}),g(we,{label:"注册地址",span:2},{default:w(()=>[M(V(p.value.registeredOffice),1)]),_:1}),g(we,{label:"经营地址",span:2},{default:w(()=>[M(V(p.value.businessAddress),1)]),_:1}),p.value.companyPhone?(h(),b(we,{key:2,label:"公司电话"},{default:w(()=>[M(V(p.value.companyPhone),1)]),_:1})):F("",!0),p.value.companyFax?(h(),b(we,{key:3,label:"公司传真"},{default:w(()=>[M(V(p.value.companyFax),1)]),_:1})):F("",!0)]),_:1}),g(le,{"content-position":"left"},{default:w(()=>[...a[11]||(a[11]=[M("联系人信息",-1)])]),_:1}),g(ge,{column:2,border:""},{default:w(()=>[g(we,{label:"联系人"},{default:w(()=>[M(V(p.value.contactName),1)]),_:1}),g(we,{label:"联系邮箱"},{default:w(()=>[M(V(p.value.contactEmail),1)]),_:1}),g(we,{label:"联系电话"},{default:w(()=>[M(V(p.value.contactPhone),1)]),_:1}),p.value.financeContactName?(h(),b(we,{key:0,label:"财务联系人"},{default:w(()=>[M(V(p.value.financeContactName),1)]),_:1})):F("",!0),p.value.financeContactEmail?(h(),b(we,{key:1,label:"财务联系邮箱"},{default:w(()=>[M(V(p.value.financeContactEmail),1)]),_:1})):F("",!0),p.value.financeContactPhone?(h(),b(we,{key:2,label:"财务联系电话"},{default:w(()=>[M(V(p.value.financeContactPhone),1)]),_:1})):F("",!0),p.value.procurementEmail?(h(),b(we,{key:3,label:"采购联系邮箱"},{default:w(()=>[M(V(p.value.procurementEmail),1)]),_:1})):F("",!0)]),_:1}),g(le,{"content-position":"left"},{default:w(()=>[...a[12]||(a[12]=[M("业务信息",-1)])]),_:1}),g(ge,{column:2,border:""},{default:w(()=>[p.value.businessNature?(h(),b(we,{key:0,label:"业务性质"},{default:w(()=>[M(V(p.value.businessNature),1)]),_:1})):F("",!0),g(we,{label:"结算货币"},{default:w(()=>[M(V(p.value.operatingCurrency),1)]),_:1}),g(we,{label:"交货地点"},{default:w(()=>[M(V(p.value.deliveryLocation),1)]),_:1}),p.value.shipCode?(h(),b(we,{key:1,label:"Ship Code"},{default:w(()=>[M(V(p.value.shipCode),1)]),_:1})):F("",!0),p.value.productTypes?(h(),b(we,{key:2,label:"产品类型",span:2},{default:w(()=>[M(V(p.value.productTypes),1)]),_:1})):F("",!0),p.value.invoiceType?(h(),b(we,{key:3,label:"发票类型"},{default:w(()=>[M(V(p.value.invoiceType),1)]),_:1})):F("",!0),p.value.paymentTermsDays?(h(),b(we,{key:4,label:"付款条款"},{default:w(()=>[M(V(p.value.paymentTermsDays)+" 天 ",1)]),_:1})):F("",!0),p.value.paymentMethods?(h(),b(we,{key:5,label:"付款方式",span:2},{default:w(()=>[M(V(p.value.paymentMethods),1)]),_:1})):F("",!0)]),_:1}),g(le,{"content-position":"left"},{default:w(()=>[...a[13]||(a[13]=[M("银行信息",-1)])]),_:1}),g(ge,{column:2,border:""},{default:w(()=>[g(we,{label:"银行名称"},{default:w(()=>[M(V(p.value.bankName),1)]),_:1}),g(we,{label:"银行地址"},{default:w(()=>[M(V(p.value.bankAddress),1)]),_:1}),g(we,{label:"银行账号",span:2},{default:w(()=>[M(V(p.value.bankAccountNumber),1)]),_:1}),p.value.swiftCode?(h(),b(we,{key:0,label:"SWIFT Code",span:2},{default:w(()=>[M(V(p.value.swiftCode),1)]),_:1})):F("",!0)]),_:1}),g(le,{"content-position":"left"},{default:w(()=>[...a[14]||(a[14]=[M("提交资料",-1)])]),_:1}),D("div",Ye,[g(Q,{class:"document-card",shadow:"hover"},{header:w(()=>[D("div",Je,[a[17]||(a[17]=D("span",null,"营业执照",-1)),p.value.businessLicenseFilePath?(h(),b(N,{key:0,type:"success",size:"small"},{default:w(()=>[...a[15]||(a[15]=[M(" 已上传 ",-1)])]),_:1})):(h(),b(N,{key:1,type:"info",size:"small"},{default:w(()=>[...a[16]||(a[16]=[M("暂无",-1)])]),_:1}))])]),default:w(()=>[p.value.businessLicenseFilePath?(h(),j(Y,{key:0},[D("div",Xe,[D("div",Ke,V(p.value.businessLicenseFileName||"business-license"),1),p.value.businessLicenseFileSize?(h(),j("div",ea," 大小："+V(T(p.value.businessLicenseFileSize)),1)):F("",!0)]),D("div",aa,[g(s,{type:"primary",link:"",onClick:a[0]||(a[0]=e=>U(p.value.businessLicenseFilePath))},{default:w(()=>[...a[18]||(a[18]=[M(" 查看 / 下载 ",-1)])]),_:1})])],64)):(h(),j("p",la,"供应商未上传营业执照。"))]),_:1}),g(Q,{class:"document-card",shadow:"hover"},{header:w(()=>[D("div",ta,[a[21]||(a[21]=D("span",null,"银行开户资料",-1)),p.value.bankAccountFilePath?(h(),b(N,{key:0,type:"success",size:"small"},{default:w(()=>[...a[19]||(a[19]=[M(" 已上传 ",-1)])]),_:1})):(h(),b(N,{key:1,type:"info",size:"small"},{default:w(()=>[...a[20]||(a[20]=[M("暂无",-1)])]),_:1}))])]),default:w(()=>[p.value.bankAccountFilePath?(h(),j(Y,{key:0},[D("div",sa,[D("div",oa,V(p.value.bankAccountFileName||"bank-account-document"),1),p.value.bankAccountFileSize?(h(),j("div",ia," 大小："+V(T(p.value.bankAccountFileSize)),1)):F("",!0)]),D("div",ua,[g(s,{type:"primary",link:"",onClick:a[1]||(a[1]=e=>U(p.value.bankAccountFilePath))},{default:w(()=>[...a[22]||(a[22]=[M(" 查看 / 下载 ",-1)])]),_:1})])],64)):(h(),j("p",ra,"供应商未上传银行开户资料。"))]),_:1})]),p.value.notes?(h(),j("div",na,[g(le,{"content-position":"left"},{default:w(()=>[...a[23]||(a[23]=[M("备注",-1)])]),_:1}),g(q,{type:"info",closable:!1},{default:w(()=>[D("div",da,V(p.value.notes),1)]),_:1})])):F("",!0),A.value?(h(),j("div",ca,[g(le,{"content-position":"left"},{default:w(()=>[...a[24]||(a[24]=[M("绑定 VENDOR CODE",-1)])]),_:1}),g(q,{type:"warning",closable:!1,"show-icon":"",style:{"margin-bottom":"16px"}},{default:w(()=>[...a[25]||(a[25]=[M(" 审批流程已完成，请为此供应商绑定 VENDOR CODE ",-1)])]),_:1}),g(s,{type:"primary",icon:E(J),onClick:$},{default:w(()=>[...a[26]||(a[26]=[M(" 绑定 VENDOR CODE ",-1)])]),_:1},8,["icon"])])):F("",!0),A.value?F("",!0):(h(),j(Y,{key:2},[g(le,{"content-position":"left"},{default:w(()=>[...a[27]||(a[27]=[M("您的审批决定",-1)])]),_:1}),g(Ne,{"label-width":"100px"},{default:w(()=>[g(Ce,{label:"审批决定",required:""},{default:w(()=>[g(Ee,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e)},{default:w(()=>[g(ke,{value:"approved"},{default:w(()=>[g(l,{color:"#67c23a"},{default:w(()=>[g(E(X))]),_:1}),a[28]||(a[28]=M(" 批准 ",-1))]),_:1}),g(ke,{value:"rejected"},{default:w(()=>[g(l,{color:"#f56c6c"},{default:w(()=>[g(E(K))]),_:1}),a[29]||(a[29]=M(" 拒绝 ",-1))]),_:1}),g(ke,{value:"requestInfo"},{default:w(()=>[g(l,{color:"#e6a23c"},{default:w(()=>[g(E(ee))]),_:1}),a[30]||(a[30]=M(" 退回补充资料 ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1}),g(Ce,{label:"审批意见"},{default:w(()=>[g(Re,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value=e),type:"textarea",rows:4,placeholder:"approved"===m.value?"请填写审批意见（可选）":"rejected"===m.value?"请说明驳回原因（必填）":"请填写需要供应商补充的内容（必填）"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})],64))])):(h(),j("div",He,[g(B,{description:E(t)("approvalQueue.errors.noStatus")},null,8,["description"])]))]),_:1},8,["modelValue","title"])):F("",!0),g(Ae,{modelValue:_.value,"onUpdate:modelValue":a[8]||(a[8]=e=>_.value=e),title:"绑定 VENDOR CODE",width:"500px","close-on-click-modal":!1},{footer:w(()=>[g(s,{onClick:a[7]||(a[7]=e=>_.value=!1)},{default:w(()=>[...a[35]||(a[35]=[M("取消",-1)])]),_:1}),g(s,{type:"primary",loading:R.value,disabled:!k.value.trim(),onClick:te},{default:w(()=>[...a[36]||(a[36]=[M(" 确认绑定 ",-1)])]),_:1},8,["loading","disabled"])]),default:w(()=>[g(q,{type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},{default:w(()=>[a[33]||(a[33]=M(" 请为供应商 ",-1)),D("strong",null,V(c.value?.companyName),1),a[34]||(a[34]=M(" 绑定 VENDOR CODE ",-1))]),_:1}),g(Ne,{"label-width":"120px"},{default:w(()=>[g(Ce,{label:"VENDOR CODE",required:""},{default:w(()=>[g(Re,{modelValue:k.value,"onUpdate:modelValue":a[6]||(a[6]=e=>k.value=e),placeholder:"请输入 7 位供应商代码",maxlength:"7","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-6ff4822a"]]);export{va as default};
