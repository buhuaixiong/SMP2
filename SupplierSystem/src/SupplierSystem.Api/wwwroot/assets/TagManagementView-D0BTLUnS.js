import{ao as e,b6 as a,b7 as l,b8 as t,c as o,ax as n,h as r,C as i,B as s,at as u,b9 as c,ba as d,bb as p,au as v,d as f,ay as m,b as g,o as h,e as b,f as y,ak as w,S as k,bc as _,bd as C,be as S,bf as E,bg as F,bh as M,bi as x,F as I,r as T,i as V,bj as K,bk as B,I as R,bl as A,z as D,y as $,j as L,aa as O,E as P,bm as j,aH as N,bn as z,bo as H,bp as G,bq as U,br as W,bs as Y,bt as q,bu as X,bv as J,bw as Q,bx as Z,k as ee,aD as ae,m as le,O as te,by as oe,aF as ne,aE as re,n as ie,A as se,x as ue,t as ce,bz as de,bA as pe,D as ve,bB as fe,aS as me,bC as ge,as as he,p as be,bD as ye,bE as we,bF as ke,bG as _e,bH as Ce,ac as Se,bI as Ee,bJ as Fe,a5 as Me,w as xe,bK as Ie,bL as Te,bM as Ve,u as Ke,a6 as Be,ab as Re,H as Ae,a$ as De,b4 as $e,bN as Le,$ as Oe,aM as Pe,bO as je,af as Ne,bP as ze,bQ as He,bR as Ge,al as Ue,bS as We,am as Ye,_ as qe}from"./index-laeMBjmD.js";import{v as Xe}from"./el-loading-BjFkXvsJ.js";import{E as Je}from"./el-alert-BD4DqkFF.js";import{E as Qe}from"./el-tag-DeIZXvv5.js";import{E as Ze,a as ea}from"./el-select-BqR0v05J.js";import{E as aa}from"./el-scrollbar-B2b40u5S.js";import{E as la}from"./el-divider-CnMs1Jud.js";import{E as ta,a as oa}from"./el-form-item-CrzCFDCN.js";/* empty css                 */import{E as na}from"./el-card-olMaAOOo.js";import{E as ra}from"./el-empty-5Igz9VO3.js";import{P as ia}from"./PageHeader-ZM1BP_XT.js";import{C as sa}from"./ConfirmButton-BzzEIxyG.js";import{u as ua}from"./useNotification-d4mSM-hc.js";import{c as ca}from"./castArray-BNrN1hNN.js";import{d as da}from"./debounce-BQTfVhVS.js";import"./_baseClone-BfkIVau5.js";const pa=e({color:{type:a(Object),required:!0},vertical:Boolean,disabled:Boolean}),va=pa;let fa=!1;function ma(e,a){if(!l)return;const t=function(e){var l;null==(l=a.drag)||l.call(a,e)},o=function(e){var l;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",o),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",o),document.onselectstart=null,document.ondragstart=null,fa=!1,null==(l=a.end)||l.call(a,e)},n=function(e){var l;fa||(document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",o),document.addEventListener("touchmove",t),document.addEventListener("touchend",o),fa=!0,null==(l=a.start)||l.call(a,e))};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!1})}const ga=e=>{let a,l;return"touchend"===e.type?(l=e.changedTouches[0].clientY,a=e.changedTouches[0].clientX):e.type.startsWith("touch")?(l=e.touches[0].clientY,a=e.touches[0].clientX):(l=e.clientY,a=e.clientX),{clientX:a,clientY:l}},ha=(e,{key:a,minValue:l,maxValue:n})=>{const r=p(),i=t(),s=t(),u=o(()=>e.color.get(a));function v(l){if(!s.value||!i.value||e.disabled)return;const t=r.vnode.el.getBoundingClientRect(),{clientX:o,clientY:u}=ga(l);let c;if(e.vertical){let e=u-t.top;e=Math.max(i.value.offsetHeight/2,e),e=Math.min(e,t.height-i.value.offsetHeight/2),c=Math.round((e-i.value.offsetHeight/2)/(t.height-i.value.offsetHeight)*n)}else{let e=o-t.left;e=Math.max(i.value.offsetWidth/2,e),e=Math.min(e,t.width-i.value.offsetWidth/2),c=Math.round((e-i.value.offsetWidth/2)/(t.width-i.value.offsetWidth)*n)}e.color.set(a,c)}function f(t){let o=u.value+t;o=o<l?l:o>n?n:o,e.color.set(a,o)}return{thumb:i,bar:s,currentValue:u,handleDrag:v,handleClick:function(a){var l;if(e.disabled)return;a.target!==i.value&&v(a),null==(l=i.value)||l.focus()},handleKeydown:function(t){if(e.disabled)return;const{shiftKey:o}=t,r=c(t),i=o?10:1,s="hue"===a?-1:1;let u=!0;switch(r){case d.left:case d.down:f(-i*s);break;case d.right:case d.up:f(i*s);break;case d.home:e.color.set(a,"hue"===a?n:l);break;case d.end:e.color.set(a,"hue"===a?l:n);break;case d.pageDown:f(-4*s);break;case d.pageUp:f(4*s);break;default:u=!1}u&&t.preventDefault()}}},ba=(e,{namespace:a,maxValue:l,bar:t,thumb:c,currentValue:d,handleDrag:v,getBackground:f})=>{const m=p(),g=n(a),h=r(0),b=r(0),y=r();function w(){h.value=function(){if(!c.value)return 0;if(e.vertical)return 0;const a=m.vnode.el,t=d.value;return a?Math.round(t*(a.offsetWidth-c.value.offsetWidth/2)/l):0}(),b.value=function(){if(!c.value)return 0;const a=m.vnode.el;if(!e.vertical)return 0;const t=d.value;return a?Math.round(t*(a.offsetHeight-c.value.offsetHeight/2)/l):0}(),y.value=null==f?void 0:f()}i(()=>{if(!t.value||!c.value)return;const e={drag:e=>{v(e)},end:e=>{v(e)}};ma(t.value,e),ma(c.value,e),w()}),s(d,()=>w()),s(()=>e.color.value,()=>w());const k=o(()=>[g.b(),g.is("vertical",e.vertical),g.is("disabled",e.disabled)]),_=o(()=>g.e("bar")),C=o(()=>g.e("thumb"));return{rootKls:k,barKls:_,barStyle:o(()=>({background:y.value})),thumbKls:C,thumbStyle:o(()=>({left:u(h.value),top:u(b.value)})),thumbLeft:h,thumbTop:b,update:w}},ya=f({name:"ElColorAlphaSlider"});var wa=v(f({...ya,props:pa,setup(e,{expose:a}){const l=e,{currentValue:t,bar:n,thumb:r,handleDrag:i,handleClick:s,handleKeydown:u}=ha(l,{key:"alpha",minValue:0,maxValue:100}),{rootKls:c,barKls:d,barStyle:p,thumbKls:v,thumbStyle:f,update:_}=ba(l,{namespace:"color-alpha-slider",maxValue:100,currentValue:t,bar:n,thumb:r,handleDrag:i,getBackground:function(){if(l.color&&l.color.value){const{r:e,g:a,b:t}=l.color.toRgb();return`linear-gradient(to right, rgba(${e}, ${a}, ${t}, 0) 0%, rgba(${e}, ${a}, ${t}, 1) 100%)`}return""}}),{t:C}=m(),S=o(()=>C("el.colorpicker.alphaLabel")),E=o(()=>C("el.colorpicker.alphaDescription",{alpha:t.value,color:l.color.value}));return a({update:_,bar:n,thumb:r}),(e,a)=>(h(),g("div",{class:k(y(c))},[b("div",{ref_key:"bar",ref:n,class:k(y(d)),style:w(y(p)),onClick:y(s)},null,14,["onClick"]),b("div",{ref_key:"thumb",ref:r,class:k(y(v)),style:w(y(f)),"aria-label":y(S),"aria-valuenow":y(t),"aria-valuetext":y(E),"aria-orientation":e.vertical?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":100,role:"slider",tabindex:"0",onKeydown:y(u)},null,46,["aria-label","aria-valuenow","aria-valuetext","aria-orientation","onKeydown"])],2))}}),[["__file","alpha-slider.vue"]]);const ka=f({name:"ElColorHueSlider"});var _a=v(f({...ka,props:va,setup(e,{expose:a}){const l=e,{currentValue:t,bar:n,thumb:r,handleDrag:i,handleClick:s,handleKeydown:u}=ha(l,{key:"hue",minValue:0,maxValue:360}),{rootKls:c,barKls:d,thumbKls:p,thumbStyle:v,thumbTop:f,update:_}=ba(l,{namespace:"color-hue-slider",maxValue:360,currentValue:t,bar:n,thumb:r,handleDrag:i}),{t:C}=m(),S=o(()=>C("el.colorpicker.hueLabel")),E=o(()=>C("el.colorpicker.hueDescription",{hue:t.value,color:l.color.value}));return a({bar:n,thumb:r,thumbTop:f,update:_}),(e,a)=>(h(),g("div",{class:k(y(c))},[b("div",{ref_key:"bar",ref:n,class:k(y(d)),onClick:y(s)},null,10,["onClick"]),b("div",{ref_key:"thumb",ref:r,class:k(y(p)),style:w(y(v)),"aria-label":y(S),"aria-valuenow":y(t),"aria-valuetext":y(E),"aria-orientation":e.vertical?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":360,role:"slider",tabindex:"0",onKeydown:y(u)},null,46,["aria-label","aria-valuenow","aria-valuetext","aria-orientation","onKeydown"])],2))}}),[["__file","hue-slider.vue"]]);const Ca=e({colors:{type:a(Array),required:!0},color:{type:a(Object),required:!0},enableAlpha:{type:Boolean,required:!0},disabled:Boolean}),Sa=e({modelValue:{type:a(String),default:void 0},border:{type:Boolean,default:!0},showAlpha:Boolean,colorFormat:String,disabled:Boolean,predefine:{type:a(Array)},validateEvent:{type:Boolean,default:!0}}),Ea={[S]:e=>_(e)||C(e)},Fa=Symbol("colorCommonPickerKey"),Ma=Symbol("colorPickerPanelContextKey");class xa{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new E,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const a in e)F(e,a)&&(this[a]=e[a]);e.value?this.fromString(e.value):this.doOnChange()}set(e,a){if(1!==arguments.length||"object"!=typeof e)this[`_${e}`]=a,this._isValid=!0,this.doOnChange();else for(const l in e)F(e,l)&&this.set(l,e[l])}get(e){return["hue","saturation","value","alpha"].includes(e)?Math.round(this[`_${e}`]):this[`_${e}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(e){const a=new E(e);if(this._isValid=a.isValid,a.isValid){const{h:e,s:l,v:t,a:o}=a.toHsv();this._hue=e,this._saturation=100*l,this._value=100*t,this._alpha=100*o}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}clear(){this._isValid=!1,this.value="",this._hue=0,this._saturation=100,this._value=100,this._alpha=100}compare(e){const a=new E({h:e._hue,s:e._saturation/100,v:e._value/100,a:e._alpha/100});return this._tiny.equals(a)}doOnChange(){const{_hue:e,_saturation:a,_value:l,_alpha:t,format:o,enableAlpha:n}=this;let r=o||(n?"rgb":"hex");"hex"===o&&n&&(r="hex8"),this._tiny=new E({h:e,s:a/100,v:l/100,a:t/100}),this.value=this._isValid?this._tiny.toString(r):""}}const Ia=f({name:"ElColorPredefine"});var Ta=v(f({...Ia,props:Ca,setup(e){const a=e,{rgbaColors:l,handleSelect:t}=(e=>{const{currentColor:a}=M(Ma),l=r(t(e.colors,e.color));function t(a,l){return a.map(a=>{const t=new xa({value:a,enableAlpha:e.enableAlpha});return t.selected=t.compare(l),t})}return s(()=>a.value,a=>{const t=new xa({value:a,enableAlpha:e.enableAlpha});l.value.forEach(e=>{e.selected=t.compare(e)})}),x(()=>{l.value=t(e.colors,e.color)}),{rgbaColors:l,handleSelect:function(a){e.color.fromString(e.colors[a])}}})(a),{rootKls:i,colorsKls:u,colorSelectorKls:c}=(e=>{const a=n("color-predefine");return{rootKls:o(()=>[a.b(),a.is("disabled",e.disabled)]),colorsKls:o(()=>a.e("colors")),colorSelectorKls:function(e){return[a.e("color-selector"),a.is("alpha",e.get("alpha")<100),{selected:e.selected}]}}})(a),{t:d}=m();return(e,a)=>(h(),g("div",{class:k(y(i))},[b("div",{class:k(y(u))},[(h(!0),g(I,null,T(y(l),(a,l)=>{return h(),g("button",{key:e.colors[l],type:"button",disabled:e.disabled,"aria-label":(o=a.value,d("el.colorpicker.predefineDescription",{value:o})),class:k(y(c)(a)),onClick:e=>y(t)(l)},[b("div",{style:w({backgroundColor:a.value})},null,4)],10,["disabled","aria-label","onClick"]);var o}),128))],2)],2))}}),[["__file","predefine.vue"]]);const Va=e({color:{type:a(Object),required:!0},disabled:Boolean}),Ka=f({name:"ElSvPanel"});var Ba=v(f({...Ka,props:Va,setup(e,{expose:a}){const l=e,{cursorRef:t,cursorTop:v,cursorLeft:f,background:_,saturation:C,brightness:S,handleClick:E,handleDrag:F,handleKeydown:M}=(e=>{const a=p(),l=r(),t=r(0),n=r(0),i=r("hsl(0, 100%, 50%)"),s=o(()=>e.color.get("saturation")),u=o(()=>e.color.get("value")),v=o(()=>e.color.get("hue"));function f(l){if(e.disabled)return;const o=a.vnode.el.getBoundingClientRect(),{clientX:r,clientY:i}=ga(l);let s=r-o.left,u=i-o.top;s=Math.max(0,s),s=Math.min(s,o.width),u=Math.max(0,u),u=Math.min(u,o.height),n.value=s,t.value=u,e.color.set({saturation:s/o.width*100,value:100-u/o.height*100})}function m(a){let l=s.value+a;l=l<0?0:l>100?100:l,e.color.set("saturation",l)}function g(a){let l=u.value+a;l=l<0?0:l>100?100:l,e.color.set("value",l)}return{cursorRef:l,cursorTop:t,cursorLeft:n,background:i,saturation:s,brightness:u,hue:v,handleClick:function(a){var t;e.disabled||(a.target!==l.value&&f(a),null==(t=l.value)||t.focus({preventScroll:!0}))},handleDrag:f,handleKeydown:function(a){if(e.disabled)return;const{shiftKey:l}=a,t=l?10:1;let o=!0;switch(c(a)){case d.left:m(-t);break;case d.right:m(t);break;case d.up:g(t);break;case d.down:g(-t);break;default:o=!1}o&&a.preventDefault()}}})(l),{rootKls:x,cursorKls:I,rootStyle:T,cursorStyle:V,update:K}=((e,{cursorTop:a,cursorLeft:l,background:t,handleDrag:r})=>{const c=p(),d=n("color-svpanel");function v(){const o=e.color.get("saturation"),n=e.color.get("value"),r=c.vnode.el,{clientWidth:i,clientHeight:s}=r;l.value=o*i/100,a.value=(100-n)*s/100,t.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}return i(()=>{ma(c.vnode.el,{drag:e=>{r(e)},end:e=>{r(e)}}),v()}),s([()=>e.color.get("hue"),()=>e.color.get("value"),()=>e.color.value],()=>v()),{rootKls:o(()=>d.b()),cursorKls:o(()=>d.e("cursor")),rootStyle:o(()=>({backgroundColor:t.value})),cursorStyle:o(()=>({top:u(a.value),left:u(l.value)})),update:v}})(l,{cursorTop:v,cursorLeft:f,background:_,handleDrag:F}),{t:B}=m(),R=o(()=>B("el.colorpicker.svLabel")),A=o(()=>B("el.colorpicker.svDescription",{saturation:C.value,brightness:S.value,color:l.color.value}));return a({update:K}),(e,a)=>(h(),g("div",{class:k(y(x)),style:w(y(T)),onClick:y(E)},[b("div",{ref_key:"cursorRef",ref:t,class:k(y(I)),style:w(y(V)),tabindex:"0",role:"slider","aria-valuemin":"0,0","aria-valuemax":"100,100","aria-label":y(R),"aria-valuenow":`${y(C)},${y(S)}`,"aria-valuetext":y(A),onKeydown:y(M)},null,46,["aria-label","aria-valuenow","aria-valuetext","onKeydown"])],14,["onClick"]))}}),[["__file","sv-panel.vue"]]);const Ra=(e,a)=>{const l=V(new xa({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue}));return s(()=>[e.colorFormat,e.showAlpha],()=>{l.enableAlpha=e.showAlpha,l.format=e.colorFormat||l.format,l.doOnChange(),a(S,l.value)}),{color:l}},Aa=f({name:"ElColorPickerPanel"});const Da=N(v(f({...Aa,props:Sa,emits:Ea,setup(e,{expose:a,emit:l}){const t=e,u=n("color-picker-panel"),{formItem:c}=K(),d=B(),p=r(),v=r(),f=r(),m=r(),w=r(""),{color:_}=M(Fa,()=>Ra(t,l),!0);function C(){_.fromString(w.value),_.value!==w.value&&(w.value=_.value)}function E(){var e;t.validateEvent&&(null==(e=null==c?void 0:c.validate)||e.call(c,"blur").catch(e=>j(e)))}function F(){var e,a,l;null==(e=p.value)||e.update(),null==(a=v.value)||a.update(),null==(l=f.value)||l.update()}return i(()=>{t.modelValue&&(w.value=_.value),R(F)}),s(()=>t.modelValue,e=>{e!==_.value&&(e?_.fromString(e):_.clear())}),s(()=>_.value,e=>{l(S,e),w.value=e,t.validateEvent&&(null==c||c.validate("change").catch(e=>j(e)))}),A(Ma,{currentColor:o(()=>_.value)}),a({color:_,inputRef:m,update:F}),(e,a)=>(h(),g("div",{class:k([y(u).b(),y(u).is("disabled",y(d)),y(u).is("border",e.border)]),onFocusout:E},[b("div",{class:k(y(u).e("wrapper"))},[L(_a,{ref_key:"hueRef",ref:p,class:"hue-slider",color:y(_),vertical:"",disabled:y(d)},null,8,["color","disabled"]),L(Ba,{ref_key:"svRef",ref:v,color:y(_),disabled:y(d)},null,8,["color","disabled"])],2),e.showAlpha?(h(),D(wa,{key:0,ref_key:"alphaRef",ref:f,color:y(_),disabled:y(d)},null,8,["color","disabled"])):$("v-if",!0),e.predefine?(h(),D(Ta,{key:1,ref:"predefine","enable-alpha":e.showAlpha,color:y(_),colors:e.predefine,disabled:y(d)},null,8,["enable-alpha","color","colors","disabled"])):$("v-if",!0),b("div",{class:k(y(u).e("footer"))},[L(y(P),{ref_key:"inputRef",ref:m,modelValue:w.value,"onUpdate:modelValue":e=>w.value=e,"validate-event":!1,size:"small",disabled:y(d),onChange:C},null,8,["modelValue","onUpdate:modelValue","disabled"]),O(e.$slots,"footer")],2)],34))}}),[["__file","color-picker-panel.vue"]])),$a=e({persistent:{type:Boolean,default:!0},modelValue:{type:a(String),default:void 0},id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:W,popperClass:U.popperClass,popperStyle:U.popperStyle,tabindex:{type:[String,Number],default:0},teleported:U.teleported,appendTo:U.appendTo,predefine:{type:a(Array)},validateEvent:{type:Boolean,default:!0},...G,...H(["ariaLabel"])}),La={[S]:e=>_(e)||C(e),[z]:e=>_(e)||C(e),activeChange:e=>_(e)||C(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},Oa=f({name:"ElColorPicker"});const Pa=N(v(f({...Oa,props:$a,emits:La,setup(e,{expose:a,emit:l}){const t=e,{t:i}=m(),u=n("color"),{formItem:p}=K(),v=Y(),f=B(),{valueOnClear:g,isEmptyValue:_}=q(t,null),C=Ra(t,l),{inputId:E,isLabeledByFormItem:F}=X(t,{formItemContext:p}),M=r(),x=r(),I=r(),T=r(!1),V=r(!1);let $=!0;const{isFocused:O,handleFocus:P,handleBlur:N}=J(x,{disabled:f,beforeBlur(e){var a;return null==(a=M.value)?void 0:a.isFocusInsideContent(e)},afterBlur(){var e;ge(!1),we(),t.validateEvent&&(null==(e=null==p?void 0:p.validate)||e.call(p,"blur").catch(e=>j(e)))}}),H=Q(()=>{var e,a;return null!=(a=null==(e=I.value)?void 0:e.color)?a:C.color}),G=o(()=>Z(t,Object.keys(Sa))),U=o(()=>t.modelValue||V.value?function(e,a){const{r:l,g:t,b:o,a:n}=e.toRgb();return a?`rgba(${l}, ${t}, ${o}, ${n})`:`rgb(${l}, ${t}, ${o})`}(H,t.showAlpha):"transparent"),W=o(()=>t.modelValue||V.value?H.value:""),ve=o(()=>F.value?void 0:t.ariaLabel||i("el.colorpicker.defaultLabel")),fe=o(()=>F.value?null==p?void 0:p.labelId:void 0),me=o(()=>[u.b("picker"),u.is("disabled",f.value),u.bm("picker",v.value),u.is("focused",O.value)]);function ge(e){T.value=e}const he=da(ge,100,{leading:!0});function be(){f.value||ge(!0)}function ye(){he(!1),we()}function we(){R(()=>{t.modelValue?H.fromString(t.modelValue):(H.value="",R(()=>{V.value=!1}))})}function ke(){f.value||(T.value&&we(),he(!T.value))}function _e(){const e=_(H.value)?g.value:H.value;l(S,e),l(z,e),t.validateEvent&&(null==p||p.validate("change").catch(e=>j(e))),he(!1),R(()=>{const e=new xa({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});H.compare(e)||we()})}function Ce(){he(!1),l(S,g.value),l(z,g.value),t.modelValue!==g.value&&t.validateEvent&&(null==p||p.validate("change").catch(e=>j(e))),we()}function Se(){var e,a;null==(a=null==(e=null==I?void 0:I.value)?void 0:e.inputRef)||a.focus()}function Ee(){T.value&&(ye(),O.value&&xe())}function Fe(e){e.preventDefault(),e.stopPropagation(),ge(!1),we()}function Me(e){switch(c(e)){case d.enter:case d.numpadEnter:case d.space:e.preventDefault(),e.stopPropagation(),be();break;case d.esc:Fe(e)}}function xe(){x.value.focus()}return s(()=>W.value,e=>{$&&l("activeChange",e),$=!0}),s(()=>H.value,()=>{t.modelValue||V.value||(V.value=!0)}),s(()=>t.modelValue,e=>{e?e&&e!==H.value&&($=!1,H.fromString(e)):V.value=!1}),s(()=>T.value,()=>{var e;R(null==(e=I.value)?void 0:e.update)}),A(Fa,C),a({color:H,show:be,hide:ye,focus:xe,blur:function(){x.value.blur()}}),(e,a)=>(h(),D(y(pe),{ref_key:"popper",ref:M,visible:T.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[y(u).be("picker","panel"),e.popperClass],"popper-style":e.popperStyle,"stop-popper-mouse-event":!1,pure:"",loop:"",role:"dialog",effect:"light",trigger:"click",teleported:e.teleported,transition:`${y(u).namespace.value}-zoom-in-top`,persistent:e.persistent,"append-to":e.appendTo,onShow:Se,onHide:e=>ge(!1)},{content:ee(()=>[le((h(),D(y(Da),ae({ref_key:"pickerPanelRef",ref:I},y(G),{border:!1,"validate-event":!1,onKeydown:ie(Fe,["esc"])}),{footer:ee(()=>[b("div",null,[L(y(se),{class:k(y(u).be("footer","link-btn")),text:"",size:"small",onClick:Ce},{default:ee(()=>[ue(ce(y(i)("el.colorpicker.clear")),1)]),_:1},8,["class"]),L(y(se),{plain:"",size:"small",class:k(y(u).be("footer","btn")),onClick:_e},{default:ee(()=>[ue(ce(y(i)("el.colorpicker.confirm")),1)]),_:1},8,["class"])])]),_:1},16,["onKeydown"])),[[y(de),Ee,x.value]])]),default:ee(()=>[b("div",ae({id:y(E),ref_key:"triggerRef",ref:x},e.$attrs,{class:y(me),role:"button","aria-label":y(ve),"aria-labelledby":y(fe),"aria-description":y(i)("el.colorpicker.description",{color:e.modelValue||""}),"aria-disabled":y(f),tabindex:y(f)?void 0:e.tabindex,onKeydown:Me,onFocus:y(P),onBlur:y(N)}),[b("div",{class:k(y(u).be("picker","trigger")),onClick:ke},[b("span",{class:k([y(u).be("picker","color"),y(u).is("alpha",e.showAlpha)])},[b("span",{class:k(y(u).be("picker","color-inner")),style:w({backgroundColor:y(U)})},[le(L(y(te),{class:k([y(u).be("picker","icon"),y(u).is("icon-arrow-down")])},{default:ee(()=>[L(y(oe))]),_:1},8,["class"]),[[ne,e.modelValue||V.value]]),le(L(y(te),{class:k([y(u).be("picker","empty"),y(u).is("icon-close")])},{default:ee(()=>[L(y(re))]),_:1},8,["class"]),[[ne,!e.modelValue&&!V.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","popper-style","teleported","transition","persistent","append-to","onHide"]))}}),[["__file","color-picker.vue"]]));var ja=v(f({inheritAttrs:!1}),[["render",function(e,a,l,t,o,n){return O(e.$slots,"default")}],["__file","collection.vue"]]);var Na=v(f({name:"ElCollectionItem",inheritAttrs:!1}),[["render",function(e,a,l,t,o,n){return O(e.$slots,"default")}],["__file","collection-item.vue"]]);const za="data-el-collection-item",Ha=e({style:{type:a([String,Array,Object])},currentTabId:{type:a(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:a(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ga,ElCollectionItem:Ua,COLLECTION_INJECTION_KEY:Wa,COLLECTION_ITEM_INJECTION_KEY:Ya}=(e=>{const a=`El${e}Collection`,l=`${a}Item`,t=Symbol(a),o=Symbol(l),n={...ja,name:a,setup(){const e=r(),a=new Map;A(t,{itemMap:a,getItems:()=>{const l=y(e);if(!l)return[];const t=Array.from(l.querySelectorAll(`[${za}]`));return[...a.values()].sort((e,a)=>t.indexOf(e.ref)-t.indexOf(a.ref))},collectionRef:e})}},s={...Na,name:l,setup(e,{attrs:a}){const l=r(),n=M(t,void 0);A(o,{collectionItemRef:l}),i(()=>{const e=y(l);e&&n.itemMap.set(e,{ref:e,...a})}),ve(()=>{const e=y(l);n.itemMap.delete(e)})}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:o,ElCollection:n,ElCollectionItem:s}})("RovingFocusGroup"),qa=Symbol("elRovingFocusGroup"),Xa=Symbol("elRovingFocusGroupItem"),Ja={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Qa=e=>{const{activeElement:a}=document;for(const l of e){if(l===a)return;if(l.focus(),a!==document.activeElement)return}},Za="currentTabIdChange",el="rovingFocusGroup.entryFocus",al={bubbles:!1,cancelable:!0},ll=f({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Ha,emits:[Za,"entryFocus"],setup(e,{emit:a}){var l;const t=r(null!=(l=e.currentTabId||e.defaultCurrentTabId)?l:null),n=r(!1),i=r(!1),u=r(),{getItems:d}=M(Wa,void 0),p=o(()=>[{outline:"none"},e.style]),v=fe(a=>{var l;null==(l=e.onMousedown)||l.call(e,a)},()=>{i.value=!0}),f=fe(a=>{var l;null==(l=e.onFocus)||l.call(e,a)},e=>{const a=!y(i),{target:l,currentTarget:o}=e;if(l===o&&a&&!y(n)){const e=new Event(el,al);if(null==o||o.dispatchEvent(e),!e.defaultPrevented){const e=d().filter(e=>e.focusable),a=[e.find(e=>e.active),e.find(e=>e.id===y(t)),...e].filter(Boolean).map(e=>e.ref);Qa(a)}}i.value=!1}),m=fe(a=>{var l;null==(l=e.onBlur)||l.call(e,a)},()=>{n.value=!1});A(qa,{currentTabbedId:ge(t),loop:me(e,"loop"),tabIndex:o(()=>y(n)?-1:0),rovingFocusGroupRef:u,rovingFocusGroupRootStyle:p,orientation:me(e,"orientation"),dir:me(e,"dir"),onItemFocus:e=>{a(Za,e)},onItemShiftTab:()=>{n.value=!0},onBlur:m,onFocus:f,onMousedown:v,onKeydown:a=>{const l=(e=>{const a=c(e);return Ja[a]})(a);if(l){a.preventDefault();let n=d().filter(e=>e.focusable).map(e=>e.ref);switch(l){case"last":n.reverse();break;case"prev":case"next":{"prev"===l&&n.reverse();const r=n.indexOf(a.currentTarget);n=e.loop?(o=r+1,(t=n).map((e,a)=>t[(a+o)%t.length])):n.slice(r+1);break}}R(()=>{Qa(n)})}var t,o}}),s(()=>e.currentTabId,e=>{t.value=null!=e?e:null}),he(u,el,(...e)=>{a("entryFocus",...e)})}});var tl=v(f({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ga,ElRovingFocusGroupImpl:v(ll,[["render",function(e,a,l,t,o,n){return O(e.$slots,"default")}],["__file","roving-focus-group-impl.vue"]])}}),[["render",function(e,a,l,t,o,n){const r=be("el-roving-focus-group-impl"),i=be("el-focus-group-collection");return h(),D(i,null,{default:ee(()=>[L(r,ye(we(e.$attrs)),{default:ee(()=>[O(e.$slots,"default")]),_:3},16)]),_:3})}],["__file","roving-focus-group.vue"]]);const ol=e({trigger:{...Ce.trigger,type:a([String,Array])},triggerKeys:{type:a(Array),default:()=>[d.enter,d.numpadEnter,d.space,d.down]},virtualTriggering:Ce.virtualTriggering,virtualRef:Ce.virtualRef,effect:{...U.effect,default:"light"},type:{type:a(String)},placement:{type:a(String),default:"bottom"},popperOptions:{type:a(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:a([Number,String]),default:0},maxHeight:{type:a([Number,String]),default:""},popperClass:U.popperClass,popperStyle:U.popperStyle,disabled:Boolean,role:{type:String,values:_e,default:"menu"},buttonProps:{type:a(Object)},teleported:U.teleported,persistent:{type:Boolean,default:!0}}),nl=e({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:ke}}),rl=e({onKeydown:{type:a(Function)}}),il=Symbol("elDropdown"),sl="elDropdown",{ButtonGroup:ul}=se;var cl=v(f({name:"ElDropdown",components:{ElButton:se,ElButtonGroup:ul,ElScrollbar:aa,ElTooltip:pe,ElRovingFocusGroup:tl,ElOnlyChild:Ee,ElIcon:te,ArrowDown:oe},props:ol,emits:["visible-change","click","command"],setup(e,{emit:a}){const l=p(),t=n("dropdown"),{t:i}=m(),s=r(),c=r(),d=r(),v=r(),f=r(null),g=r(null),h=r(!1),b=o(()=>({maxHeight:u(e.maxHeight)})),w=o(()=>[t.m(E.value)]),k=o(()=>ca(e.trigger)),_=Fe().value,C=o(()=>e.id||_);function S(){var e;null==(e=d.value)||e.onClose()}const E=Y();A(il,{contentRef:v,role:o(()=>e.role),triggerId:C,isUsingKeyboard:h,onItemEnter:function(){},onItemLeave:function(){const e=y(v);k.value.includes("hover")&&(null==e||e.focus({preventScroll:!0})),g.value=null},handleClose:S}),A(sl,{instance:l,dropdownSize:E,handleClick:function(){var e;null==(e=d.value)||e.onClose(void 0,0)},commandHandler:function(...e){a("command",...e)},trigger:me(e,"trigger"),hideOnClick:me(e,"hideOnClick")});return{t:i,ns:t,scrollbar:f,wrapStyle:b,dropdownTriggerKls:w,dropdownSize:E,triggerId:C,currentTabId:g,handleCurrentTabIdChange:function(e){g.value=e},handlerMainButtonClick:e=>{a("click",e)},handleClose:S,handleOpen:function(){var e;null==(e=d.value)||e.onOpen()},handleBeforeShowTooltip:function(){a("visible-change",!0)},handleShowTooltip:function(e){var a;h.value="keydown"===(null==e?void 0:e.type),null==(a=v.value)||a.focus()},handleBeforeHideTooltip:function(){a("visible-change",!1)},popperRef:d,contentRef:v,triggeringElementRef:s,referenceElementRef:c}}}),[["render",function(e,a,l,t,o,n){var r;const i=be("el-roving-focus-group"),s=be("el-scrollbar"),u=be("el-only-child"),c=be("el-tooltip"),d=be("el-button"),p=be("arrow-down"),v=be("el-icon"),f=be("el-button-group");return h(),g("div",{class:k([e.ns.b(),e.ns.is("disabled",e.disabled)])},[L(c,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"popper-style":e.popperStyle,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":"hover"===e.trigger?e.showTimeout:0,"hide-after":"hover"===e.trigger?e.hideTimeout:0,"virtual-ref":null!=(r=e.virtualRef)?r:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},Se({content:ee(()=>[L(s,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:ee(()=>[L(i,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange},{default:ee(()=>[O(e.$slots,"dropdown")]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:ee(()=>[L(u,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:ee(()=>[O(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","placement","popper-class","popper-style","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(h(),D(f,{key:0},{default:ee(()=>[L(d,ae({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:ee(()=>[O(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),L(d,ae({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:ee(()=>[L(v,{class:k(e.ns.e("icon"))},{default:ee(()=>[L(p)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):$("v-if",!0)],2)}],["__file","dropdown.vue"]]);var dl=v(f({components:{ElRovingFocusCollectionItem:Ua},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:a}){const{currentTabbedId:l,onItemFocus:t,onItemShiftTab:n,onKeydown:i}=M(qa,void 0),s=Fe(),u=r(),p=fe(e=>{a("mousedown",e)},a=>{e.focusable?t(y(s)):a.preventDefault()}),v=fe(e=>{a("focus",e)},()=>{t(y(s))}),f=fe(e=>{a("keydown",e)},e=>{const{shiftKey:a,target:l,currentTarget:t}=e;c(e)===d.tab&&a?n():l===t&&i(e)}),m=o(()=>l.value===y(s));return A(Xa,{rovingFocusGroupItemRef:u,tabIndex:o(()=>y(m)?0:-1),handleMousedown:p,handleFocus:v,handleKeydown:f}),{id:s,handleKeydown:f,handleFocus:v,handleMousedown:p}}}),[["render",function(e,a,l,t,o,n){const r=be("el-roving-focus-collection-item");return h(),D(r,{id:e.id,focusable:e.focusable,active:e.active},{default:ee(()=>[O(e.$slots,"default")]),_:3},8,["id","focusable","active"])}],["__file","roving-focus-item.vue"]]);const pl=f({name:"DropdownItemImpl",components:{ElIcon:te},props:nl,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:a}){const l=n("dropdown"),{role:t}=M(il,void 0),{collectionItemRef:r}=M(Ya,void 0),{rovingFocusGroupItemRef:i,tabIndex:s,handleFocus:u,handleKeydown:p,handleMousedown:v}=M(Xa,void 0),f=Ie(r,i),m=o(()=>"menu"===t.value?"menuitem":"navigation"===t.value?"link":"button"),g=fe(e=>{const l=c(e);if([d.enter,d.numpadEnter,d.space].includes(l))return e.preventDefault(),e.stopImmediatePropagation(),a("clickimpl",e),!0},p);return{ns:l,itemRef:f,dataset:{[za]:""},role:m,tabIndex:s,handleFocus:u,handleKeydown:g,handleMousedown:v}}});const vl=()=>{const e=M(sl,{}),a=o(()=>null==e?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:a}};var fl=v(f({name:"ElDropdownItem",components:{ElRovingFocusItem:dl,ElDropdownItemImpl:v(pl,[["render",function(e,a,l,t,o,n){const r=be("el-icon");return h(),g(I,null,[e.divided?(h(),g("li",{key:0,role:"separator",class:k(e.ns.bem("menu","item","divided"))},null,2)):$("v-if",!0),b("li",ae({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:a=>e.$emit("clickimpl",a),onFocus:e.handleFocus,onKeydown:xe(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:a=>e.$emit("pointermove",a),onPointerleave:a=>e.$emit("pointerleave",a)}),[e.icon?(h(),D(r,{key:0},{default:ee(()=>[(h(),D(Me(e.icon)))]),_:1})):$("v-if",!0),O(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}],["__file","dropdown-item-impl.vue"]])},inheritAttrs:!1,props:nl,emits:["pointermove","pointerleave","click"],setup(e,{emit:a,attrs:l}){const{elDropdown:t}=vl(),n=p(),{onItemEnter:r,onItemLeave:i}=M(il,void 0),s=fe(e=>(a("pointermove",e),e.defaultPrevented),Te(a=>{if(e.disabled)return void i(a);const l=a.currentTarget;l===document.activeElement||l.contains(document.activeElement)||(r(a),a.defaultPrevented||null==l||l.focus({preventScroll:!0}))})),u=fe(e=>(a("pointerleave",e),e.defaultPrevented),Te(i));return{handleClick:fe(l=>{if(!e.disabled)return a("click",l),"keydown"!==l.type&&l.defaultPrevented},a=>{var l,o,r;e.disabled?a.stopImmediatePropagation():((null==(l=null==t?void 0:t.hideOnClick)?void 0:l.value)&&(null==(o=t.handleClick)||o.call(t)),null==(r=t.commandHandler)||r.call(t,e.command,n,a))}),handlePointerMove:s,handlePointerLeave:u,propsAndAttrs:o(()=>({...e,...l}))}}}),[["render",function(e,a,l,t,o,n){const r=be("el-dropdown-item-impl"),i=be("el-roving-focus-item");return h(),D(i,{focusable:!e.disabled},{default:ee(()=>[L(r,ae(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:ee(()=>[O(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])}],["__file","dropdown-item.vue"]]);var ml=v(f({name:"ElDropdownMenu",props:rl,setup(e){const a=n("dropdown"),{_elDropdownSize:l}=vl(),t=l.value,{contentRef:r,role:i,triggerId:s,isUsingKeyboard:u,handleClose:p}=M(il,void 0),{rovingFocusGroupRef:v,rovingFocusGroupRootStyle:f,onBlur:m,onFocus:g,onKeydown:h,onMousedown:b}=M(qa,void 0),{collectionRef:y}=M(Wa,void 0),w=o(()=>[a.b("menu"),a.bm("menu",null==t?void 0:t.value)]),k=Ie(r,v,y),_=fe(a=>{var l;null==(l=e.onKeydown)||l.call(e,a)},e=>{const{currentTarget:a,target:l}=e,t=c(e);if(a.contains(l),d.tab===t)return p();h(e)});return{size:t,rovingFocusGroupRootStyle:f,dropdownKls:w,role:i,triggerId:s,dropdownListWrapperRef:k,handleKeydown:_,onBlur:m,handleFocus:function(e){u.value&&g(e)},onMousedown:b}}}),[["render",function(e,a,l,t,o,n){return h(),g("ul",{ref:e.dropdownListWrapperRef,class:k(e.dropdownKls),style:w(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onFocusin:e.handleFocus,onFocusout:e.onBlur,onKeydown:xe(e.handleKeydown,["self"]),onMousedown:xe(e.onMousedown,["self"])},[O(e.$slots,"default")],46,["role","aria-labelledby","onFocusin","onFocusout","onKeydown","onMousedown"])}],["__file","dropdown-menu.vue"]]);const gl=N(cl,{DropdownItem:fl,DropdownMenu:ml}),hl=Ve(fl),bl=Ve(ml),yl={class:"tag-management-view"},wl={class:"search-bar"},kl={key:0,class:"empty-state"},_l={key:1,class:"tags-grid"},Cl={class:"tag-card-header"},Sl={class:"tag-info"},El={class:"tag-description"},Fl={class:"tag-stats"},Ml={class:"tag-actions"},xl={style:{"margin-left":"10px",color:"#909399","font-size":"12px"}},Il={class:"supplier-management-content"},Tl={class:"supplier-section"},Vl={key:0,class:"empty-message"},Kl={key:1,class:"supplier-list"},Bl={class:"supplier-info"},Rl={class:"supplier-name"},Al={class:"supplier-details"},Dl={class:"supplier-section"},$l={style:{"margin-bottom":"20px"}},Ll={style:{color:"#606266","margin-bottom":"12px"}},Ol=qe(f({name:"TagManagementView",__name:"TagManagementView",setup(e){const a=ua(),{t:l}=Ke(),t=Be(),n=Re(t),s=n.suppliers,u=n.availableTags,c=r(!1),d=r(""),p=r(!1),v=r(!1),f=r(null),m=r(),k=r({name:"",description:"",color:"#409EFF"}),_=r(!1),C=r(null),S=r([]),E=r(!1),F=r([]),M=r(!1),x=o(()=>({name:[{required:!0,message:l("tagManagement.validation.nameRequired"),trigger:"blur"},{min:2,max:50,message:l("tagManagement.validation.nameLength"),trigger:"blur"}]})),V=e=>{if(!e)return null;if(Array.isArray(e))return e;if("object"==typeof e&&"value"in e){const a=e.value;return Array.isArray(a)?a:null}return null},K=(e,a)=>{if(e&&"object"==typeof e&&a in e)return e[a]},B=o(()=>{const e=V(u);if(e)return e;const a=V(K(t,"availableTags"));if(a)return a;return V(K(t,"tags"))??[]}),R=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#9370db","#ff69b4"],A=o(()=>{const e=B.value;if(!d.value)return e;const a=d.value.toLowerCase();return e.filter(e=>e.name.toLowerCase().includes(a)||e.description&&e.description.toLowerCase().includes(a))}),O=o(()=>{const e=s.value||[],a=new Set(S.value.map(e=>e.id));return e.filter(e=>!a.has(e.id))}),j=e=>(s.value||[]).filter(a=>Array.isArray(a.tags)&&a.tags.some(a=>"string"==typeof a&&a===e||"object"==typeof a&&a?.name===e)).length,N=r(null),z=r(!1),H=async()=>{if(N.value)try{await ze(N.value.id),await t.ensureTags(),a.success(l("tagManagement.notifications.deleteSuccess")),z.value=!1,N.value=null}catch(e){console.error(l("tagManagement.notifications.deleteFailure"),e),a.error(l("tagManagement.notifications.deleteFailure"))}},G=()=>{p.value=!1,f.value=null,m.value?.resetFields(),k.value={name:"",description:"",color:"#409EFF"}},U=async()=>{m.value&&await m.value.validate(async e=>{if(e){v.value=!0;try{if(f.value){(await He(f.value.id,{name:k.value.name,description:k.value.description||void 0,color:k.value.color||void 0})).data;a.success(l("tagManagement.notifications.updateSuccess"))}else{(await Ge({name:k.value.name,description:k.value.description||void 0,color:k.value.color||void 0})).data;a.success(l("tagManagement.notifications.createSuccess"))}await t.ensureTags(),G()}catch(o){console.error(l("tagManagement.notifications.saveFailure"),o);const e=l("tagManagement.notifications.saveFailure"),t=o?.response?.data?.message;a.error(t||e)}finally{v.value=!1}}})},W=()=>{_.value=!1,C.value=null,S.value=[],F.value=[]},Y=async()=>{if(C.value&&0!==F.value.length){M.value=!0;try{const e=await Ue(C.value.id,F.value);a.success(l("tagManagement.notifications.addSuppliersSuccess",{count:e.data.added,tagName:C.value.name}));const o=await We(C.value.id);S.value=o.data||[],F.value=[],await t.fetchSuppliers()}catch(e){console.error("Failed to add suppliers to tag",e),a.error(l("tagManagement.notifications.addSuppliersFailure"))}finally{M.value=!1}}};return i(async()=>{c.value=!0;try{await Promise.all([t.ensureTags(),t.fetchSuppliers()])}catch(e){console.error(l("tagManagement.notifications.loadFailure"),e),a.error(l("tagManagement.notifications.loadFailure"))}finally{c.value=!1}}),(e,o)=>{const n=te,r=se,i=P,s=ra,u=hl,V=bl,K=gl,B=Qe,q=na,X=oa,J=Pa,Q=ta,Z=Ae,ae=la,oe=ea,ne=Ze,re=Je,ie=Xe;return h(),g("div",yl,[L(ia,{title:y(l)("tagManagement.title"),subtitle:y(l)("tagManagement.subtitle")},{actions:ee(()=>[L(r,{type:"primary",onClick:o[0]||(o[0]=e=>p.value=!0)},{default:ee(()=>[L(n,null,{default:ee(()=>[L(y(De))]),_:1}),ue(" "+ce(y(l)("tagManagement.createTag")),1)]),_:1})]),_:1},8,["title","subtitle"]),b("div",wl,[L(i,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=e=>d.value=e),placeholder:y(l)("tagManagement.searchPlaceholder"),clearable:"",style:{"max-width":"400px"}},{prefix:ee(()=>[L(n,null,{default:ee(()=>[L(y($e))]),_:1})]),_:1},8,["modelValue","placeholder"])]),le((h(),D(q,{class:"tags-card"},{default:ee(()=>[0===A.value.length?(h(),g("div",kl,[L(s,{description:y(l)("tagManagement.empty")},{default:ee(()=>[L(r,{type:"primary",onClick:o[2]||(o[2]=e=>p.value=!0)},{default:ee(()=>[ue(ce(y(l)("tagManagement.createFirstTag")),1)]),_:1})]),_:1},8,["description"])])):(h(),g("div",_l,[(h(!0),g(I,null,T(A.value,e=>(h(),g("div",{key:e.id,class:"tag-card",style:w({borderColor:e.color||"#409EFF"})},[b("div",Cl,[b("div",Sl,[b("div",{class:"tag-color-dot",style:w({backgroundColor:e.color||"#409EFF"})},null,4),b("h3",null,ce(e.name),1)]),L(K,{trigger:"click"},{dropdown:ee(()=>[L(V,null,{default:ee(()=>[L(u,{onClick:a=>(e=>{f.value=e,k.value={name:e.name,description:e.description||"",color:e.color||"#409EFF"},p.value=!0})(e)},{default:ee(()=>[L(n,null,{default:ee(()=>[L(y(Oe))]),_:1}),ue(" "+ce(y(l)("tagManagement.editTag")),1)]),_:1},8,["onClick"]),L(u,{onClick:a=>(e=>{N.value=e,z.value=!0})(e),divided:""},{default:ee(()=>[L(n,null,{default:ee(()=>[L(y(Pe))]),_:1}),ue(" "+ce(y(l)("tagManagement.deleteTag")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:ee(()=>[L(n,{class:"tag-menu-icon"},{default:ee(()=>[L(y(Le))]),_:1})]),_:2},1024)]),b("p",El,ce(e.description||y(l)("tagManagement.noDescription")),1),b("div",Fl,[L(B,{size:"small",type:"info"},{default:ee(()=>[ue(ce(y(l)("tagManagement.usedBySuppliers",{count:j(e.name)})),1)]),_:2},1024)]),b("div",Ml,[L(r,{size:"small",onClick:t=>(async e=>{C.value=e,_.value=!0,F.value=[],E.value=!0;try{const a=await We(e.id);S.value=a.data||[]}catch(t){console.error("Failed to load suppliers for tag",t),a.error(l("tagManagement.notifications.loadSuppliersFailure")),S.value=[]}finally{E.value=!1}})(e)},{default:ee(()=>[L(n,null,{default:ee(()=>[L(y(je))]),_:1}),ue(" "+ce(y(l)("tagManagement.manageSuppliers")),1)]),_:1},8,["onClick"])])],4))),128))]))]),_:1})),[[ie,c.value]]),L(Z,{modelValue:p.value,"onUpdate:modelValue":o[6]||(o[6]=e=>p.value=e),title:f.value?y(l)("tagManagement.editTag"):y(l)("tagManagement.createTag"),width:"500px"},{footer:ee(()=>[L(r,{onClick:G},{default:ee(()=>[ue(ce(y(l)("common.cancel")),1)]),_:1}),L(r,{type:"primary",loading:v.value,onClick:U},{default:ee(()=>[ue(ce(f.value?y(l)("tagManagement.actions.update"):y(l)("tagManagement.actions.create")),1)]),_:1},8,["loading"])]),default:ee(()=>[L(Q,{model:k.value,rules:x.value,ref_key:"tagFormRef",ref:m,"label-width":"100px"},{default:ee(()=>[L(X,{label:y(l)("tagManagement.tagName"),prop:"name"},{default:ee(()=>[L(i,{modelValue:k.value.name,"onUpdate:modelValue":o[3]||(o[3]=e=>k.value.name=e),placeholder:y(l)("tagManagement.placeholders.tagName")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),L(X,{label:y(l)("tagManagement.description")},{default:ee(()=>[L(i,{modelValue:k.value.description,"onUpdate:modelValue":o[4]||(o[4]=e=>k.value.description=e),type:"textarea",rows:3,placeholder:y(l)("tagManagement.placeholders.description")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),L(X,{label:y(l)("tagManagement.tagColor")},{default:ee(()=>[L(J,{modelValue:k.value.color,"onUpdate:modelValue":o[5]||(o[5]=e=>k.value.color=e),"show-alpha":"",predefine:R},null,8,["modelValue"]),b("span",xl,ce(y(l)("tagManagement.colorHelper")),1)]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),L(Z,{modelValue:_.value,"onUpdate:modelValue":o[8]||(o[8]=e=>_.value=e),title:y(l)("tagManagement.manageSuppliersForTag",{tagName:C.value?.name||""}),width:"800px"},{footer:ee(()=>[L(r,{onClick:W},{default:ee(()=>[ue(ce(y(l)("common.close")),1)]),_:1})]),default:ee(()=>[le((h(),g("div",Il,[b("div",Tl,[b("h3",null,ce(y(l)("tagManagement.currentSuppliers")),1),0===S.value.length?(h(),g("div",Vl,ce(y(l)("tagManagement.noSuppliersWithTag")),1)):(h(),g("div",Kl,[(h(!0),g(I,null,T(S.value,e=>(h(),g("div",{key:e.id,class:"supplier-item"},[b("div",Bl,[b("span",Rl,ce(e.companyName),1),b("span",Al,ce(e.category)+" | "+ce(e.region),1)]),L(r,{size:"small",type:"danger",text:"",onClick:o=>(async e=>{if(C.value)try{await Ye(C.value.id,[e]),S.value=S.value.filter(a=>a.id!==e),a.success(l("tagManagement.notifications.removeSupplierSuccess",{tagName:C.value.name})),await t.fetchSuppliers()}catch(o){console.error("Failed to remove supplier from tag",o),a.error(l("tagManagement.notifications.removeSupplierFailure"))}})(e.id)},{default:ee(()=>[L(n,null,{default:ee(()=>[L(y(Ne))]),_:1}),ue(" "+ce(y(l)("common.remove")),1)]),_:1},8,["onClick"])]))),128))]))]),L(ae),b("div",Dl,[b("h3",null,ce(y(l)("tagManagement.addSuppliers")),1),L(ne,{modelValue:F.value,"onUpdate:modelValue":o[7]||(o[7]=e=>F.value=e),multiple:"",filterable:"",placeholder:y(l)("tagManagement.searchSuppliersPlaceholder"),style:{width:"100%"}},{default:ee(()=>[(h(!0),g(I,null,T(O.value,e=>(h(),D(oe,{key:e.id,label:`${e.companyName} (${e.category})`,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),L(r,{type:"primary",disabled:0===F.value.length,loading:M.value,onClick:Y,style:{"margin-top":"12px",width:"100%"}},{default:ee(()=>[ue(ce(y(l)("tagManagement.addSelectedSuppliers",{count:F.value.length})),1)]),_:1},8,["disabled","loading"])])])),[[ie,E.value]])]),_:1},8,["modelValue","title"]),L(Z,{modelValue:z.value,"onUpdate:modelValue":o[10]||(o[10]=e=>z.value=e),title:y(l)("tagManagement.confirmDeleteTitle"),width:"450px","close-on-click-modal":!1},{footer:ee(()=>[L(r,{onClick:o[9]||(o[9]=e=>z.value=!1)},{default:ee(()=>[ue(ce(y(l)("common.cancel")),1)]),_:1}),L(sa,{type:"danger",text:y(l)("common.delete"),"confirm-text":y(l)("tagManagement.confirmDeleteAction"),onConfirm:H},null,8,["text","confirm-text"])]),default:ee(()=>[b("div",$l,[b("p",Ll,ce(N.value&&j(N.value.name)>0?y(l)("tagManagement.confirmDeleteInUse",{count:j(N.value.name)}):y(l)("tagManagement.confirmDeleteWithName",{name:N.value?.name})),1),N.value&&j(N.value.name)>0?(h(),D(re,{key:0,type:"warning",closable:!1,"show-icon":""},{default:ee(()=>[ue(ce(y(l)("tagManagement.deleteWarning")),1)]),_:1})):$("",!0)])]),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-c2ca878f"]]);export{Ol as default};
