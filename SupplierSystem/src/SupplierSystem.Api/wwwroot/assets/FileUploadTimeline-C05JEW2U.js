import{d as e,u as a,c as t,z as s,k as l,b as o,r as p,e as r,j as i,t as n,x as c,y as d,f as m,S as u,F as f,o as v,_ as y}from"./index-CS8qqvyX.js";import{a as g,E as U}from"./el-timeline-item-DBrKp6UW.js";import{E as k}from"./el-tag-CryT86qm.js";import{d as w}from"./dayjs.min-CuEfV50W.js";const R={class:"timeline-header"},j={key:0,class:"timeline-content"},_={key:0},h={key:1},b={key:2},x={key:3,class:"comments"},M={key:1,class:"timeline-content"},T={style:{color:"#e6a23c"}},H={key:2,class:"timeline-content"},Y={style:{color:"#909399"}},z=y(e({__name:"FileUploadTimeline",props:{workflow:{},currentStep:{},status:{},approvalHistory:{}},setup(e){const y=e,{t:z}=a(),A=t(()=>{const e=[],a=new Map(y.approvalHistory.map(e=>[e.step,e]));let t=!1;const s="rejected"===y.status,l="approved"===y.status;return y.workflow.forEach(o=>{const p=a.get(o.step),r=o.step===y.currentStep&&!l,i=!r&&!t&&!s;let n,c,d,m,u,f;p?"approved"===p.decision?(n="completed",c=z("fileUpload.timeline.status.approved"),d="success",m="success",u="#67c23a",f=!1):(n="rejected",c=z("fileUpload.timeline.status.rejected"),d="danger",m="danger",u="#f56c6c",f=!1):r?(n="pending",c=z("fileUpload.timeline.status.pending"),d="warning",m="warning",u="#e6a23c",f=!1,t=!0):i&&l?(n="completed",c=z("fileUpload.timeline.status.approved"),d="success",m="success",u="#67c23a",f=!1):(n="future",c=z("fileUpload.timeline.status.future"),d="info",m="info",u="#909399",f=!0),e.push({step:o.step,label:o.label,status:n,statusText:c,type:d,tagType:m,color:u,hollow:f,approvalRecord:p}),r&&!s&&(t=!0)}),e});return(e,a)=>{const t=k,y=g,E=U;return v(),s(E,null,{default:l(()=>[(v(!0),o(f,null,p(A.value,e=>(v(),s(y,{key:e.step,type:e.type,color:e.color,hollow:e.hollow},{default:l(()=>{return[r("div",{class:u(["timeline-card",e.status])},[r("div",R,[r("h4",null,n(e.label),1),i(t,{type:e.tagType,size:"small"},{default:l(()=>[c(n(e.statusText),1)]),_:2},1032,["type"])]),e.approvalRecord?(v(),o("div",j,[e.approvalRecord.approverName?(v(),o("p",_,[r("strong",null,n(m(z)("fileUpload.timeline.approver"))+":",1),c(" "+n(e.approvalRecord.approverName),1)])):d("",!0),e.approvalRecord.createdAt?(v(),o("p",h,[r("strong",null,n(m(z)("fileUpload.timeline.approvedAt"))+":",1),c(" "+n((a=e.approvalRecord.createdAt,w(a).format("YYYY-MM-DD HH:mm"))),1)])):d("",!0),e.approvalRecord.decision?(v(),o("p",b,[r("strong",null,n(m(z)("fileUpload.timeline.decision"))+":",1),i(t,{type:"approved"===e.approvalRecord.decision?"success":"danger",size:"small"},{default:l(()=>{return[c(n((a=e.approvalRecord.decision,z("approved"===a?"fileUpload.timeline.decisionLabels.approved":"fileUpload.timeline.decisionLabels.rejected"))),1)];var a}),_:2},1032,["type"])])):d("",!0),e.approvalRecord.comments?(v(),o("p",x,[r("strong",null,n(m(z)("fileUpload.timeline.comments"))+":",1),c(" "+n(e.approvalRecord.comments),1)])):d("",!0)])):"pending"===e.status?(v(),o("div",M,[r("p",T,n(m(z)("fileUpload.timeline.pendingMessage")),1)])):(v(),o("div",H,[r("p",Y,n(m(z)("fileUpload.timeline.futureMessage")),1)]))],2)];var a}),_:2},1032,["type","color","hollow"]))),128))]),_:1})}}}),[["__scopeId","data-v-1a5aa31b"]]);export{z as default};
