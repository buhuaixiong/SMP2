import{W as e,d as a,u as l,h as t,c as r,C as o,b as n,j as u,z as d,y as c,e as i,k as s,f as h,H as m,A as g,a9 as p,x as f,t as y,$ as v,m as w,aM as x,F as b,r as R,E as _,a$ as V,o as N,_ as C}from"./index-z18YH7Dc.js";import{v as F}from"./el-loading-7xWQcrrA.js";import{E as U,a as k}from"./el-form-item-cm6i1Rmw.js";/* empty css                 */import{E as D}from"./el-input-number-B_hpMh-b.js";import{E as j}from"./el-divider-BD_m2uVZ.js";import{E as T}from"./el-date-picker-panel-BdFQfbPX.js";import"./el-scrollbar-CG2II4zE.js";import{E as Z}from"./el-tag-S4xrfAE-.js";import{E as S,a as Y}from"./el-select-DoDq5h9m.js";import{E as P}from"./el-card-D9ai6MQf.js";import{E as z}from"./el-empty-BjWeTOWy.js";import{E,a as A}from"./el-table-column-CA4nIRHh.js";import{E as G}from"./el-alert-Cu2gEKbk.js";import{P as M}from"./PageHeader-Boi9sEgv.js";import{u as B}from"./useNotification-Bhw0wSDz.js";import"./castArray-0lMpEhXd.js";import"./_baseClone-DK5jo9D5.js";import"./index-Dr8Y1Rol.js";import"./dayjs.min-CuEfV50W.js";import"./debounce-CStugFZ2.js";const H={class:"exchange-rate-management"},$={class:"management-columns"},L={class:"management-column"},O={class:"card-header"},W={class:"card-title"},I={class:"rate-value"},K={class:"formula"},J={class:"rate-value"},q={class:"formula"},Q={class:"card-header"},X={class:"card-title"},ee={class:"management-column"},ae={class:"card-header"},le={class:"card-title-group"},te={class:"card-title"},re={class:"route-name"},oe={key:0,class:"route-name-zh"},ne={class:"rate-value"},ue={class:"card-header"},de={class:"card-title-group"},ce={class:"card-title"},ie={class:"rate-value"},se={class:"card-header"},he={class:"card-title"},me={class:"card-filters"},ge={class:"form-help"},pe={class:"rates-grid"},fe={class:"rate-preview"},ye={class:"freight-dialog-actions"},ve={class:"freight-dialog-actions"},we=C(a({__name:"AdminExchangeRateManagementView",setup(a){const C=B(),{t:we}=l(),xe=t(null),be=t([]),Re=t([]),_e=t(""),Ve=t(!1),Ne=t(!1),Ce=t(!1),Fe=t(!1),Ue=t(null),ke=t([]),De=t([]),je=t(0),Te=t(null),Ze=t(""),Se=t(!1),Ye=t(!1),Pe=t(!1),ze=t(!1),Ee=t(null),Ae=t([]),Ge=t(0),Me=t([]),Be=t(!1),He=t(!1),$e=t(!1),Le=t({effectiveDate:(new Date).toISOString().split("T")[0],notes:"",rates:{CNY:.1388889,HKD:.1282051,EUR:1.0989011,USD:1,KRW:7576e-7,GBP:1.35,JPY:.0068376,THB:.0277778}}),Oe=t({year:0,notes:"",routes:[]}),We=t({year:0,notes:"",rates:[]}),Ie=r(()=>{if(!xe.value)return null;const e=xe.value.defaultYear,a=xe.value.rates[e];return a?Object.entries(a).map(([e,a])=>({currency:e,rate:a})):null}),Ke=r(()=>Ue.value?.routes??[]),Je=r(()=>Ee.value?.rates??[]),qe=r(()=>{if(!xe.value)return!1;const e=new Date(xe.value.updatedAt),a=new Date;Math.floor((a.getTime()-e.getTime())/864e5),a.getMonth();const l=a.getMonth()>0||a.getDate()>=3,t=e.getFullYear()<a.getFullYear();return l&&t}),Qe=async()=>{Ve.value=!0;try{xe.value=await async function(){return(await e("/exchange-rates")).data}();const a=xe.value.defaultYear;xe.value.rates[a]&&(Le.value.rates={...xe.value.rates[a]})}catch(a){C.error(we("exchangeRate.loadConfigFailed")),console.error("Failed to load config:",a)}finally{Ve.value=!1}},Xe=async()=>{Ne.value=!0;try{be.value=await async function(a,l){const t={};return a&&(t.currency=a),t.limit=l,(await e("/exchange-rates/history",{params:t})).data}(_e.value,50)}catch(a){C.error(we("exchangeRate.loadHistoryFailed")),console.error("Failed to load history:",a)}finally{Ne.value=!1}},ea=async()=>{try{Re.value=await async function(){return(await e("/exchange-rates/currencies")).data}()}catch(a){console.error("Failed to load currencies:",a)}},aa=async()=>{Se.value=!0;try{const a=je.value>0?je.value:void 0,l=await async function(a){const l={};return a&&(l.year=a),(await e("/freight-rates",{params:l})).data}(a);Ue.value=l,De.value=l.availableYears??[],je.value=l.year,Oe.value.year=l.year,Oe.value.routes=l.routes.map(e=>({routeCode:e.routeCode,routeName:e.routeName??"",routeNameZh:e.routeNameZh??"",rate:e.rate,isNew:!1})),Te.value||(Te.value=l.year)}catch(a){C.error(we("exchangeRate.freightLoadFailed")),console.error("Failed to load freight rates:",a)}finally{Se.value=!1}},la=async()=>{Ye.value=!0;try{ke.value=await async function(a,l,t){const r={};return a&&(r.route=a),l&&(r.year=l),r.limit=t,(await e("/freight-rates/history",{params:r})).data}(Ze.value||void 0,Te.value??void 0,50)}catch(a){C.error(we("exchangeRate.freightLoadHistoryFailed")),console.error("Failed to load freight history:",a)}finally{Ye.value=!1}},ta=async()=>{Be.value=!0;try{const a=Ge.value>0?Ge.value:void 0,l=await async function(a){const l={};return a&&(l.year=a),(await e("/country-freight-rates",{params:l})).data}(a);Ee.value=l,Ae.value=l.availableYears??[],Ge.value=l.year,Me.value=l.productGroups??[],We.value.year=l.year,We.value.rates=l.rates.map(e=>({countryCode:e.countryCode,countryName:e.countryName??"",countryNameZh:e.countryNameZh??"",productGroup:e.productGroup,rate:e.rate,isNew:!1}))}catch(a){C.error(we("exchangeRate.countryFreightLoadFailed")),console.error("Failed to load country freight rates:",a)}finally{Be.value=!1}},ra=()=>{Qe(),Xe(),aa(),la(),ta()},oa=async()=>{try{await C.confirm(we("exchangeRate.confirmUpdateMessage"),we("exchangeRate.confirmUpdateTitle"),{confirmButtonText:we("common.confirm"),cancelButtonText:we("common.cancel"),type:"warning"}),Fe.value=!0,await async function(a){return await e("/exchange-rates",{method:"POST",body:a})}({rates:Le.value.rates,effectiveDate:Le.value.effectiveDate,notes:Le.value.notes}),C.success(we("exchangeRate.updateSuccess")),Ce.value=!1,await Qe(),await Xe()}catch(a){"cancel"!==a&&(C.error(a.message||we("exchangeRate.updateFailed")),console.error("Failed to update rates:",a))}finally{Fe.value=!1}},na=async a=>{try{await C.confirm(we("exchangeRate.confirmDeleteMessage"),we("exchangeRate.confirmDeleteTitle"),{confirmButtonText:we("common.delete"),cancelButtonText:we("common.cancel"),type:"warning"}),await async function(a){await e(`/exchange-rates/${a}`,{method:"DELETE"})}(a.id),C.success(we("exchangeRate.deleteSuccess")),await Xe()}catch(l){"cancel"!==l&&(C.error(l.message||we("exchangeRate.deleteFailed")),console.error("Failed to delete record:",l))}},ua=()=>{Oe.value.routes.push({routeCode:"",routeName:"",routeNameZh:"",rate:null,isNew:!0})},da=()=>{We.value.rates.push({countryCode:"",countryName:"",countryNameZh:"",productGroup:Me.value[0]??"",rate:null,isNew:!0})},ca=async()=>{try{await C.confirm(we("exchangeRate.freightConfirmUpdateMessage"),we("exchangeRate.freightConfirmUpdateTitle"),{confirmButtonText:we("common.confirm"),cancelButtonText:we("common.cancel"),type:"warning"});const a=Oe.value.routes.filter(e=>e.routeCode.trim().length>0&&null!==e.rate).map(e=>({routeCode:e.routeCode.trim(),routeName:e.routeName.trim().length>0?e.routeName.trim():null,routeNameZh:e.routeNameZh.trim().length>0?e.routeNameZh.trim():null,rate:Number(e.rate)})).filter(e=>Number.isFinite(e.rate)&&e.rate>0);if(0===a.length)return void C.warning(we("exchangeRate.freightNoData"));ze.value=!0,await async function(a){return await e("/freight-rates",{method:"POST",body:a})}({year:Oe.value.year,notes:Oe.value.notes,routes:a}),C.success(we("exchangeRate.freightUpdateSuccess")),Pe.value=!1,await aa(),await la()}catch(a){"cancel"!==a&&(C.error(a.message||we("exchangeRate.freightUpdateFailed")),console.error("Failed to update freight rates:",a))}finally{ze.value=!1}},ia=async()=>{try{await C.confirm(we("exchangeRate.countryFreightConfirmUpdateMessage"),we("exchangeRate.countryFreightConfirmUpdateTitle"),{confirmButtonText:we("common.confirm"),cancelButtonText:we("common.cancel"),type:"warning"});const a=We.value.rates.filter(e=>e.countryCode.trim().length>0&&e.productGroup.trim().length>0&&null!==e.rate).map(e=>({countryCode:e.countryCode.trim(),productGroup:e.productGroup.trim(),countryName:e.countryName.trim().length>0?e.countryName.trim():null,countryNameZh:e.countryNameZh.trim().length>0?e.countryNameZh.trim():null,rate:Number(e.rate)})).filter(e=>Number.isFinite(e.rate)&&e.rate>0);if(0===a.length)return void C.warning(we("exchangeRate.countryFreightNoData"));$e.value=!0,await async function(a){return await e("/country-freight-rates",{method:"POST",body:a})}({year:We.value.year,notes:We.value.notes,rates:a}),C.success(we("exchangeRate.countryFreightUpdateSuccess")),He.value=!1,await ta()}catch(a){"cancel"!==a&&(C.error(a.message||we("exchangeRate.countryFreightUpdateFailed")),console.error("Failed to update country freight rates:",a))}finally{$e.value=!1}},sa=async()=>{je.value=Oe.value.year,await aa(),await la()},ha=async()=>{Ge.value=We.value.year,await ta()},ma=e=>e?new Date(e).toLocaleDateString():"-",ga=e=>e?new Date(e).toLocaleString():"-",pa=e=>null==e||Number.isNaN(e)?"-":`${(100*e).toFixed(2)}%`;return o(()=>{Qe(),Xe(),ea(),aa(),la(),ta()}),(e,a)=>{const l=g,t=G,r=Z,o=E,C=A,B=z,Ue=P,Ee=Y,Qe=S,ea=T,fa=k,ya=_,va=j,wa=D,xa=U,ba=m,Ra=F;return N(),n("div",H,[u(M,null,{title:s(()=>[f(y(h(we)("exchangeRate.title")),1)]),actions:s(()=>[u(l,{type:"primary",icon:h(p),onClick:ra},{default:s(()=>[f(y(h(we)("exchangeRate.refreshRates")),1)]),_:1},8,["icon"]),u(l,{type:"success",icon:h(v),onClick:a[0]||(a[0]=e=>Ce.value=!0)},{default:s(()=>[f(y(h(we)("exchangeRate.updateRates")),1)]),_:1},8,["icon"])]),_:1}),qe.value?(N(),d(t,{key:0,title:h(we)("exchangeRate.reminderTitle"),type:"warning",closable:!1,"show-icon":"",class:"reminder-alert"},{default:s(()=>[i("div",null,y(h(we)("exchangeRate.reminderMessage")),1),u(l,{size:"small",type:"warning",onClick:a[1]||(a[1]=e=>Ce.value=!0),style:{"margin-top":"8px"}},{default:s(()=>[f(y(h(we)("exchangeRate.updateNow")),1)]),_:1})]),_:1},8,["title"])):c("",!0),i("div",$,[i("div",L,[u(Ue,{class:"current-rates-card",shadow:"never"},{header:s(()=>[i("div",O,[i("span",W,y(h(we)("exchangeRate.currentRates")),1),xe.value?(N(),d(r,{key:0,type:"info"},{default:s(()=>[f(y(h(we)("exchangeRate.lastUpdated"))+": "+y(ma(xe.value.updatedAt)),1)]),_:1})):c("",!0)])]),default:s(()=>[w((N(),n("div",null,[Ie.value?(N(),d(C,{key:0,data:Ie.value,border:"",style:{width:"100%"}},{default:s(()=>[u(o,{label:h(we)("exchangeRate.currency"),prop:"currency",width:"120"},{default:s(({row:e})=>[u(r,null,{default:s(()=>[f(y(e.currency),1)]),_:2},1024)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.rate"),prop:"rate",width:"180"},{default:s(({row:e})=>[i("span",I,y(e.rate.toFixed(7)),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.rateFormula"),"min-width":"200"},{default:s(({row:e})=>[i("span",K,"1 "+y(e.currency)+" = "+y(e.rate.toFixed(7))+" USD",1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.inverseRate"),width:"180"},{default:s(({row:e})=>[i("span",J,y((1/e.rate).toFixed(2)),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.inverseFormula"),"min-width":"200"},{default:s(({row:e})=>[i("span",q,"1 USD = "+y((1/e.rate).toFixed(4))+" "+y(e.currency),1)]),_:1},8,["label"])]),_:1},8,["data"])):(N(),d(B,{key:1,description:h(we)("exchangeRate.noData")},null,8,["description"]))])),[[Ra,Ve.value]])]),_:1}),u(Ue,{class:"history-card",shadow:"never"},{header:s(()=>[i("div",Q,[i("span",X,y(h(we)("exchangeRate.history")),1),u(Qe,{modelValue:_e.value,"onUpdate:modelValue":a[2]||(a[2]=e=>_e.value=e),placeholder:h(we)("exchangeRate.selectCurrency"),clearable:"",onChange:Xe,style:{width:"200px"}},{default:s(()=>[(N(!0),n(b,null,R(Re.value,e=>(N(),d(Ee,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])]),default:s(()=>[w((N(),n("div",null,[u(C,{data:be.value,border:"",style:{width:"100%"}},{default:s(()=>[u(o,{label:h(we)("exchangeRate.effectiveDate"),prop:"effectiveDate",width:"140"},{default:s(({row:e})=>[f(y(ma(e.effectiveDate)),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.currency"),prop:"currency",width:"100"},{default:s(({row:e})=>[u(r,{size:"small"},{default:s(()=>[f(y(e.currency),1)]),_:2},1024)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.rate"),prop:"rate",width:"150"},{default:s(({row:e})=>[f(y(e.rate.toFixed(7)),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.source"),prop:"source",width:"100"},{default:s(({row:e})=>[u(r,{type:"manual"===e.source?"warning":"info",size:"small"},{default:s(()=>[f(y(e.source),1)]),_:2},1032,["type"])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.notes"),prop:"notes","min-width":"200","show-overflow-tooltip":""},null,8,["label"]),u(o,{label:h(we)("exchangeRate.createdAt"),prop:"createdAt",width:"160"},{default:s(({row:e})=>[f(y(ga(e.createdAt)),1)]),_:1},8,["label"]),u(o,{label:h(we)("common.actions"),width:"100",fixed:"right"},{default:s(({row:e})=>[u(l,{type:"danger",size:"small",icon:h(x),onClick:a=>na(e),link:""},{default:s(()=>[f(y(h(we)("common.delete")),1)]),_:1},8,["icon","onClick"])]),_:1},8,["label"])]),_:1},8,["data"]),0!==be.value.length||Ne.value?c("",!0):(N(),d(B,{key:0,description:h(we)("exchangeRate.noHistory")},null,8,["description"]))])),[[Ra,Ne.value]])]),_:1})]),i("div",ee,[u(Ue,{class:"freight-rates-card",shadow:"never"},{header:s(()=>[i("div",ae,[i("div",le,[i("span",te,y(h(we)("exchangeRate.freightCurrentRates")),1),u(Qe,{modelValue:je.value,"onUpdate:modelValue":a[3]||(a[3]=e=>je.value=e),placeholder:h(we)("exchangeRate.freightSelectYear"),size:"small",style:{width:"120px"},onChange:aa},{default:s(()=>[(N(!0),n(b,null,R(De.value,e=>(N(),d(Ee,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),u(l,{type:"success",icon:h(v),onClick:a[4]||(a[4]=e=>Pe.value=!0)},{default:s(()=>[f(y(h(we)("exchangeRate.freightUpdateRates")),1)]),_:1},8,["icon"])])]),default:s(()=>[w((N(),n("div",null,[Ke.value.length>0?(N(),d(C,{key:0,data:Ke.value,border:"",style:{width:"100%"}},{default:s(()=>[u(o,{label:h(we)("exchangeRate.freightRoute"),"min-width":"160"},{default:s(({row:e})=>[u(r,{size:"small"},{default:s(()=>[f(y(e.routeCode),1)]),_:2},1024)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.freightRouteName"),"min-width":"200"},{default:s(({row:e})=>[i("div",re,[i("div",null,y(e.routeName||e.routeCode),1),e.routeNameZh?(N(),n("div",oe,y(e.routeNameZh),1)):c("",!0)])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.freightRate"),width:"140"},{default:s(({row:e})=>[i("span",ne,y(e.rate.toFixed(6)),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.freightRatePercent"),width:"140"},{default:s(({row:e})=>[f(y(pa(e.rate)),1)]),_:1},8,["label"])]),_:1},8,["data"])):(N(),d(B,{key:1,description:h(we)("exchangeRate.freightNoData")},null,8,["description"]))])),[[Ra,Se.value]])]),_:1}),u(Ue,{class:"country-freight-rates-card",shadow:"never"},{header:s(()=>[i("div",ue,[i("div",de,[i("span",ce,y(h(we)("exchangeRate.countryFreightCurrentRates")),1),u(Qe,{modelValue:Ge.value,"onUpdate:modelValue":a[5]||(a[5]=e=>Ge.value=e),placeholder:h(we)("exchangeRate.countryFreightSelectYear"),size:"small",style:{width:"140px"},onChange:ta},{default:s(()=>[(N(!0),n(b,null,R(Ae.value,e=>(N(),d(Ee,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),u(l,{type:"success",icon:h(v),onClick:a[6]||(a[6]=e=>He.value=!0)},{default:s(()=>[f(y(h(we)("exchangeRate.countryFreightUpdateRates")),1)]),_:1},8,["icon"])])]),default:s(()=>[w((N(),n("div",null,[Je.value.length>0?(N(),d(C,{key:0,data:Je.value,border:"",style:{width:"100%"}},{default:s(()=>[u(o,{label:h(we)("exchangeRate.countryFreightCountryCode"),"min-width":"140"},{default:s(({row:e})=>[u(r,{size:"small"},{default:s(()=>[f(y(e.countryCode),1)]),_:2},1024)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.countryFreightCountryName"),"min-width":"160"},{default:s(({row:e})=>[f(y(e.countryName||e.countryCode),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.countryFreightCountryNameZh"),"min-width":"160"},{default:s(({row:e})=>[f(y(e.countryNameZh||"-"),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.countryFreightProductGroup"),"min-width":"140"},{default:s(({row:e})=>[u(r,{size:"small",type:"info"},{default:s(()=>[f(y(e.productGroup),1)]),_:2},1024)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.countryFreightRate"),width:"140"},{default:s(({row:e})=>[i("span",ie,y(e.rate.toFixed(6)),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.countryFreightRatePercent"),width:"140"},{default:s(({row:e})=>[f(y(pa(e.rate)),1)]),_:1},8,["label"])]),_:1},8,["data"])):(N(),d(B,{key:1,description:h(we)("exchangeRate.countryFreightNoData")},null,8,["description"]))])),[[Ra,Be.value]])]),_:1}),u(Ue,{class:"freight-history-card",shadow:"never"},{header:s(()=>[i("div",se,[i("span",he,y(h(we)("exchangeRate.freightHistory")),1),i("div",me,[u(Qe,{modelValue:Te.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Te.value=e),placeholder:h(we)("exchangeRate.freightSelectYear"),clearable:"",size:"small",style:{width:"120px"},onChange:la},{default:s(()=>[(N(!0),n(b,null,R(De.value,e=>(N(),d(Ee,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),u(Qe,{modelValue:Ze.value,"onUpdate:modelValue":a[8]||(a[8]=e=>Ze.value=e),placeholder:h(we)("exchangeRate.freightSelectRoute"),clearable:"",filterable:"",size:"small",style:{width:"200px"},onChange:la},{default:s(()=>[(N(!0),n(b,null,R(Ke.value,e=>(N(),d(Ee,{key:e.routeCode,label:e.routeName||e.routeCode,value:e.routeCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])])]),default:s(()=>[w((N(),n("div",null,[u(C,{data:ke.value,border:"",style:{width:"100%"}},{default:s(()=>[u(o,{label:h(we)("exchangeRate.freightYear"),prop:"year",width:"100"},null,8,["label"]),u(o,{label:h(we)("exchangeRate.freightRoute"),"min-width":"160"},{default:s(({row:e})=>[u(r,{size:"small"},{default:s(()=>[f(y(e.routeCode),1)]),_:2},1024)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.freightRate"),prop:"rate",width:"140"},{default:s(({row:e})=>[f(y(e.rate.toFixed(6)),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.freightRatePercent"),width:"140"},{default:s(({row:e})=>[f(y(pa(e.rate)),1)]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.source"),prop:"source",width:"100"},{default:s(({row:e})=>[u(r,{type:"manual"===e.source?"warning":"info",size:"small"},{default:s(()=>[f(y(e.source),1)]),_:2},1032,["type"])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.notes"),prop:"notes","min-width":"200","show-overflow-tooltip":""},null,8,["label"]),u(o,{label:h(we)("exchangeRate.createdAt"),prop:"createdAt",width:"160"},{default:s(({row:e})=>[f(y(ga(e.createdAt)),1)]),_:1},8,["label"])]),_:1},8,["data"]),0!==ke.value.length||Ye.value?c("",!0):(N(),d(B,{key:0,description:h(we)("exchangeRate.freightNoHistory")},null,8,["description"]))])),[[Ra,Ye.value]])]),_:1})])]),u(ba,{modelValue:Ce.value,"onUpdate:modelValue":a[12]||(a[12]=e=>Ce.value=e),title:h(we)("exchangeRate.updateDialogTitle"),width:"800px","close-on-click-modal":!1},{footer:s(()=>[u(l,{onClick:a[11]||(a[11]=e=>Ce.value=!1)},{default:s(()=>[f(y(h(we)("common.cancel")),1)]),_:1}),u(l,{type:"primary",onClick:oa,loading:Fe.value},{default:s(()=>[f(y(h(we)("exchangeRate.confirmUpdate")),1)]),_:1},8,["loading"])]),default:s(()=>[u(xa,{model:Le.value,"label-width":"140px"},{default:s(()=>[u(fa,{label:h(we)("exchangeRate.effectiveDate")},{default:s(()=>[u(ea,{modelValue:Le.value.effectiveDate,"onUpdate:modelValue":a[9]||(a[9]=e=>Le.value.effectiveDate=e),type:"date",placeholder:h(we)("exchangeRate.selectDate"),"value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue","placeholder"]),i("div",ge,y(h(we)("exchangeRate.effectiveDateHelp")),1)]),_:1},8,["label"]),u(fa,{label:h(we)("exchangeRate.notes")},{default:s(()=>[u(ya,{modelValue:Le.value.notes,"onUpdate:modelValue":a[10]||(a[10]=e=>Le.value.notes=e),type:"textarea",rows:2,placeholder:h(we)("exchangeRate.notesPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),u(va),i("div",pe,[(N(!0),n(b,null,R(Le.value.rates,(e,a)=>(N(),n("div",{key:a,class:"rate-input-item"},[u(fa,{label:a},{default:s(()=>[u(wa,{modelValue:Le.value.rates[a],"onUpdate:modelValue":e=>Le.value.rates[a]=e,precision:7,min:1e-7,step:1e-7,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"]),i("div",fe," 1 "+y(a)+" = "+y(Le.value.rates[a]?.toFixed(7)||0)+" USD ",1)]),_:2},1032,["label"])]))),128))]),u(t,{title:h(we)("exchangeRate.updateWarning"),type:"warning",closable:!1,"show-icon":"",style:{"margin-top":"16px"}},null,8,["title"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),u(ba,{modelValue:He.value,"onUpdate:modelValue":a[16]||(a[16]=e=>He.value=e),title:h(we)("exchangeRate.countryFreightUpdateDialogTitle"),width:"980px","close-on-click-modal":!1},{footer:s(()=>[u(l,{onClick:a[15]||(a[15]=e=>He.value=!1)},{default:s(()=>[f(y(h(we)("common.cancel")),1)]),_:1}),u(l,{type:"primary",onClick:ia,loading:$e.value},{default:s(()=>[f(y(h(we)("exchangeRate.confirmUpdate")),1)]),_:1},8,["loading"])]),default:s(()=>[u(xa,{model:We.value,"label-width":"160px"},{default:s(()=>[u(fa,{label:h(we)("exchangeRate.countryFreightYear")},{default:s(()=>[u(Qe,{modelValue:We.value.year,"onUpdate:modelValue":a[13]||(a[13]=e=>We.value.year=e),placeholder:h(we)("exchangeRate.countryFreightSelectYear"),style:{width:"180px"},onChange:ha},{default:s(()=>[(N(!0),n(b,null,R(Ae.value,e=>(N(),d(Ee,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),u(fa,{label:h(we)("exchangeRate.notes")},{default:s(()=>[u(ya,{modelValue:We.value.notes,"onUpdate:modelValue":a[14]||(a[14]=e=>We.value.notes=e),type:"textarea",rows:2,placeholder:h(we)("exchangeRate.countryFreightNotesPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),u(va),i("div",ye,[u(l,{icon:h(V),onClick:da},{default:s(()=>[f(y(h(we)("exchangeRate.countryFreightAddRate")),1)]),_:1},8,["icon"])]),u(C,{data:We.value.rates,border:"",style:{width:"100%"}},{default:s(()=>[u(o,{label:h(we)("exchangeRate.countryFreightCountryCode"),"min-width":"150"},{default:s(({row:e})=>[u(ya,{modelValue:e.countryCode,"onUpdate:modelValue":a=>e.countryCode=a,disabled:!e.isNew},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.countryFreightCountryName"),"min-width":"160"},{default:s(({row:e})=>[u(ya,{modelValue:e.countryName,"onUpdate:modelValue":a=>e.countryName=a,placeholder:h(we)("exchangeRate.countryFreightCountryNamePlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.countryFreightCountryNameZh"),"min-width":"160"},{default:s(({row:e})=>[u(ya,{modelValue:e.countryNameZh,"onUpdate:modelValue":a=>e.countryNameZh=a,placeholder:h(we)("exchangeRate.countryFreightCountryNameZhPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.countryFreightProductGroup"),"min-width":"160"},{default:s(({row:e})=>[u(Qe,{modelValue:e.productGroup,"onUpdate:modelValue":a=>e.productGroup=a,disabled:!e.isNew,filterable:""},{default:s(()=>[(N(!0),n(b,null,R(Me.value,e=>(N(),d(Ee,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","disabled"])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.countryFreightRate"),width:"160"},{default:s(({row:e})=>[u(wa,{modelValue:e.rate,"onUpdate:modelValue":a=>e.rate=a,precision:6,min:1e-6,step:1e-6,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),u(o,{label:h(we)("common.actions"),width:"100"},{default:s(({row:e,$index:a})=>[e.isNew?(N(),d(l,{key:0,type:"danger",size:"small",icon:h(x),onClick:e=>{return l=a,void We.value.rates.splice(l,1);var l},link:""},{default:s(()=>[f(y(h(we)("common.delete")),1)]),_:1},8,["icon","onClick"])):c("",!0)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),u(ba,{modelValue:Pe.value,"onUpdate:modelValue":a[20]||(a[20]=e=>Pe.value=e),title:h(we)("exchangeRate.freightUpdateDialogTitle"),width:"900px","close-on-click-modal":!1},{footer:s(()=>[u(l,{onClick:a[19]||(a[19]=e=>Pe.value=!1)},{default:s(()=>[f(y(h(we)("common.cancel")),1)]),_:1}),u(l,{type:"primary",onClick:ca,loading:ze.value},{default:s(()=>[f(y(h(we)("exchangeRate.confirmUpdate")),1)]),_:1},8,["loading"])]),default:s(()=>[u(xa,{model:Oe.value,"label-width":"120px"},{default:s(()=>[u(fa,{label:h(we)("exchangeRate.freightYear")},{default:s(()=>[u(Qe,{modelValue:Oe.value.year,"onUpdate:modelValue":a[17]||(a[17]=e=>Oe.value.year=e),placeholder:h(we)("exchangeRate.freightSelectYear"),style:{width:"180px"},onChange:sa},{default:s(()=>[(N(!0),n(b,null,R(De.value,e=>(N(),d(Ee,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),u(fa,{label:h(we)("exchangeRate.notes")},{default:s(()=>[u(ya,{modelValue:Oe.value.notes,"onUpdate:modelValue":a[18]||(a[18]=e=>Oe.value.notes=e),type:"textarea",rows:2,placeholder:h(we)("exchangeRate.freightNotesPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),u(va),i("div",ve,[u(l,{icon:h(V),onClick:ua},{default:s(()=>[f(y(h(we)("exchangeRate.freightAddRoute")),1)]),_:1},8,["icon"])]),u(C,{data:Oe.value.routes,border:"",style:{width:"100%"}},{default:s(()=>[u(o,{label:h(we)("exchangeRate.freightRoute"),"min-width":"180"},{default:s(({row:e})=>[u(ya,{modelValue:e.routeCode,"onUpdate:modelValue":a=>e.routeCode=a,placeholder:h(we)("exchangeRate.freightRoutePlaceholder"),disabled:!e.isNew},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.freightRouteName"),"min-width":"180"},{default:s(({row:e})=>[u(ya,{modelValue:e.routeName,"onUpdate:modelValue":a=>e.routeName=a,placeholder:h(we)("exchangeRate.freightRouteNamePlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.freightRouteNameZh"),"min-width":"180"},{default:s(({row:e})=>[u(ya,{modelValue:e.routeNameZh,"onUpdate:modelValue":a=>e.routeNameZh=a,placeholder:h(we)("exchangeRate.freightRouteNameZhPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),u(o,{label:h(we)("exchangeRate.freightRate"),width:"160"},{default:s(({row:e})=>[u(wa,{modelValue:e.rate,"onUpdate:modelValue":a=>e.rate=a,precision:6,min:1e-6,step:1e-6,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),u(o,{label:h(we)("common.actions"),width:"100"},{default:s(({row:e,$index:a})=>[e.isNew?(N(),d(l,{key:0,type:"danger",size:"small",icon:h(x),onClick:e=>{return l=a,void Oe.value.routes.splice(l,1);var l},link:""},{default:s(()=>[f(y(h(we)("common.delete")),1)]),_:1},8,["icon","onClick"])):c("",!0)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-98226652"]]);export{we as default};
